<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Loader Definitions | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.1ef58692.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.1ef58692.js" as="script"><link rel="preload" href="/webpack-book/assets/js/33.1fe84891.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/38.2a53c8e6.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.45cc87d3.css"><link rel="prefetch" href="/webpack-book/assets/js/1.45cc87d3.js"><link rel="prefetch" href="/webpack-book/assets/js/2.c0558643.js"><link rel="prefetch" href="/webpack-book/assets/js/3.82147960.js"><link rel="prefetch" href="/webpack-book/assets/js/4.4e17298f.js"><link rel="prefetch" href="/webpack-book/assets/js/5.fc33582f.js"><link rel="prefetch" href="/webpack-book/assets/js/6.559785d0.js"><link rel="prefetch" href="/webpack-book/assets/js/7.ff44e233.js"><link rel="prefetch" href="/webpack-book/assets/js/8.4150c5f1.js"><link rel="prefetch" href="/webpack-book/assets/js/9.c1062c75.js"><link rel="prefetch" href="/webpack-book/assets/js/10.f0dee939.js"><link rel="prefetch" href="/webpack-book/assets/js/11.faef7c31.js"><link rel="prefetch" href="/webpack-book/assets/js/12.e8da1b7a.js"><link rel="prefetch" href="/webpack-book/assets/js/13.1c9fec0f.js"><link rel="prefetch" href="/webpack-book/assets/js/14.6c0bc544.js"><link rel="prefetch" href="/webpack-book/assets/js/15.300e7dc8.js"><link rel="prefetch" href="/webpack-book/assets/js/16.a4f3fa6b.js"><link rel="prefetch" href="/webpack-book/assets/js/17.de8ce753.js"><link rel="prefetch" href="/webpack-book/assets/js/18.88a81980.js"><link rel="prefetch" href="/webpack-book/assets/js/19.115de346.js"><link rel="prefetch" href="/webpack-book/assets/js/20.83e4aea8.js"><link rel="prefetch" href="/webpack-book/assets/js/21.2e3c90de.js"><link rel="prefetch" href="/webpack-book/assets/js/22.94484168.js"><link rel="prefetch" href="/webpack-book/assets/js/23.31a875d3.js"><link rel="prefetch" href="/webpack-book/assets/js/24.0fd19b9e.js"><link rel="prefetch" href="/webpack-book/assets/js/25.8c0325c7.js"><link rel="prefetch" href="/webpack-book/assets/js/26.7dd0a21d.js"><link rel="prefetch" href="/webpack-book/assets/js/27.7a717d84.js"><link rel="prefetch" href="/webpack-book/assets/js/28.93ca3bc4.js"><link rel="prefetch" href="/webpack-book/assets/js/29.56efc258.js"><link rel="prefetch" href="/webpack-book/assets/js/30.2ea44d1b.js"><link rel="prefetch" href="/webpack-book/assets/js/31.b96b3185.js"><link rel="prefetch" href="/webpack-book/assets/js/32.9a2c7707.js"><link rel="prefetch" href="/webpack-book/assets/js/34.0901960e.js"><link rel="prefetch" href="/webpack-book/assets/js/35.39c28bc1.js"><link rel="prefetch" href="/webpack-book/assets/js/36.006dbaf0.js"><link rel="prefetch" href="/webpack-book/assets/js/37.552f2311.js"><link rel="prefetch" href="/webpack-book/assets/js/39.0c228fc5.js"><link rel="prefetch" href="/webpack-book/assets/js/40.f633d2d4.js"><link rel="prefetch" href="/webpack-book/assets/js/41.a4483034.js"><link rel="prefetch" href="/webpack-book/assets/js/42.f367d05e.js"><link rel="prefetch" href="/webpack-book/assets/js/43.8ece1b2e.js"><link rel="prefetch" href="/webpack-book/assets/js/44.d1ba4040.js"><link rel="prefetch" href="/webpack-book/assets/js/45.8d6495e8.js"><link rel="prefetch" href="/webpack-book/assets/js/46.afed86d6.js"><link rel="prefetch" href="/webpack-book/assets/js/47.e7c6d41a.js"><link rel="prefetch" href="/webpack-book/assets/js/48.6a1bb0d4.js"><link rel="prefetch" href="/webpack-book/assets/js/49.204939ef.js"><link rel="prefetch" href="/webpack-book/assets/js/50.7bc7042f.js"><link rel="prefetch" href="/webpack-book/assets/js/51.fa44042b.js"><link rel="prefetch" href="/webpack-book/assets/js/52.93f9cae4.js"><link rel="prefetch" href="/webpack-book/assets/js/53.4fd764c8.js"><link rel="prefetch" href="/webpack-book/assets/js/54.f3e7d2a9.js"><link rel="prefetch" href="/webpack-book/assets/js/55.527622d5.js"><link rel="prefetch" href="/webpack-book/assets/js/56.c86daeee.js"><link rel="prefetch" href="/webpack-book/assets/js/57.0c7a7a91.js"><link rel="prefetch" href="/webpack-book/assets/js/58.765a870d.js"><link rel="prefetch" href="/webpack-book/assets/js/59.bc01c29d.js"><link rel="prefetch" href="/webpack-book/assets/js/60.cc3266a7.js"><link rel="prefetch" href="/webpack-book/assets/js/61.d4742353.js"><link rel="prefetch" href="/webpack-book/assets/js/62.1d551a7a.js"><link rel="prefetch" href="/webpack-book/assets/js/63.0eae740f.js"><link rel="prefetch" href="/webpack-book/assets/js/64.a564e6c8.js"><link rel="prefetch" href="/webpack-book/assets/js/65.f84359d1.js"><link rel="prefetch" href="/webpack-book/assets/js/66.3a62781a.js"><link rel="prefetch" href="/webpack-book/assets/js/67.821e7211.js"><link rel="prefetch" href="/webpack-book/assets/js/68.f3764711.js"><link rel="prefetch" href="/webpack-book/assets/js/69.4556cf84.js"><link rel="prefetch" href="/webpack-book/assets/js/70.cb76d9d3.js"><link rel="prefetch" href="/webpack-book/assets/js/71.f5c0508d.js"><link rel="prefetch" href="/webpack-book/assets/js/72.86c41abe.js"><link rel="prefetch" href="/webpack-book/assets/js/73.a8820435.js"><link rel="prefetch" href="/webpack-book/assets/js/74.9008eb01.js"><link rel="prefetch" href="/webpack-book/assets/js/75.ee7a8bbb.js"><link rel="prefetch" href="/webpack-book/assets/js/76.d24d189a.js"><link rel="prefetch" href="/webpack-book/assets/js/77.3d2824f1.js"><link rel="prefetch" href="/webpack-book/assets/js/78.d029813d.js"><link rel="prefetch" href="/webpack-book/assets/js/79.92bf908e.js"><link rel="prefetch" href="/webpack-book/assets/js/80.0605ed79.js"><link rel="prefetch" href="/webpack-book/assets/js/81.1c589dac.js"><link rel="prefetch" href="/webpack-book/assets/js/82.47924dd8.js"><link rel="prefetch" href="/webpack-book/assets/js/83.9d8e676d.js"><link rel="prefetch" href="/webpack-book/assets/js/84.c82d11aa.js"><link rel="prefetch" href="/webpack-book/assets/js/85.726b81c4.js"><link rel="prefetch" href="/webpack-book/assets/js/86.64948b27.js"><link rel="prefetch" href="/webpack-book/assets/js/87.b48cf050.js"><link rel="prefetch" href="/webpack-book/assets/js/88.c6692c41.js"><link rel="prefetch" href="/webpack-book/assets/js/89.3e130a8d.js"><link rel="prefetch" href="/webpack-book/assets/js/90.1d7bcf63.js"><link rel="prefetch" href="/webpack-book/assets/js/91.86cca913.js"><link rel="prefetch" href="/webpack-book/assets/js/92.db0ad595.js"><link rel="prefetch" href="/webpack-book/assets/js/93.751d25a6.js"><link rel="prefetch" href="/webpack-book/assets/js/94.fcc921ca.js"><link rel="prefetch" href="/webpack-book/assets/js/95.19fec0e9.js"><link rel="prefetch" href="/webpack-book/assets/js/96.b3553500.js"><link rel="prefetch" href="/webpack-book/assets/js/97.b758c384.js"><link rel="prefetch" href="/webpack-book/assets/js/98.c5609fb7.js"><link rel="prefetch" href="/webpack-book/assets/js/99.aeae8502.js"><link rel="prefetch" href="/webpack-book/assets/js/100.0b9a4bc7.js"><link rel="prefetch" href="/webpack-book/assets/js/101.065606e1.js"><link rel="prefetch" href="/webpack-book/assets/js/102.34624029.js"><link rel="prefetch" href="/webpack-book/assets/js/103.4719eae8.js"><link rel="prefetch" href="/webpack-book/assets/js/104.3a239f3b.js"><link rel="prefetch" href="/webpack-book/assets/js/105.319c5359.js"><link rel="prefetch" href="/webpack-book/assets/js/106.70eddccc.js"><link rel="prefetch" href="/webpack-book/assets/js/107.d55c9ccd.js"><link rel="prefetch" href="/webpack-book/assets/js/108.2bd7e358.js"><link rel="prefetch" href="/webpack-book/assets/js/109.38234887.js"><link rel="prefetch" href="/webpack-book/assets/js/110.1461cec1.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.1ef58692.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.45cc87d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/en/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/loading/01_loader_definitions.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/loading/01_loader_definitions.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/webpack-book/en/" class="sidebar-link">webpack Book</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>guide</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>developing</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>styling</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>loading Assets</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/en/loading/01_loader_definitions.html" class="active sidebar-link">Loader Definitions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#anatomy-of-a-loader" class="sidebar-link">Anatomy of a Loader</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#loader-evaluation-order" class="sidebar-link">Loader Evaluation Order</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#passing-parameters-to-a-loader" class="sidebar-link">Passing Parameters to a Loader</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#branching-at-use-using-a-function" class="sidebar-link">Branching at use Using a Function</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#inline-definitions" class="sidebar-link">Inline Definitions</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#alternate-ways-to-match-files" class="sidebar-link">Alternate Ways to Match Files</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#loading-based-on-resourcequery" class="sidebar-link">Loading Based on resourceQuery</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#loading-based-on-issuer" class="sidebar-link">Loading Based on issuer</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#understanding-loader-behavior" class="sidebar-link">Understanding Loader Behavior</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/loading/01_loader_definitions.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/webpack-book/en/loading/02_images.html" class="sidebar-link">Loading Images</a></li><li><a href="/webpack-book/en/loading/03_fonts.html" class="sidebar-link">Loading Fonts</a></li><li><a href="/webpack-book/en/loading/04_javascript.html" class="sidebar-link">Loading JavaScript</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>building</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>optimizing</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>output</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>techniques</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>extending</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="loader-definitions"><a href="#loader-definitions" aria-hidden="true" class="header-anchor">#</a> Loader Definitions</h1><p>Webpack provides multiple ways to set up module loaders. Webpack 2 simplified the situation by introducing the <code>use</code> field. It can be a good idea to prefer absolute paths here as they allow you to move configuration without breaking assumptions.</p><p>The other way is to set <code>context</code> field as this gives a similar effect and affects the way entry points and loaders are resolved. It doesn't have an impact on the output, though, and you still need to use an absolute path or <code>/</code> there.</p><p>Assuming you set an <code>include</code> or <code>exclude</code> rule, packages loaded from <em>node_modules</em> still work as the assumption is that they have been compiled in such a way that they work out of the box. If they don't, then you have to apply techniques covered in the <em>Consuming Packages</em> chapter.</p><p>T&gt; <code>include</code>/<code>exclude</code> is handy with <em>node_modules</em> as webpack processes and traverses the installed packages by default when you import JavaScript files to your project. Therefore you need to configure it to avoid that behavior. Other file types don't suffer from this issue.</p><h2 id="anatomy-of-a-loader"><a href="#anatomy-of-a-loader" aria-hidden="true" class="header-anchor">#</a> Anatomy of a Loader</h2><p>Webpack supports a large variety of formats through <em>loaders</em>. Also, it supports a couple of JavaScript module formats out of the box. The idea is the same. You always set up a loader, or loaders, and connect those with your directory structure.</p><p>{pagebreak}</p><p>Consider the example below where webpack processes JavaScript through Babel:</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// **Conditions** to match files using RegExp, function.</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>

        <span class="token comment">// **Restrictions**</span>
        <span class="token comment">// Restrict matching to a directory. This</span>
        <span class="token comment">// also accepts an array of paths or a function.</span>
        <span class="token comment">// The same applies to `exclude`.</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">exclude</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// You can perform more complicated checks  as well.</span>
          <span class="token keyword">return</span> path<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/node_modules/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// **Actions** to apply loaders to the matched files.</span>
        use<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>T&gt; If you are not sure how a particular RegExp matches, consider using an online tool, such as <a href="https://regex101.com/" target="_blank" rel="noopener noreferrer">regex101<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="http://regexr.com/" target="_blank" rel="noopener noreferrer">RegExr<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, or <a href="https://regexper.com" target="_blank" rel="noopener noreferrer">Regexper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="loader-evaluation-order"><a href="#loader-evaluation-order" aria-hidden="true" class="header-anchor">#</a> Loader Evaluation Order</h2><p>It's good to keep in mind that webpack's loaders are always evaluated from right to left and from bottom to top (separate definitions). The right-to-left rule is easier to remember when you think about as functions. You can read definition <code>use: [&quot;style-loader&quot;, &quot;css-loader&quot;]</code> as <code>style(css(input))</code> based on this rule.</p><p>To see the rule in action, consider the example below:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Based on the right to left rule, the example can be split up while keeping it equivalent:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="enforcing-order"><a href="#enforcing-order" aria-hidden="true" class="header-anchor">#</a> Enforcing Order</h3><p>Even though it would be possible to develop an arbitrary configuration using the rule above, it can be convenient to be able to force specific rules to be applied before or after regular ones. The <code>enforce</code> field can come in handy here. It can be set to either <code>pre</code> or <code>post</code> to push processing either before or after other loaders.</p><p>Linting is a good example because the build should fail before it does anything else. Using <code>enforce: &quot;post&quot;</code> is rarer and it would imply you want to perform a check against the built source. Performing analysis against the built source is one potential example.</p><p>{pagebreak}</p><p>The basic syntax goes as below:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token comment">// Conditions</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
  enforce<span class="token punctuation">:</span> <span class="token string">&quot;pre&quot;</span><span class="token punctuation">,</span> <span class="token comment">// &quot;post&quot; too</span>

  <span class="token comment">// Actions</span>
  use<span class="token punctuation">:</span> <span class="token string">&quot;eslint-loader&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>It would be possible to write the same configuration without <code>enforce</code> if you chained the declaration with other loaders related to the <code>test</code> carefully. Using <code>enforce</code> removes the necessity for that and allows you to split loader execution into separate stages that are easier to compose.</p><h2 id="passing-parameters-to-a-loader"><a href="#passing-parameters-to-a-loader" aria-hidden="true" class="header-anchor">#</a> Passing Parameters to a Loader</h2><p>There's a query format that allows passing parameters to loaders:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token comment">// Conditions</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
  include<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token punctuation">,</span>

  <span class="token comment">// Actions</span>
  use<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader?presets[]=env&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>This style of configuration works in entries and source imports too as webpack picks it up. The format comes in handy in certain individual cases, but often you are better off using more readable alternatives.</p><p>{pagebreak}</p><p>It's preferable to go through <code>use</code>:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token comment">// Conditions</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
  include<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token punctuation">,</span>

  <span class="token comment">// Actions</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>If you wanted to use more than one loader, you could pass an array to <code>use</code> and expand from there:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
  include<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token punctuation">,</span>

  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader&quot;</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Add more loaders here</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>{pagebreak}</p><h2 id="branching-at-use-using-a-function"><a href="#branching-at-use-using-a-function" aria-hidden="true" class="header-anchor">#</a> Branching at <code>use</code> Using a Function</h2><p>In the book setup, you compose configuration on a higher level. Another option to achieve similar results would be to branch at <code>use</code> as webpack's loader definitions accept functions that allow you to branch depending on the environment. Consider the example below:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>

  <span class="token comment">// `resource` refers to the resource path matched.</span>
  <span class="token comment">// `resourceQuery` contains possible query passed to it</span>
  <span class="token comment">// `issuer` tells about match context path</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> resource<span class="token punctuation">,</span> resourceQuery<span class="token punctuation">,</span> issuer <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// You have to return something falsy, object, or a</span>
    <span class="token comment">// string (i.e., &quot;style-loader&quot;) from here.</span>
    <span class="token comment">//</span>
    <span class="token comment">// Returning an array fails! Nest rules instead.</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>env <span class="token operator">===</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// css-loader first</span>
          rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token comment">// style-loader after</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Carefully applied, this technique allows different means of composition.</p><h2 id="inline-definitions"><a href="#inline-definitions" aria-hidden="true" class="header-anchor">#</a> Inline Definitions</h2><p>Even though configuration level loader definitions are preferable, it's possible to write loader definitions inline:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Process foo.png through url-loader and other</span>
<span class="token comment">// possible matches.</span>
<span class="token keyword">import</span> <span class="token string">&quot;url-loader!./foo.png&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// Override possible higher level match completely</span>
<span class="token keyword">import</span> <span class="token string">&quot;!!url-loader!./bar.png&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>The problem with this approach is that it couples your source with webpack. Nonetheless, it's still an excellent form to know. Since configuration entries go through the same mechanism, the same forms work there as well:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">:</span> <span class="token string">&quot;babel-loader!./app&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="alternate-ways-to-match-files"><a href="#alternate-ways-to-match-files" aria-hidden="true" class="header-anchor">#</a> Alternate Ways to Match Files</h2><p><code>test</code> combined with <code>include</code> or <code>exclude</code> to constrain the match is the most common approach to match files. These accept the data types as listed below:</p><ul><li><code>test</code> - Match against a RegExp, string, function, an object, or an array of conditions like these.</li><li><code>include</code> - The same.</li><li><code>exclude</code> - The same, except the output is the inverse of <code>include</code>.</li><li><code>resource: /inline/</code> - Match against a resource path including the query. Examples: <code>/path/foo.inline.js</code>, <code>/path/bar.png?inline</code>.</li><li><code>issuer: /bar.js/</code> - Match against a resource requested from the match. Example: <code>/path/foo.png</code> would match if it was requested from <code>/path/bar.js</code>.</li><li><code>resourcePath: /inline/</code> - Match against a resource path without its query. Example: <code>/path/foo.inline.png</code>.</li><li><code>resourceQuery: /inline/</code> - Match against a resource based on its query. Example: <code>/path/foo.png?inline</code>.</li></ul><p>Boolean based fields can be used to constrain these matchers further:</p><ul><li><code>not</code> - Do <strong>not</strong> match against a condition (see <code>test</code> for accepted values).</li><li><code>and</code> - Match against an array of conditions. All must match.</li><li><code>or</code> - Match against an array while any must match.</li></ul><h2 id="loading-based-on-resourcequery"><a href="#loading-based-on-resourcequery" aria-hidden="true" class="header-anchor">#</a> Loading Based on <code>resourceQuery</code></h2><p><code>oneOf</code> field makes it possible to route webpack to a specific loader based on a resource related match:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.png$/</span><span class="token punctuation">,</span>
  oneOf<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      resourceQuery<span class="token punctuation">:</span> <span class="token regex">/inline/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      resourceQuery<span class="token punctuation">:</span> <span class="token regex">/external/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>If you wanted to embed the context information to the filename, the rule could use <code>resourcePath</code> over <code>resourceQuery</code>.</p><p>{pagebreak}</p><h2 id="loading-based-on-issuer"><a href="#loading-based-on-issuer" aria-hidden="true" class="header-anchor">#</a> Loading Based on <code>issuer</code></h2><p><code>issuer</code> can be used to control behavior based on where a resource was imported. In the example below adapted from <a href="https://github.com/webpack-contrib/css-loader/pull/287#issuecomment-261269199" target="_blank" rel="noopener noreferrer">css-loader issue 287<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <em>style-loader</em> is applied when webpack captures a CSS file from a JavaScript import:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>

  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      issuer<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      use<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Another approach would be to mix <code>issuer</code> and <code>not</code>:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>

  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// CSS imported from other modules is added to the DOM</span>
    <span class="token punctuation">{</span>
      issuer<span class="token punctuation">:</span> <span class="token punctuation">{</span> not<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Apply css-loader against CSS imports to return CSS</span>
    <span class="token punctuation">{</span>
      use<span class="token punctuation">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="understanding-loader-behavior"><a href="#understanding-loader-behavior" aria-hidden="true" class="header-anchor">#</a> Understanding Loader Behavior</h2><p>Loader behavior can be understood in greater detail by inspecting them. <a href="https://www.npmjs.com/package/loader-runner" target="_blank" rel="noopener noreferrer">loader-runner<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> allows you to run them in isolation without webpack. Webpack uses this package internally and <em>Extending with Loaders</em> chapter covers it in detail.</p><p><a href="https://www.npmjs.com/package/inspect-loader" target="_blank" rel="noopener noreferrer">inspect-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> allows you to inspect what's being passed between loaders. Instead of having to insert <code>console.log</code>s within <em>node_modules</em>, you can attach this loader to your configuration and inspect the flow there.</p><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2><p>Webpack provides multiple ways to setup loaders but sticking with <code>use</code> is enough in webpack 4. Be careful with loader ordering, as it's a common source of problems.</p><p>To recap:</p><ul><li><strong>Loaders</strong> allow you determine what should happen when webpack's module resolution mechanism encounters a file.</li><li>A loader definition consists of <strong>conditions</strong> based on which to match and <strong>actions</strong> that should be performed when a match happens.</li><li>Webpack 2 introduced the <code>use</code> field. It combines the ideas of old <code>loader</code> and <code>loaders</code> fields into a single construct.</li><li>Webpack 4 provides multiple ways to match and alter loader behavior. You can, for example, match based on a <strong>resource query</strong> after a loader has been matched and route the loader to specific actions.</li></ul><p>In the next chapter, you'll learn to load images using webpack.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/en/loading/01_loader_definitions.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/en/styling/04_autoprefixing.html" class="prev">
          Autoprefixing
        </a></span><span class="next"><a href="/webpack-book/en/loading/02_images.html">
          Loading Images
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpack-book/assets/js/33.1fe84891.js" defer></script><script src="/webpack-book/assets/js/app.1ef58692.js" defer></script>
  </body>
</html>
