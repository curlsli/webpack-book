<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web Workers | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.80a1483f.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.80a1483f.js" as="script"><link rel="preload" href="/webpack-book/assets/js/52.280cd293.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/39.64a05b36.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.4f8cfa1c.css"><link rel="prefetch" href="/webpack-book/assets/js/1.4f8cfa1c.js"><link rel="prefetch" href="/webpack-book/assets/js/2.d4757b93.js"><link rel="prefetch" href="/webpack-book/assets/js/3.ae05c576.js"><link rel="prefetch" href="/webpack-book/assets/js/4.c5ba4651.js"><link rel="prefetch" href="/webpack-book/assets/js/5.a2472f8c.js"><link rel="prefetch" href="/webpack-book/assets/js/6.542d275f.js"><link rel="prefetch" href="/webpack-book/assets/js/7.a1cb5062.js"><link rel="prefetch" href="/webpack-book/assets/js/8.086e7a4e.js"><link rel="prefetch" href="/webpack-book/assets/js/9.f88e1a35.js"><link rel="prefetch" href="/webpack-book/assets/js/10.c8e04b4b.js"><link rel="prefetch" href="/webpack-book/assets/js/11.eddd4daf.js"><link rel="prefetch" href="/webpack-book/assets/js/12.bd0b0740.js"><link rel="prefetch" href="/webpack-book/assets/js/13.fdab70f9.js"><link rel="prefetch" href="/webpack-book/assets/js/14.362d11ff.js"><link rel="prefetch" href="/webpack-book/assets/js/15.2482b33e.js"><link rel="prefetch" href="/webpack-book/assets/js/16.9b7b5d40.js"><link rel="prefetch" href="/webpack-book/assets/js/17.a17e4a39.js"><link rel="prefetch" href="/webpack-book/assets/js/18.8cc3b223.js"><link rel="prefetch" href="/webpack-book/assets/js/19.40535ed2.js"><link rel="prefetch" href="/webpack-book/assets/js/20.d9ef9548.js"><link rel="prefetch" href="/webpack-book/assets/js/21.dd176a49.js"><link rel="prefetch" href="/webpack-book/assets/js/22.c7feedd1.js"><link rel="prefetch" href="/webpack-book/assets/js/23.81d099fa.js"><link rel="prefetch" href="/webpack-book/assets/js/24.a6019410.js"><link rel="prefetch" href="/webpack-book/assets/js/25.04169afd.js"><link rel="prefetch" href="/webpack-book/assets/js/26.67808a22.js"><link rel="prefetch" href="/webpack-book/assets/js/27.cee93429.js"><link rel="prefetch" href="/webpack-book/assets/js/28.d48927a8.js"><link rel="prefetch" href="/webpack-book/assets/js/29.e1b69cd6.js"><link rel="prefetch" href="/webpack-book/assets/js/30.ce3127e6.js"><link rel="prefetch" href="/webpack-book/assets/js/31.b89ef8bf.js"><link rel="prefetch" href="/webpack-book/assets/js/32.99b09052.js"><link rel="prefetch" href="/webpack-book/assets/js/33.96a6c707.js"><link rel="prefetch" href="/webpack-book/assets/js/34.5b015703.js"><link rel="prefetch" href="/webpack-book/assets/js/35.0cfb24a3.js"><link rel="prefetch" href="/webpack-book/assets/js/36.d20addbf.js"><link rel="prefetch" href="/webpack-book/assets/js/37.681925b1.js"><link rel="prefetch" href="/webpack-book/assets/js/38.711f68a2.js"><link rel="prefetch" href="/webpack-book/assets/js/40.40e573ea.js"><link rel="prefetch" href="/webpack-book/assets/js/41.4cb32931.js"><link rel="prefetch" href="/webpack-book/assets/js/42.3ae863ec.js"><link rel="prefetch" href="/webpack-book/assets/js/43.65b9c678.js"><link rel="prefetch" href="/webpack-book/assets/js/44.03957b0b.js"><link rel="prefetch" href="/webpack-book/assets/js/45.23c4d2a9.js"><link rel="prefetch" href="/webpack-book/assets/js/46.d55d3d42.js"><link rel="prefetch" href="/webpack-book/assets/js/47.fe24bc33.js"><link rel="prefetch" href="/webpack-book/assets/js/48.5c148f58.js"><link rel="prefetch" href="/webpack-book/assets/js/49.ffefe0f3.js"><link rel="prefetch" href="/webpack-book/assets/js/50.3023ccd2.js"><link rel="prefetch" href="/webpack-book/assets/js/51.d50d421b.js"><link rel="prefetch" href="/webpack-book/assets/js/53.9b9572f9.js"><link rel="prefetch" href="/webpack-book/assets/js/54.cf991a46.js"><link rel="prefetch" href="/webpack-book/assets/js/55.fd7e34a2.js"><link rel="prefetch" href="/webpack-book/assets/js/56.b9495db7.js"><link rel="prefetch" href="/webpack-book/assets/js/57.0a9a51d8.js"><link rel="prefetch" href="/webpack-book/assets/js/58.e4e01c76.js"><link rel="prefetch" href="/webpack-book/assets/js/59.2b8743de.js"><link rel="prefetch" href="/webpack-book/assets/js/60.4ca191a4.js"><link rel="prefetch" href="/webpack-book/assets/js/61.96bf4c0d.js"><link rel="prefetch" href="/webpack-book/assets/js/62.bb6eef40.js"><link rel="prefetch" href="/webpack-book/assets/js/63.723bfd8c.js"><link rel="prefetch" href="/webpack-book/assets/js/64.619cf063.js"><link rel="prefetch" href="/webpack-book/assets/js/65.7f7aecc5.js"><link rel="prefetch" href="/webpack-book/assets/js/66.289e7749.js"><link rel="prefetch" href="/webpack-book/assets/js/67.7b1e3ba8.js"><link rel="prefetch" href="/webpack-book/assets/js/68.0e3ee8b3.js"><link rel="prefetch" href="/webpack-book/assets/js/69.9376a79a.js"><link rel="prefetch" href="/webpack-book/assets/js/70.0cb23427.js"><link rel="prefetch" href="/webpack-book/assets/js/71.f5d074e5.js"><link rel="prefetch" href="/webpack-book/assets/js/72.c592143d.js"><link rel="prefetch" href="/webpack-book/assets/js/73.2c64a04e.js"><link rel="prefetch" href="/webpack-book/assets/js/74.f5567034.js"><link rel="prefetch" href="/webpack-book/assets/js/75.e30961e7.js"><link rel="prefetch" href="/webpack-book/assets/js/76.2ff88d0b.js"><link rel="prefetch" href="/webpack-book/assets/js/77.dd7e5edf.js"><link rel="prefetch" href="/webpack-book/assets/js/78.7a350dea.js"><link rel="prefetch" href="/webpack-book/assets/js/79.24694390.js"><link rel="prefetch" href="/webpack-book/assets/js/80.4f80a679.js"><link rel="prefetch" href="/webpack-book/assets/js/81.37c3261c.js"><link rel="prefetch" href="/webpack-book/assets/js/82.8381e276.js"><link rel="prefetch" href="/webpack-book/assets/js/83.b4efc603.js"><link rel="prefetch" href="/webpack-book/assets/js/84.c1acfd5d.js"><link rel="prefetch" href="/webpack-book/assets/js/85.7767ccf3.js"><link rel="prefetch" href="/webpack-book/assets/js/86.615edc6a.js"><link rel="prefetch" href="/webpack-book/assets/js/87.42cd871d.js"><link rel="prefetch" href="/webpack-book/assets/js/88.73085312.js"><link rel="prefetch" href="/webpack-book/assets/js/89.2df7e593.js"><link rel="prefetch" href="/webpack-book/assets/js/90.a3111caf.js"><link rel="prefetch" href="/webpack-book/assets/js/91.d2939609.js"><link rel="prefetch" href="/webpack-book/assets/js/92.d793f5cd.js"><link rel="prefetch" href="/webpack-book/assets/js/93.18e01984.js"><link rel="prefetch" href="/webpack-book/assets/js/94.fc7ea5ab.js"><link rel="prefetch" href="/webpack-book/assets/js/95.482ce212.js"><link rel="prefetch" href="/webpack-book/assets/js/96.7d61e67e.js"><link rel="prefetch" href="/webpack-book/assets/js/97.394606bf.js"><link rel="prefetch" href="/webpack-book/assets/js/98.4c6eb05f.js"><link rel="prefetch" href="/webpack-book/assets/js/99.a0713270.js"><link rel="prefetch" href="/webpack-book/assets/js/100.1061814c.js"><link rel="prefetch" href="/webpack-book/assets/js/101.838e0b0c.js"><link rel="prefetch" href="/webpack-book/assets/js/102.08a8bd85.js"><link rel="prefetch" href="/webpack-book/assets/js/103.24a38648.js"><link rel="prefetch" href="/webpack-book/assets/js/104.0d15b20c.js"><link rel="prefetch" href="/webpack-book/assets/js/105.cef1ff87.js"><link rel="prefetch" href="/webpack-book/assets/js/106.446e7977.js"><link rel="prefetch" href="/webpack-book/assets/js/107.397fd38c.js"><link rel="prefetch" href="/webpack-book/assets/js/108.c7bed854.js"><link rel="prefetch" href="/webpack-book/assets/js/109.cd0b9263.js"><link rel="prefetch" href="/webpack-book/assets/js/110.4f51da6b.js"><link rel="prefetch" href="/webpack-book/assets/js/111.04c8a22d.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.80a1483f.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.4f8cfa1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/en/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/techniques/02_web_workers.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/techniques/02_web_workers.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><a href="/webpack-book/en/" class="sidebar-link">webpack Book</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>guide</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>developing</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>styling</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>loading Assets</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>building</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>optimizing</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>output</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>techniques</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/en/techniques/01_dynamic_loading.html" class="sidebar-link">Dynamic Loading</a></li><li><a href="/webpack-book/en/techniques/02_web_workers.html" class="active sidebar-link">Web Workers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/en/techniques/02_web_workers.html#setting-up-worker-loader" class="sidebar-link">Setting Up Worker Loader</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/techniques/02_web_workers.html#setting-up-a-worker" class="sidebar-link">Setting Up a Worker</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/techniques/02_web_workers.html#setting-up-a-host" class="sidebar-link">Setting Up a Host</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/techniques/02_web_workers.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/webpack-book/en/techniques/03_i18n.html" class="sidebar-link">Internationalization</a></li><li><a href="/webpack-book/en/techniques/04_testing.html" class="sidebar-link">Testing</a></li><li><a href="/webpack-book/en/techniques/05_deploying.html" class="sidebar-link">Deploying Applications</a></li><li><a href="/webpack-book/en/techniques/06_consuming.html" class="sidebar-link">Consuming Packages</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>extending</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="web-workers"><a href="#web-workers" aria-hidden="true" class="header-anchor">#</a> Web Workers</h1><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noopener noreferrer">Web workers<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> allow you to push work outside of main execution thread of JavaScript making them convenient for lengthy computations and background work.</p><p>Moving data between the main thread and the worker comes with communication-related overhead. The split provides isolation that forces workers to focus on logic only as they cannot manipulate the user interface directly.</p><p>The idea of workers is valuable on a more general level. <a href="https://www.npmjs.com/package/parallel-webpack" target="_blank" rel="noopener noreferrer">parallel-webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> uses <a href="https://www.npmjs.com/package/worker-farm" target="_blank" rel="noopener noreferrer">worker-farm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> underneath to parallelize webpack execution.</p><p>As discussed in the <em>Build Targets</em> chapter, webpack allows you to build your application as a worker itself. To get the idea of web workers better, you'll learn how to build a small worker using <a href="https://www.npmjs.com/package/worker-loader" target="_blank" rel="noopener noreferrer">worker-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><p>T&gt; Sharing data between the host and the worker may become easier in the future thanks to technologies such as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer" target="_blank" rel="noopener noreferrer">SharedArrayBuffer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="setting-up-worker-loader"><a href="#setting-up-worker-loader" aria-hidden="true" class="header-anchor">#</a> Setting Up Worker Loader</h2><p>To get started, install <em>worker-loader</em> to the project:</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> worker-loader --save-dev
</code></pre></div><p>Instead of pushing the loader definition to webpack configuration, you can use inline loader definitions to keep the demonstration minimal. See the <em>Loader Definitions</em> chapter for more information about the alternatives.</p><h2 id="setting-up-a-worker"><a href="#setting-up-a-worker" aria-hidden="true" class="header-anchor">#</a> Setting Up a Worker</h2><p>A worker has to do two things: listen to messages and respond. Between those two actions, it can perform a computation. In this case, you accept text data, append it to itself, and send the result:</p><p><strong>src/worker.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code>self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> text <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token punctuation">:</span> text <span class="token operator">+</span> text <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="setting-up-a-host"><a href="#setting-up-a-host" aria-hidden="true" class="header-anchor">#</a> Setting Up a Host</h2><p>The host has to instantiate the worker and then communicate with it. The idea is almost the same except the host has the control:</p><p><strong>src/component.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">&quot;worker-loader!./worker&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span> text<span class="token punctuation">:</span> <span class="token string">&quot;foo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

  worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> data<span class="token punctuation">:</span> <span class="token punctuation">{</span> text <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>text <span class="token operator">=</span> text<span class="token punctuation">;</span>
    element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> text<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> state<span class="token punctuation">.</span>text<span class="token punctuation">;</span>
  element<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> text<span class="token punctuation">:</span> state<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>After you have these two set up, it should work. As you click the text, it should mutate the application state as the worker completes its execution. To demonstrate the asynchronous nature of workers, you could try adding delay to the answer and see what happens.</p><p>T&gt; <a href="https://www.npmjs.com/package/webworkify-webpack" target="_blank" rel="noopener noreferrer">webworkify-webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is an alternative to <em>worker-loader</em>. The API allows you to use the worker as a regular JavaScript module as well given you avoid the <code>self</code> requirement visible in the example solution. <a href="https://www.npmjs.com/package/webpack-worker" target="_blank" rel="noopener noreferrer">webpack-worker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is another option to study.</p><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2><p>The critical thing to note is that the worker cannot access the DOM. You can perform computation and queries in a worker, but it cannot manipulate the user interface directly.</p><p>To recap:</p><ul><li>Web workers allow you to push work out of the main thread of the browser. This separation is valuable especially if performance is an issue.</li><li>Web workers cannot manipulate the DOM. Instead, it's best to use them for lengthy computations and requests.</li><li>The isolation provided by web workers can be used for architectural benefit. It forces the programmers to stay within a specific sandbox.</li><li>Communicating with web workers comes with an overhead that makes them less practical. As the specification evolves, this can change in the future.</li></ul><p>You'll learn about internationalization in the next chapter.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/en/techniques/02_web_workers.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/en/techniques/01_dynamic_loading.html" class="prev">
          Dynamic Loading
        </a></span><span class="next"><a href="/webpack-book/en/techniques/03_i18n.html">
          Internationalization
        </a> →
      </span></p></div><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/webpack-book/assets/js/52.280cd293.js" defer></script><script src="/webpack-book/assets/js/app.80a1483f.js" defer></script>
  </body>
</html>
