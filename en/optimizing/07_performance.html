<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Performance | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.e4b61ea9.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.e4b61ea9.js" as="script"><link rel="preload" href="/webpack-book/assets/js/43.01ce2820.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/38.7f355ea3.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.45cc87d3.css"><link rel="prefetch" href="/webpack-book/assets/js/1.45cc87d3.js"><link rel="prefetch" href="/webpack-book/assets/js/2.c0558643.js"><link rel="prefetch" href="/webpack-book/assets/js/3.82147960.js"><link rel="prefetch" href="/webpack-book/assets/js/4.4e17298f.js"><link rel="prefetch" href="/webpack-book/assets/js/5.fc33582f.js"><link rel="prefetch" href="/webpack-book/assets/js/6.559785d0.js"><link rel="prefetch" href="/webpack-book/assets/js/7.ff44e233.js"><link rel="prefetch" href="/webpack-book/assets/js/8.4150c5f1.js"><link rel="prefetch" href="/webpack-book/assets/js/9.c1062c75.js"><link rel="prefetch" href="/webpack-book/assets/js/10.66b4c2c9.js"><link rel="prefetch" href="/webpack-book/assets/js/11.d0167fa8.js"><link rel="prefetch" href="/webpack-book/assets/js/12.bd1f5673.js"><link rel="prefetch" href="/webpack-book/assets/js/13.e285ee60.js"><link rel="prefetch" href="/webpack-book/assets/js/14.59c4bffd.js"><link rel="prefetch" href="/webpack-book/assets/js/15.c696a176.js"><link rel="prefetch" href="/webpack-book/assets/js/16.ad6ea981.js"><link rel="prefetch" href="/webpack-book/assets/js/17.848bd53b.js"><link rel="prefetch" href="/webpack-book/assets/js/18.6772e612.js"><link rel="prefetch" href="/webpack-book/assets/js/19.115de346.js"><link rel="prefetch" href="/webpack-book/assets/js/20.83e4aea8.js"><link rel="prefetch" href="/webpack-book/assets/js/21.2e3c90de.js"><link rel="prefetch" href="/webpack-book/assets/js/22.94484168.js"><link rel="prefetch" href="/webpack-book/assets/js/23.31a875d3.js"><link rel="prefetch" href="/webpack-book/assets/js/24.0fd19b9e.js"><link rel="prefetch" href="/webpack-book/assets/js/25.8c0325c7.js"><link rel="prefetch" href="/webpack-book/assets/js/26.7dd0a21d.js"><link rel="prefetch" href="/webpack-book/assets/js/27.7a717d84.js"><link rel="prefetch" href="/webpack-book/assets/js/28.93ca3bc4.js"><link rel="prefetch" href="/webpack-book/assets/js/29.56efc258.js"><link rel="prefetch" href="/webpack-book/assets/js/30.2ea44d1b.js"><link rel="prefetch" href="/webpack-book/assets/js/31.b96b3185.js"><link rel="prefetch" href="/webpack-book/assets/js/32.9a2c7707.js"><link rel="prefetch" href="/webpack-book/assets/js/33.a5e07b19.js"><link rel="prefetch" href="/webpack-book/assets/js/34.434ba785.js"><link rel="prefetch" href="/webpack-book/assets/js/35.dd058437.js"><link rel="prefetch" href="/webpack-book/assets/js/36.006dbaf0.js"><link rel="prefetch" href="/webpack-book/assets/js/37.a987b637.js"><link rel="prefetch" href="/webpack-book/assets/js/39.a05eee4d.js"><link rel="prefetch" href="/webpack-book/assets/js/40.db5e39d5.js"><link rel="prefetch" href="/webpack-book/assets/js/41.f0a38917.js"><link rel="prefetch" href="/webpack-book/assets/js/42.b865345d.js"><link rel="prefetch" href="/webpack-book/assets/js/44.7f95afda.js"><link rel="prefetch" href="/webpack-book/assets/js/45.dcfb550d.js"><link rel="prefetch" href="/webpack-book/assets/js/46.2fd831f8.js"><link rel="prefetch" href="/webpack-book/assets/js/47.3cf87574.js"><link rel="prefetch" href="/webpack-book/assets/js/48.1e61e8c2.js"><link rel="prefetch" href="/webpack-book/assets/js/49.20c5df71.js"><link rel="prefetch" href="/webpack-book/assets/js/50.2f9b3797.js"><link rel="prefetch" href="/webpack-book/assets/js/51.f9899011.js"><link rel="prefetch" href="/webpack-book/assets/js/52.2b7c0ffd.js"><link rel="prefetch" href="/webpack-book/assets/js/53.603c7655.js"><link rel="prefetch" href="/webpack-book/assets/js/54.57e75f8b.js"><link rel="prefetch" href="/webpack-book/assets/js/55.352be02a.js"><link rel="prefetch" href="/webpack-book/assets/js/56.d4c10d93.js"><link rel="prefetch" href="/webpack-book/assets/js/57.0c7a7a91.js"><link rel="prefetch" href="/webpack-book/assets/js/58.765a870d.js"><link rel="prefetch" href="/webpack-book/assets/js/59.bc01c29d.js"><link rel="prefetch" href="/webpack-book/assets/js/60.cc3266a7.js"><link rel="prefetch" href="/webpack-book/assets/js/61.d4742353.js"><link rel="prefetch" href="/webpack-book/assets/js/62.1d551a7a.js"><link rel="prefetch" href="/webpack-book/assets/js/63.0eae740f.js"><link rel="prefetch" href="/webpack-book/assets/js/64.a564e6c8.js"><link rel="prefetch" href="/webpack-book/assets/js/65.f84359d1.js"><link rel="prefetch" href="/webpack-book/assets/js/66.3a62781a.js"><link rel="prefetch" href="/webpack-book/assets/js/67.821e7211.js"><link rel="prefetch" href="/webpack-book/assets/js/68.f3764711.js"><link rel="prefetch" href="/webpack-book/assets/js/69.4556cf84.js"><link rel="prefetch" href="/webpack-book/assets/js/70.cb76d9d3.js"><link rel="prefetch" href="/webpack-book/assets/js/71.f5c0508d.js"><link rel="prefetch" href="/webpack-book/assets/js/72.86c41abe.js"><link rel="prefetch" href="/webpack-book/assets/js/73.a8820435.js"><link rel="prefetch" href="/webpack-book/assets/js/74.9008eb01.js"><link rel="prefetch" href="/webpack-book/assets/js/75.ee7a8bbb.js"><link rel="prefetch" href="/webpack-book/assets/js/76.d24d189a.js"><link rel="prefetch" href="/webpack-book/assets/js/77.3d2824f1.js"><link rel="prefetch" href="/webpack-book/assets/js/78.d029813d.js"><link rel="prefetch" href="/webpack-book/assets/js/79.92bf908e.js"><link rel="prefetch" href="/webpack-book/assets/js/80.0605ed79.js"><link rel="prefetch" href="/webpack-book/assets/js/81.1c589dac.js"><link rel="prefetch" href="/webpack-book/assets/js/82.47924dd8.js"><link rel="prefetch" href="/webpack-book/assets/js/83.9d8e676d.js"><link rel="prefetch" href="/webpack-book/assets/js/84.c82d11aa.js"><link rel="prefetch" href="/webpack-book/assets/js/85.726b81c4.js"><link rel="prefetch" href="/webpack-book/assets/js/86.64948b27.js"><link rel="prefetch" href="/webpack-book/assets/js/87.b48cf050.js"><link rel="prefetch" href="/webpack-book/assets/js/88.c6692c41.js"><link rel="prefetch" href="/webpack-book/assets/js/89.3e130a8d.js"><link rel="prefetch" href="/webpack-book/assets/js/90.1d7bcf63.js"><link rel="prefetch" href="/webpack-book/assets/js/91.86cca913.js"><link rel="prefetch" href="/webpack-book/assets/js/92.db0ad595.js"><link rel="prefetch" href="/webpack-book/assets/js/93.751d25a6.js"><link rel="prefetch" href="/webpack-book/assets/js/94.fcc921ca.js"><link rel="prefetch" href="/webpack-book/assets/js/95.19fec0e9.js"><link rel="prefetch" href="/webpack-book/assets/js/96.b3553500.js"><link rel="prefetch" href="/webpack-book/assets/js/97.b758c384.js"><link rel="prefetch" href="/webpack-book/assets/js/98.c5609fb7.js"><link rel="prefetch" href="/webpack-book/assets/js/99.aeae8502.js"><link rel="prefetch" href="/webpack-book/assets/js/100.0b9a4bc7.js"><link rel="prefetch" href="/webpack-book/assets/js/101.065606e1.js"><link rel="prefetch" href="/webpack-book/assets/js/102.34624029.js"><link rel="prefetch" href="/webpack-book/assets/js/103.4719eae8.js"><link rel="prefetch" href="/webpack-book/assets/js/104.3a239f3b.js"><link rel="prefetch" href="/webpack-book/assets/js/105.319c5359.js"><link rel="prefetch" href="/webpack-book/assets/js/106.70eddccc.js"><link rel="prefetch" href="/webpack-book/assets/js/107.d55c9ccd.js"><link rel="prefetch" href="/webpack-book/assets/js/108.2bd7e358.js"><link rel="prefetch" href="/webpack-book/assets/js/109.38234887.js"><link rel="prefetch" href="/webpack-book/assets/js/110.1461cec1.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.e4b61ea9.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.45cc87d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/en/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/optimizing/07_performance.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/optimizing/07_performance.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/webpack-book/en/" class="sidebar-link">webpack Book</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>guide</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>developing</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>styling</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>loading Assets</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>building</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>optimizing</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/en/optimizing/01_minifying.html" class="sidebar-link">Minifying</a></li><li><a href="/webpack-book/en/optimizing/02_tree_shaking.html" class="sidebar-link">Tree Shaking</a></li><li><a href="/webpack-book/en/optimizing/03_environment_variables.html" class="sidebar-link">Environment Variables</a></li><li><a href="/webpack-book/en/optimizing/04_adding_hashes_to_filenames.html" class="sidebar-link">Adding Hashes to Filenames</a></li><li><a href="/webpack-book/en/optimizing/05_separating_manifest.html" class="sidebar-link">Separating a Manifest</a></li><li><a href="/webpack-book/en/optimizing/06_build_analysis.html" class="sidebar-link">Build Analysis</a></li><li><a href="/webpack-book/en/optimizing/07_performance.html" class="active sidebar-link">Performance</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/07_performance.html#measuring-impact" class="sidebar-link">Measuring Impact</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/07_performance.html#high-level-optimizations" class="sidebar-link">High-Level Optimizations</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/07_performance.html#low-level-optimizations" class="sidebar-link">Low-Level Optimizations</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/07_performance.html#optimizing-rebundling-speed-during-development" class="sidebar-link">Optimizing Rebundling Speed During Development</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/07_performance.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>output</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>techniques</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>extending</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="performance"><a href="#performance" aria-hidden="true" class="header-anchor">#</a> Performance</h1><p>Webpack's performance out of the box is often enough for small projects. That said, it begins to hit limits as your project grows in scale. It's a frequent topic in webpack's issue tracker. <a href="https://github.com/webpack/webpack/issues/1905" target="_blank" rel="noopener noreferrer">Issue 1905<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a good example.</p><p>There are a couple of ground rules when it comes to optimization:</p><ol><li>Know what to optimize.</li><li>Perform fast to implement tweaks first.</li><li>Perform more involved tweaks after.</li><li>Measure impact.</li></ol><p>Sometimes optimizations come with a cost. They can make your configuration harder to understand or tie it to a particular solution. Often the best optimization is to do less work or do it more smartly. The basic directions are covered in the next sections, so you know where to look when it's time to work on performance.</p><h2 id="measuring-impact"><a href="#measuring-impact" aria-hidden="true" class="header-anchor">#</a> Measuring Impact</h2><p>As discussed in the previous chapter, generating stats can be used to measure build time. <a href="https://www.npmjs.com/package/speed-measure-webpack-plugin" target="_blank" rel="noopener noreferrer">speed-measure-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> gives more granular information per plugin and loader so you know which take most of the time in your process.</p><h2 id="high-level-optimizations"><a href="#high-level-optimizations" aria-hidden="true" class="header-anchor">#</a> High-Level Optimizations</h2><p>Webpack uses only a single instance by default meaning you aren't able to benefit from a multi-core processor without extra effort. This where third-party solutions, such as <a href="https://www.npmjs.com/package/parallel-webpack" target="_blank" rel="noopener noreferrer">parallel-webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://www.npmjs.com/package/happypack" target="_blank" rel="noopener noreferrer">HappyPack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> come in.</p><h3 id="parallel-webpack-run-multiple-webpack-instances-in-parallel"><a href="#parallel-webpack-run-multiple-webpack-instances-in-parallel" aria-hidden="true" class="header-anchor">#</a> parallel-webpack - Run Multiple Webpack Instances in Parallel</h3><p><em>parallel-webpack</em> allows you to parallelize webpack configuration in two ways. Assuming you have defined your webpack configuration as an array, it can run the configurations in parallel. In addition to this, <em>parallel-webpack</em> can generate builds based on given <strong>variants</strong>.</p><p>Using variants allows you to generate both production and development builds at once. Variants also allow you to generate bundles with different targets to make them easier to consume depending on the environment. Variants can be used to implement feature flags when combined with <code>DefinePlugin</code> as discussed in the <em>Environment Variables</em> chapter.</p><p>The underlying idea can be implemented using a <a href="https://www.npmjs.com/package/worker-farm" target="_blank" rel="noopener noreferrer">worker-farm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. In fact, <em>parallel-webpack</em> relies on <em>worker-farm</em> underneath.</p><p><em>parallel-webpack</em> can be used by installing it to your project as a development dependency and then replacing <code>webpack</code> command with <code>parallel-webpack</code>.</p><h3 id="happypack-file-level-parallelism"><a href="#happypack-file-level-parallelism" aria-hidden="true" class="header-anchor">#</a> HappyPack - File Level Parallelism</h3><p>Compared to <em>parallel-webpack</em>, HappyPack is a more involved option. The idea is that HappyPack intercepts the loader calls you specify and then runs them in parallel. You have to set up the plugin first:</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">const</span> HappyPack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;happypack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token punctuation">{</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// Capture Babel loader</span>
          <span class="token string">&quot;babel-loader&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>To complete the connection, you have to replace the original Babel loader definition with a HappyPack one:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">loadJavaScript</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> include<span class="token punctuation">,</span> exclude <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token operator">...</span>
        <span class="token comment">// loader: &quot;babel-loader&quot;,</span>
        loader<span class="token punctuation">:</span> <span class="token string">&quot;happypack/loader&quot;</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The example above contains enough information for webpack to run the given loader parallel. HappyPack comes with more advanced options, but applying this idea is enough to get started.</p><p>Perhaps the problem with HappyPack is that it couples your configuration with it. It would be possible to overcome this issue by design and make it easier to inject. One option would be to build a higher level abstraction that can perform the replacement on top of vanilla configuration.</p><h2 id="low-level-optimizations"><a href="#low-level-optimizations" aria-hidden="true" class="header-anchor">#</a> Low-Level Optimizations</h2><p>Specific lower-level optimizations can be good to know. The key is to allow webpack to perform less work. You have already implemented a couple of these, but it's a good idea to enumerate them:</p><ul><li>Consider using faster source map variants during development or skip them. Skipping is possible if you don't process the code in any way.</li><li>Use <a href="https://www.npmjs.com/package/babel-preset-env" target="_blank" rel="noopener noreferrer">babel-preset-env<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> during development instead of source maps to transpile fewer features for modern browsers and make the code more readable and more comfortable to debug.</li><li>Skip polyfills during development. Attaching a package, such as <a href="https://www.npmjs.com/package/babel-polyfill" target="_blank" rel="noopener noreferrer">babel-polyfill<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, to the development version of an application adds to the overhead.</li><li>Disable the portions of the application you don't need during development. It can be a valid idea to compile only a small fraction you are working on as then you have less to bundle.</li><li>Polyfill less of Node and provide nothing instead. For example, a package could use Node <code>process</code> which in turn will bloat your bundle. To disable it, set <code>node.process</code> to <code>false</code>. To disable polyfilling entirely, set <code>node</code> to <code>false</code> directly. <a href="https://webpack.js.org/configuration/node/" target="_blank" rel="noopener noreferrer">See webpack documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for the default values.</li><li>Push bundles that change less to <strong>Dynamically Loaded Libraries</strong> (DLL) to avoid unnecessary processing. The <a href="https://github.com/webpack/webpack/tree/master/examples/dll-user" target="_blank" rel="noopener noreferrer">official webpack example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> gets to the point while <a href="https://robertknight.me.uk/posts/webpack-dll-plugins/" target="_blank" rel="noopener noreferrer">Rob Knight's blog post<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> explains the idea further. <a href="https://www.npmjs.com/package/autodll-webpack-plugin" target="_blank" rel="noopener noreferrer">autodll-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> can automate the process.</li></ul><h3 id="plugin-specific-optimizations"><a href="#plugin-specific-optimizations" aria-hidden="true" class="header-anchor">#</a> Plugin Specific Optimizations</h3><p>There are a series of plugin specific optimizations to consider:</p><ul><li>Utilize caching through plugins like <a href="https://www.npmjs.com/package/hard-source-webpack-plugin" target="_blank" rel="noopener noreferrer">hard-source-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to avoid unnecessary work.</li><li>Use equivalent, but lighter alternatives, of plugins and loaders during development. Replacing <code>HtmlWebpackPlugin</code> with a <a href="https://gist.github.com/bebraw/5bd5ebbb2a06936e052886f5eb1e6874" target="_blank" rel="noopener noreferrer">HtmlPlugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that does far less is one direction.</li></ul><h3 id="loader-specific-optimizations"><a href="#loader-specific-optimizations" aria-hidden="true" class="header-anchor">#</a> Loader Specific Optimizations</h3><p>Loaders have their optimizations as well:</p><ul><li>Perform less processing by skipping loaders during development. Especially if you are using a modern browser, you can skip using <em>babel-loader</em> or equivalent altogether.</li><li>Use either <code>include</code> or <code>exclude</code> with JavaScript specific loaders. Webpack traverses <em>node_modules</em> by default and executes <em>babel-loader</em> over the files unless it has been configured correctly.</li><li>Cache the results of expensive loaders (e.g., image manipulation) to the disk using the <a href="https://www.npmjs.com/package/cache-loader" target="_blank" rel="noopener noreferrer">cache-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li><li>Parallelize the execution of expensive loaders using <a href="https://www.npmjs.com/package/thread-loader" target="_blank" rel="noopener noreferrer">thread-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Given workers come with an overhead in Node, using <em>thread-loader</em> is worth it only if the parallelized operation is heavy.</li></ul><h2 id="optimizing-rebundling-speed-during-development"><a href="#optimizing-rebundling-speed-during-development" aria-hidden="true" class="header-anchor">#</a> Optimizing Rebundling Speed During Development</h2><p>It's possible to optimize rebundling times during development by pointing the development setup to a minified version of a library, such as React. In React's case, you lose <code>propType</code>-based validation. If speed is important, this technique is worth it.</p><p><code>module.noParse</code> accepts a RegExp or an array of RegExps. In addition to telling webpack not to parse the minified file you want to use, you also have to point <code>react</code> to it by using <code>resolve.alias</code>. The aliasing idea is discussed in detail in the <em>Consuming Packages</em> chapter.</p><p>It's possible to encapsulate the core idea within a function:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">dontParse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> path <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> alias <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  alias<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> path<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      noParse<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      alias<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>To use the function, you would call it as follows:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">dontParse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span>
  path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
    __dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules/react/cjs/react.production.min.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>After this change, the application should be faster to rebuild depending on the underlying implementation. The technique can also be applied to production.</p><p>Given <code>module.noParse</code> accepts a regular expression if you wanted to ignore all <code>*.min.js</code> files, you could set it to <code>/\.min\.js/</code>.</p><blockquote><p>Not all modules support <code>module.noParse</code>. They should not have a reference to <code>require</code>, <code>define</code>, or similar, as that leads to an <code>Uncaught ReferenceError: require is not defined</code> error.</p></blockquote><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2><p>You can optimize webpack's performance in multiple ways. Often it's a good idea to start with more accessible techniques before moving to more involved ones. The exact methods you have to use, depend on the project.</p><p>To recap:</p><ul><li>Start with higher level techniques that are fast to implement first.</li><li>Lower level techniques are more involved but come with their wins.</li><li>Since webpack runs using a single instance by default, parallelizing is worthwhile.</li><li>Especially during development, skipping work can be acceptable thanks to modern browsers.</li></ul><p>T&gt; <a href="https://webpack.js.org/guides/build-performance/" target="_blank" rel="noopener noreferrer">The official build performance guide<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> has more tips. See also <a href="https://slack.engineering/keep-webpack-fast-a-field-guide-for-better-build-performance-f56a5995e8f1" target="_blank" rel="noopener noreferrer">Keep webpack Fast: A Field Guide for Better Build Performance<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://blog.box.com/blog/how-we-improved-webpack-build-performance-95/" target="_blank" rel="noopener noreferrer">
How we improved webpack build performance by 95%<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://medium.com/walmartlabs/webpack-optimization-a-case-study-92b130334b6c" target="_blank" rel="noopener noreferrer">webpack optimization — A Case Study<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, and <a href="https://developers.google.com/web/fundamentals/performance/webpack/" target="_blank" rel="noopener noreferrer">Web Fundamentals by Google<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/en/optimizing/07_performance.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/en/optimizing/06_build_analysis.html" class="prev">
          Build Analysis
        </a></span><span class="next"><a href="/webpack-book/en/output/01_targets.html">
          Build Targets
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpack-book/assets/js/43.01ce2820.js" defer></script><script src="/webpack-book/assets/js/app.e4b61ea9.js" defer></script>
  </body>
</html>
