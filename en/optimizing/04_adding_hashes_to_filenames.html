<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Adding Hashes to Filenames | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.7c920287.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.7c920287.js" as="script"><link rel="preload" href="/webpack-book/assets/js/40.93ecfec2.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/39.4de3484e.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.45cc87d3.css"><link rel="prefetch" href="/webpack-book/assets/js/1.45cc87d3.js"><link rel="prefetch" href="/webpack-book/assets/js/2.4a0e8edb.js"><link rel="prefetch" href="/webpack-book/assets/js/3.4c05f671.js"><link rel="prefetch" href="/webpack-book/assets/js/4.c2f23639.js"><link rel="prefetch" href="/webpack-book/assets/js/5.571affc0.js"><link rel="prefetch" href="/webpack-book/assets/js/6.3ddb0710.js"><link rel="prefetch" href="/webpack-book/assets/js/7.13be0be2.js"><link rel="prefetch" href="/webpack-book/assets/js/8.ab685c7d.js"><link rel="prefetch" href="/webpack-book/assets/js/9.4ec307e6.js"><link rel="prefetch" href="/webpack-book/assets/js/10.ce93540e.js"><link rel="prefetch" href="/webpack-book/assets/js/11.d07f2433.js"><link rel="prefetch" href="/webpack-book/assets/js/12.78921a69.js"><link rel="prefetch" href="/webpack-book/assets/js/13.3af73d6e.js"><link rel="prefetch" href="/webpack-book/assets/js/14.51d8e1c3.js"><link rel="prefetch" href="/webpack-book/assets/js/15.2478f68d.js"><link rel="prefetch" href="/webpack-book/assets/js/16.a1674f2e.js"><link rel="prefetch" href="/webpack-book/assets/js/17.08cb5d47.js"><link rel="prefetch" href="/webpack-book/assets/js/18.63a9d4ee.js"><link rel="prefetch" href="/webpack-book/assets/js/19.6ec78de6.js"><link rel="prefetch" href="/webpack-book/assets/js/20.448e928e.js"><link rel="prefetch" href="/webpack-book/assets/js/21.8aed75ba.js"><link rel="prefetch" href="/webpack-book/assets/js/22.442c5d65.js"><link rel="prefetch" href="/webpack-book/assets/js/23.ecb39720.js"><link rel="prefetch" href="/webpack-book/assets/js/24.f53b1026.js"><link rel="prefetch" href="/webpack-book/assets/js/25.91fac79b.js"><link rel="prefetch" href="/webpack-book/assets/js/26.f65132e8.js"><link rel="prefetch" href="/webpack-book/assets/js/27.78edbc75.js"><link rel="prefetch" href="/webpack-book/assets/js/28.7030a8db.js"><link rel="prefetch" href="/webpack-book/assets/js/29.c6fc4663.js"><link rel="prefetch" href="/webpack-book/assets/js/30.2cb421b5.js"><link rel="prefetch" href="/webpack-book/assets/js/31.575d8f9a.js"><link rel="prefetch" href="/webpack-book/assets/js/32.589855e2.js"><link rel="prefetch" href="/webpack-book/assets/js/33.bcbf13b9.js"><link rel="prefetch" href="/webpack-book/assets/js/34.0901960e.js"><link rel="prefetch" href="/webpack-book/assets/js/35.77530cbe.js"><link rel="prefetch" href="/webpack-book/assets/js/36.6ca51425.js"><link rel="prefetch" href="/webpack-book/assets/js/37.e4f9173d.js"><link rel="prefetch" href="/webpack-book/assets/js/38.711f68a2.js"><link rel="prefetch" href="/webpack-book/assets/js/41.207dedbe.js"><link rel="prefetch" href="/webpack-book/assets/js/42.13655fff.js"><link rel="prefetch" href="/webpack-book/assets/js/43.0a66033e.js"><link rel="prefetch" href="/webpack-book/assets/js/44.2e0f0bc1.js"><link rel="prefetch" href="/webpack-book/assets/js/45.54abe411.js"><link rel="prefetch" href="/webpack-book/assets/js/46.a1abb589.js"><link rel="prefetch" href="/webpack-book/assets/js/47.67a5f48f.js"><link rel="prefetch" href="/webpack-book/assets/js/48.2ae652cf.js"><link rel="prefetch" href="/webpack-book/assets/js/49.c809ea19.js"><link rel="prefetch" href="/webpack-book/assets/js/50.cb0ab30d.js"><link rel="prefetch" href="/webpack-book/assets/js/51.61c5bb22.js"><link rel="prefetch" href="/webpack-book/assets/js/52.9418d1bd.js"><link rel="prefetch" href="/webpack-book/assets/js/53.8fb3b3af.js"><link rel="prefetch" href="/webpack-book/assets/js/54.c7b017c1.js"><link rel="prefetch" href="/webpack-book/assets/js/55.11cdb808.js"><link rel="prefetch" href="/webpack-book/assets/js/56.d30a62d6.js"><link rel="prefetch" href="/webpack-book/assets/js/57.80db98c6.js"><link rel="prefetch" href="/webpack-book/assets/js/58.170008c8.js"><link rel="prefetch" href="/webpack-book/assets/js/59.b8d33f82.js"><link rel="prefetch" href="/webpack-book/assets/js/60.bad2a4c0.js"><link rel="prefetch" href="/webpack-book/assets/js/61.8502ded7.js"><link rel="prefetch" href="/webpack-book/assets/js/62.2388773f.js"><link rel="prefetch" href="/webpack-book/assets/js/63.fd2ae4b4.js"><link rel="prefetch" href="/webpack-book/assets/js/64.e4a18972.js"><link rel="prefetch" href="/webpack-book/assets/js/65.1c6f2207.js"><link rel="prefetch" href="/webpack-book/assets/js/66.5ba4de03.js"><link rel="prefetch" href="/webpack-book/assets/js/67.6e5a522b.js"><link rel="prefetch" href="/webpack-book/assets/js/68.c3000811.js"><link rel="prefetch" href="/webpack-book/assets/js/69.df6a6b01.js"><link rel="prefetch" href="/webpack-book/assets/js/70.1e6f5177.js"><link rel="prefetch" href="/webpack-book/assets/js/71.9a00df76.js"><link rel="prefetch" href="/webpack-book/assets/js/72.ea1b395f.js"><link rel="prefetch" href="/webpack-book/assets/js/73.c8734858.js"><link rel="prefetch" href="/webpack-book/assets/js/74.24597070.js"><link rel="prefetch" href="/webpack-book/assets/js/75.b38bb75c.js"><link rel="prefetch" href="/webpack-book/assets/js/76.64d5107c.js"><link rel="prefetch" href="/webpack-book/assets/js/77.17ce9bc3.js"><link rel="prefetch" href="/webpack-book/assets/js/78.c1d50222.js"><link rel="prefetch" href="/webpack-book/assets/js/79.42c031ab.js"><link rel="prefetch" href="/webpack-book/assets/js/80.c83603fe.js"><link rel="prefetch" href="/webpack-book/assets/js/81.9dca7a45.js"><link rel="prefetch" href="/webpack-book/assets/js/82.bea2f876.js"><link rel="prefetch" href="/webpack-book/assets/js/83.5277ed35.js"><link rel="prefetch" href="/webpack-book/assets/js/84.9c43366f.js"><link rel="prefetch" href="/webpack-book/assets/js/85.2c3ed690.js"><link rel="prefetch" href="/webpack-book/assets/js/86.6ae8c813.js"><link rel="prefetch" href="/webpack-book/assets/js/87.790cef71.js"><link rel="prefetch" href="/webpack-book/assets/js/88.050a6bb5.js"><link rel="prefetch" href="/webpack-book/assets/js/89.a3623978.js"><link rel="prefetch" href="/webpack-book/assets/js/90.d72c8f89.js"><link rel="prefetch" href="/webpack-book/assets/js/91.b4c756d6.js"><link rel="prefetch" href="/webpack-book/assets/js/92.6bc2617e.js"><link rel="prefetch" href="/webpack-book/assets/js/93.a98fa457.js"><link rel="prefetch" href="/webpack-book/assets/js/94.0019b06c.js"><link rel="prefetch" href="/webpack-book/assets/js/95.b0536de7.js"><link rel="prefetch" href="/webpack-book/assets/js/96.c59f2491.js"><link rel="prefetch" href="/webpack-book/assets/js/97.2d03b96a.js"><link rel="prefetch" href="/webpack-book/assets/js/98.21a8c66a.js"><link rel="prefetch" href="/webpack-book/assets/js/99.4227e9fd.js"><link rel="prefetch" href="/webpack-book/assets/js/100.7675d309.js"><link rel="prefetch" href="/webpack-book/assets/js/101.712b7dfe.js"><link rel="prefetch" href="/webpack-book/assets/js/102.5df744a8.js"><link rel="prefetch" href="/webpack-book/assets/js/103.0ce8a887.js"><link rel="prefetch" href="/webpack-book/assets/js/104.cd37b677.js"><link rel="prefetch" href="/webpack-book/assets/js/105.26a54f8e.js"><link rel="prefetch" href="/webpack-book/assets/js/106.fd8b2560.js"><link rel="prefetch" href="/webpack-book/assets/js/107.67a9bbb3.js"><link rel="prefetch" href="/webpack-book/assets/js/108.a0674454.js"><link rel="prefetch" href="/webpack-book/assets/js/109.5bcd330f.js"><link rel="prefetch" href="/webpack-book/assets/js/110.832d1487.js"><link rel="prefetch" href="/webpack-book/assets/js/111.76840d88.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.7c920287.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.45cc87d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/en/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/optimizing/04_adding_hashes_to_filenames.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/optimizing/04_adding_hashes_to_filenames.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/webpack-book/en/" class="sidebar-link">webpack Book</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>guide</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>developing</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>styling</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>loading Assets</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>building</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>optimizing</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/en/optimizing/01_minifying.html" class="sidebar-link">Minifying</a></li><li><a href="/webpack-book/en/optimizing/02_tree_shaking.html" class="sidebar-link">Tree Shaking</a></li><li><a href="/webpack-book/en/optimizing/03_environment_variables.html" class="sidebar-link">Environment Variables</a></li><li><a href="/webpack-book/en/optimizing/04_adding_hashes_to_filenames.html" class="active sidebar-link">Adding Hashes to Filenames</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/04_adding_hashes_to_filenames.html#placeholders" class="sidebar-link">Placeholders</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/04_adding_hashes_to_filenames.html#setting-up-hashing" class="sidebar-link">Setting Up Hashing</a></li><li class="sidebar-sub-header"><a href="/webpack-book/en/optimizing/04_adding_hashes_to_filenames.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/webpack-book/en/optimizing/05_separating_manifest.html" class="sidebar-link">Separating a Manifest</a></li><li><a href="/webpack-book/en/optimizing/06_build_analysis.html" class="sidebar-link">Build Analysis</a></li><li><a href="/webpack-book/en/optimizing/07_performance.html" class="sidebar-link">Performance</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>output</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>techniques</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>extending</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>appendices</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="adding-hashes-to-filenames"><a href="#adding-hashes-to-filenames" aria-hidden="true" class="header-anchor">#</a> Adding Hashes to Filenames</h1><p>Even though the generated build works the file names it uses is problematic. It doesn't allow to leverage client level cache efficiently as there's no way tell whether or not a file has changed. Cache invalidation can be achieved by including a hash to the filenames.</p><h2 id="placeholders"><a href="#placeholders" aria-hidden="true" class="header-anchor">#</a> Placeholders</h2><p>Webpack provides <strong>placeholders</strong> for this purpose. These strings are used to attach specific information to webpack output. The most valuable ones are:</p><ul><li><code>[id]</code> - Returns the chunk id.</li><li><code>[path]</code> - Returns the file path.</li><li><code>[name]</code> - Returns the file name.</li><li><code>[ext]</code> - Returns the extension. <code>[ext]</code> works for most available fields. <code>MiniCssExtractPlugin</code> is a notable exception to this rule.</li><li><code>[hash]</code> - Returns the build hash. If any portion of the build changes, this changes as well.</li><li><code>[chunkhash]</code> - Returns an entry chunk-specific hash. Each <code>entry</code> defined in the configuration receives a hash of its own. If any portion of the entry changes, the hash will change as well. <code>[chunkhash]</code> is more granular than <code>[hash]</code> by definition.</li><li><code>[contenthash]</code> - Returns a hash generated based on content.</li></ul><p>It's preferable to use particularly <code>hash</code> and <code>chunkhash</code> only for production purposes as hashing doesn't do much good during development.</p><p>T&gt; It's possible to slice <code>hash</code> and <code>chunkhash</code> using specific syntax: <code>[chunkhash:4]</code>. Instead of a hash like <code>8c4cbfdb91ff93f3f3c5</code> this would yield <code>8c4c</code>.</p><p>T&gt; There are more options available, and you can even modify the hashing and digest type as discussed at <a href="https://www.npmjs.com/package/loader-utils#interpolatename" target="_blank" rel="noopener noreferrer">loader-utils<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> documentation.</p><h3 id="example-placeholders"><a href="#example-placeholders" aria-hidden="true" class="header-anchor">#</a> Example Placeholders</h3><p>Assume you have the following configuration:</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>build<span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].[chunkhash].js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>Webpack would generate filenames like these based on it:</p><div class="language-bash extra-class"><pre class="language-bash"><code>main.d587bbd6e38337f5accd.js
vendor.dc746a5db4ed650296e1.js
</code></pre></div><p>If the file contents related to a chunk are different, the hash changes as well, thus the cache gets invalidated. More accurately, the browser sends a new request for the new file. If only <code>main</code> bundle gets updated, only that file needs to be requested again.</p><p>The same result can be achieved by generating static filenames and invalidating the cache through a querystring (i.e., <code>main.js?d587bbd6e38337f5accd</code>). The part behind the question mark invalidates the cache. According to <a href="http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/" target="_blank" rel="noopener noreferrer">Steve Souders<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, attaching the hash to the filename is the most performant option.</p><p>{pagebreak}</p><h2 id="setting-up-hashing"><a href="#setting-up-hashing" aria-hidden="true" class="header-anchor">#</a> Setting Up Hashing</h2><p>The build needs tweaking to generate proper hashes. Images and fonts should receive <code>hash</code> while chunks should use <code>chunkhash</code> in their names to invalidate them correctly:</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
leanpub<span class="token operator">-</span>start<span class="token operator">-</span>insert
  <span class="token punctuation">{</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      chunkFilename<span class="token punctuation">:</span> <span class="token string">&quot;[name].[chunkhash:4].js&quot;</span><span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].[chunkhash:4].js&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
leanpub<span class="token operator">-</span>end<span class="token operator">-</span>insert
  <span class="token operator">...</span>
  parts<span class="token punctuation">.</span><span class="token function">loadImages</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      limit<span class="token punctuation">:</span> <span class="token number">15000</span><span class="token punctuation">,</span>
leanpub<span class="token operator">-</span>start<span class="token operator">-</span><span class="token keyword">delete</span>
      name<span class="token punctuation">:</span> <span class="token string">&quot;[name].[ext]&quot;</span><span class="token punctuation">,</span>
leanpub<span class="token operator">-</span>end<span class="token operator">-</span><span class="token keyword">delete</span>
leanpub<span class="token operator">-</span>start<span class="token operator">-</span>insert
      name<span class="token punctuation">:</span> <span class="token string">&quot;[name].[hash:4].[ext]&quot;</span><span class="token punctuation">,</span>
leanpub<span class="token operator">-</span>end<span class="token operator">-</span>insert
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>W&gt; <code>[hash]</code> is defined differently for <em>file-loader</em> than for the rest of webpack. It's calculated based on file <strong>content</strong>. See <a href="https://www.npmjs.com/package/file-loader#placeholders" target="_blank" rel="noopener noreferrer">file-loader documentation<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for further information.</p><p>If you used <code>chunkhash</code> for the extracted CSS as well, this would lead to problems as the code points to the CSS through JavaScript bringing it to the same entry. That means if the application code or CSS changed, it would invalidate both.</p><p>{pagebreak}</p><p>Therefore, instead of <code>chunkhash</code>, you can use <code>contenthash</code> that is generated based on the extracted content:</p><p><strong>webpack.parts.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">extractCSS</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> include<span class="token punctuation">,</span> exclude<span class="token punctuation">,</span> use <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Output extracted CSS to a file</span>
  <span class="token keyword">const</span> plugin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
leanpub<span class="token operator">-</span>start<span class="token operator">-</span><span class="token keyword">delete</span>
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].css&quot;</span><span class="token punctuation">,</span>
leanpub<span class="token operator">-</span>end<span class="token operator">-</span><span class="token keyword">delete</span>
leanpub<span class="token operator">-</span>start<span class="token operator">-</span>insert
    filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].[contenthash:4].css&quot;</span><span class="token punctuation">,</span>
leanpub<span class="token operator">-</span>end<span class="token operator">-</span>insert
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>W&gt; The hashes have been sliced to make the output fit better in the book. In practice, you can skip slicing them.</p><p>If you generate a build now (<code>npm run build</code>), you should see something:</p><div class="language-bash extra-class"><pre class="language-bash"><code>Hash: fb67c5fd35454da1d6ff
Version: webpack 4.1.1
Time: 3034ms
Built at: 3/16/2018 6:18:07 PM
                   Asset       Size  Chunks             Chunk Names
               0.0847.js  161 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
    vendors~main.d2f1.js   96.8 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~main
            main.745c.js   2.25 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
           main.5524.css    1.2 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   vendors~main.3dd5.css   1.32 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~main
           0.0847.js.map  203 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
vendors~main.d2f1.js.map    235 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~main
        main.745c.js.map   11.4 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
              index.html  349 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> vendors~main.d2f1.js <span class="token punctuation">..</span>.
<span class="token punctuation">..</span>.
</code></pre></div><p>The files have neat hashes now. To prove that it works for styling, you could try altering <em>src/main.css</em> and see what happens to the hashes when you rebuild.</p><p>There's one problem, though. If you change the application code, it invalidates the vendor file as well! Solving this requires extracting a <strong>manifest</strong>, but before that, you can improve the way the production build handles module IDs.</p><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2><p>Including hashes related to the file contents to their names allows to invalidate them on the client side. If a hash has changed, the client is forced to download the asset again.</p><p>To recap:</p><ul><li>Webpack's <strong>placeholders</strong> allow you to shape filenames and enable you to include hashes to them.</li><li>The most valuable placeholders are <code>[name]</code>, <code>[chunkhash]</code>, and <code>[ext]</code>. A chunk hash is derived based on the entry in which the asset belongs.</li><li>If you are using <code>MiniCssExtractPlugin</code>, you should use <code>[contenthash]</code>. This way the generated assets get invalidated only if their content changes.</li></ul><p>Even though the project generates hashes now, the output isn't flawless. The problem is that if the application changes, it invalidates the vendor bundle as well. The next chapter digs deeper into the topic and shows you how to extract a <strong>manifest</strong> to resolve the issue.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/en/optimizing/04_adding_hashes_to_filenames.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/en/optimizing/03_environment_variables.html" class="prev">
          Environment Variables
        </a></span><span class="next"><a href="/webpack-book/en/optimizing/05_separating_manifest.html">
          Separating a Manifest
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpack-book/assets/js/40.93ecfec2.js" defer></script><script src="/webpack-book/assets/js/app.7c920287.js" defer></script>
  </body>
</html>
