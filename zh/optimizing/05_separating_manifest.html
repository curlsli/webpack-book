<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Separating a Manifest | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.730a74d8.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.730a74d8.js" as="script"><link rel="preload" href="/webpack-book/assets/js/96.7d61e67e.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/39.64a05b36.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.4f8cfa1c.css"><link rel="prefetch" href="/webpack-book/assets/js/1.4f8cfa1c.js"><link rel="prefetch" href="/webpack-book/assets/js/2.d4757b93.js"><link rel="prefetch" href="/webpack-book/assets/js/3.ae05c576.js"><link rel="prefetch" href="/webpack-book/assets/js/4.c5ba4651.js"><link rel="prefetch" href="/webpack-book/assets/js/5.a2472f8c.js"><link rel="prefetch" href="/webpack-book/assets/js/6.542d275f.js"><link rel="prefetch" href="/webpack-book/assets/js/7.a1cb5062.js"><link rel="prefetch" href="/webpack-book/assets/js/8.086e7a4e.js"><link rel="prefetch" href="/webpack-book/assets/js/9.f88e1a35.js"><link rel="prefetch" href="/webpack-book/assets/js/10.c8e04b4b.js"><link rel="prefetch" href="/webpack-book/assets/js/11.eddd4daf.js"><link rel="prefetch" href="/webpack-book/assets/js/12.bd0b0740.js"><link rel="prefetch" href="/webpack-book/assets/js/13.fdab70f9.js"><link rel="prefetch" href="/webpack-book/assets/js/14.362d11ff.js"><link rel="prefetch" href="/webpack-book/assets/js/15.2482b33e.js"><link rel="prefetch" href="/webpack-book/assets/js/16.9b7b5d40.js"><link rel="prefetch" href="/webpack-book/assets/js/17.a17e4a39.js"><link rel="prefetch" href="/webpack-book/assets/js/18.8cc3b223.js"><link rel="prefetch" href="/webpack-book/assets/js/19.40535ed2.js"><link rel="prefetch" href="/webpack-book/assets/js/20.d9ef9548.js"><link rel="prefetch" href="/webpack-book/assets/js/21.dd176a49.js"><link rel="prefetch" href="/webpack-book/assets/js/22.c7feedd1.js"><link rel="prefetch" href="/webpack-book/assets/js/23.81d099fa.js"><link rel="prefetch" href="/webpack-book/assets/js/24.a6019410.js"><link rel="prefetch" href="/webpack-book/assets/js/25.04169afd.js"><link rel="prefetch" href="/webpack-book/assets/js/26.67808a22.js"><link rel="prefetch" href="/webpack-book/assets/js/27.cee93429.js"><link rel="prefetch" href="/webpack-book/assets/js/28.d48927a8.js"><link rel="prefetch" href="/webpack-book/assets/js/29.e1b69cd6.js"><link rel="prefetch" href="/webpack-book/assets/js/30.ce3127e6.js"><link rel="prefetch" href="/webpack-book/assets/js/31.b89ef8bf.js"><link rel="prefetch" href="/webpack-book/assets/js/32.99b09052.js"><link rel="prefetch" href="/webpack-book/assets/js/33.96a6c707.js"><link rel="prefetch" href="/webpack-book/assets/js/34.5b015703.js"><link rel="prefetch" href="/webpack-book/assets/js/35.0cfb24a3.js"><link rel="prefetch" href="/webpack-book/assets/js/36.d20addbf.js"><link rel="prefetch" href="/webpack-book/assets/js/37.681925b1.js"><link rel="prefetch" href="/webpack-book/assets/js/38.711f68a2.js"><link rel="prefetch" href="/webpack-book/assets/js/40.40e573ea.js"><link rel="prefetch" href="/webpack-book/assets/js/41.4cb32931.js"><link rel="prefetch" href="/webpack-book/assets/js/42.3ae863ec.js"><link rel="prefetch" href="/webpack-book/assets/js/43.65b9c678.js"><link rel="prefetch" href="/webpack-book/assets/js/44.03957b0b.js"><link rel="prefetch" href="/webpack-book/assets/js/45.23c4d2a9.js"><link rel="prefetch" href="/webpack-book/assets/js/46.d55d3d42.js"><link rel="prefetch" href="/webpack-book/assets/js/47.fe24bc33.js"><link rel="prefetch" href="/webpack-book/assets/js/48.5c148f58.js"><link rel="prefetch" href="/webpack-book/assets/js/49.ffefe0f3.js"><link rel="prefetch" href="/webpack-book/assets/js/50.3023ccd2.js"><link rel="prefetch" href="/webpack-book/assets/js/51.d50d421b.js"><link rel="prefetch" href="/webpack-book/assets/js/52.280cd293.js"><link rel="prefetch" href="/webpack-book/assets/js/53.9b9572f9.js"><link rel="prefetch" href="/webpack-book/assets/js/54.cf991a46.js"><link rel="prefetch" href="/webpack-book/assets/js/55.fd7e34a2.js"><link rel="prefetch" href="/webpack-book/assets/js/56.b9495db7.js"><link rel="prefetch" href="/webpack-book/assets/js/57.0a9a51d8.js"><link rel="prefetch" href="/webpack-book/assets/js/58.e4e01c76.js"><link rel="prefetch" href="/webpack-book/assets/js/59.2b8743de.js"><link rel="prefetch" href="/webpack-book/assets/js/60.4ca191a4.js"><link rel="prefetch" href="/webpack-book/assets/js/61.96bf4c0d.js"><link rel="prefetch" href="/webpack-book/assets/js/62.bb6eef40.js"><link rel="prefetch" href="/webpack-book/assets/js/63.723bfd8c.js"><link rel="prefetch" href="/webpack-book/assets/js/64.619cf063.js"><link rel="prefetch" href="/webpack-book/assets/js/65.7f7aecc5.js"><link rel="prefetch" href="/webpack-book/assets/js/66.289e7749.js"><link rel="prefetch" href="/webpack-book/assets/js/67.7b1e3ba8.js"><link rel="prefetch" href="/webpack-book/assets/js/68.0e3ee8b3.js"><link rel="prefetch" href="/webpack-book/assets/js/69.9376a79a.js"><link rel="prefetch" href="/webpack-book/assets/js/70.0cb23427.js"><link rel="prefetch" href="/webpack-book/assets/js/71.f5d074e5.js"><link rel="prefetch" href="/webpack-book/assets/js/72.c592143d.js"><link rel="prefetch" href="/webpack-book/assets/js/73.2c64a04e.js"><link rel="prefetch" href="/webpack-book/assets/js/74.f5567034.js"><link rel="prefetch" href="/webpack-book/assets/js/75.e30961e7.js"><link rel="prefetch" href="/webpack-book/assets/js/76.2ff88d0b.js"><link rel="prefetch" href="/webpack-book/assets/js/77.dd7e5edf.js"><link rel="prefetch" href="/webpack-book/assets/js/78.7a350dea.js"><link rel="prefetch" href="/webpack-book/assets/js/79.24694390.js"><link rel="prefetch" href="/webpack-book/assets/js/80.4f80a679.js"><link rel="prefetch" href="/webpack-book/assets/js/81.37c3261c.js"><link rel="prefetch" href="/webpack-book/assets/js/82.8381e276.js"><link rel="prefetch" href="/webpack-book/assets/js/83.b4efc603.js"><link rel="prefetch" href="/webpack-book/assets/js/84.c1acfd5d.js"><link rel="prefetch" href="/webpack-book/assets/js/85.7767ccf3.js"><link rel="prefetch" href="/webpack-book/assets/js/86.615edc6a.js"><link rel="prefetch" href="/webpack-book/assets/js/87.42cd871d.js"><link rel="prefetch" href="/webpack-book/assets/js/88.73085312.js"><link rel="prefetch" href="/webpack-book/assets/js/89.2df7e593.js"><link rel="prefetch" href="/webpack-book/assets/js/90.a3111caf.js"><link rel="prefetch" href="/webpack-book/assets/js/91.d2939609.js"><link rel="prefetch" href="/webpack-book/assets/js/92.d793f5cd.js"><link rel="prefetch" href="/webpack-book/assets/js/93.18e01984.js"><link rel="prefetch" href="/webpack-book/assets/js/94.fc7ea5ab.js"><link rel="prefetch" href="/webpack-book/assets/js/95.482ce212.js"><link rel="prefetch" href="/webpack-book/assets/js/97.394606bf.js"><link rel="prefetch" href="/webpack-book/assets/js/98.4c6eb05f.js"><link rel="prefetch" href="/webpack-book/assets/js/99.a0713270.js"><link rel="prefetch" href="/webpack-book/assets/js/100.1061814c.js"><link rel="prefetch" href="/webpack-book/assets/js/101.838e0b0c.js"><link rel="prefetch" href="/webpack-book/assets/js/102.08a8bd85.js"><link rel="prefetch" href="/webpack-book/assets/js/103.24a38648.js"><link rel="prefetch" href="/webpack-book/assets/js/104.0d15b20c.js"><link rel="prefetch" href="/webpack-book/assets/js/105.cef1ff87.js"><link rel="prefetch" href="/webpack-book/assets/js/106.446e7977.js"><link rel="prefetch" href="/webpack-book/assets/js/107.397fd38c.js"><link rel="prefetch" href="/webpack-book/assets/js/108.c7bed854.js"><link rel="prefetch" href="/webpack-book/assets/js/109.cd0b9263.js"><link rel="prefetch" href="/webpack-book/assets/js/110.85c592cc.js"><link rel="prefetch" href="/webpack-book/assets/js/111.04c8a22d.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.730a74d8.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.4f8cfa1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/optimizing/05_separating_manifest.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/optimizing/05_separating_manifest.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><a href="/webpack-book/" class="sidebar-link">简介</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>指南</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>开发</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>样式</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>加载静态资源</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>构建</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>优化</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/zh/optimizing/01_minifying.html" class="sidebar-link">Minifying</a></li><li><a href="/webpack-book/zh/optimizing/02_tree_shaking.html" class="sidebar-link">Tree Shaking</a></li><li><a href="/webpack-book/zh/optimizing/03_environment_variables.html" class="sidebar-link">Environment Variables</a></li><li><a href="/webpack-book/zh/optimizing/04_adding_hashes_to_filenames.html" class="sidebar-link">在文件名中添加hash</a></li><li><a href="/webpack-book/zh/optimizing/05_separating_manifest.html" class="active sidebar-link">Separating a Manifest</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/zh/optimizing/05_separating_manifest.html#extracting-a-manifest" class="sidebar-link">Extracting a Manifest</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/optimizing/05_separating_manifest.html#using-records" class="sidebar-link">Using Records</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/optimizing/05_separating_manifest.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/webpack-book/zh/optimizing/06_build_analysis.html" class="sidebar-link">Build Analysis</a></li><li><a href="/webpack-book/zh/optimizing/07_performance.html" class="sidebar-link">Performance</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>输出</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>技术</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>扩展</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="separating-a-manifest"><a href="#separating-a-manifest" aria-hidden="true" class="header-anchor">#</a> Separating a Manifest</h1><p>When webpack writes bundles, it maintains a <strong>manifest</strong> as well. You can find it in the generated <em>vendor</em> bundle in this project. The manifest describes what files webpack should load. It's possible to extract it and start loading the files of the project faster instead of having to wait for the <em>vendor</em> bundle to be loaded.</p><p>If the hashes webpack generates change, then the manifest changes as well. As a result, the contents of the vendor bundle change, and become invalidated. The problem can be eliminated by extracting the manifest to a file of its own or by writing it inline to the <em>index.html</em> of the project.</p><h2 id="extracting-a-manifest"><a href="#extracting-a-manifest" aria-hidden="true" class="header-anchor">#</a> Extracting a Manifest</h2><p>Most of the work was done already when <code>extractBundles</code> was set up in the <em>Bundle Splitting</em> chapter. To extract the manifest, define <code>optimization.runtimeChunk</code> as follows:</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token operator">...</span>
  <span class="token punctuation">{</span>
    optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      runtimeChunk<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&quot;manifest&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The name <code>manifest</code> is used by convention. You can use any other name, and it will still work.</p><p>If you build the project now (<code>npm run build</code>), you should see something:</p><div class="language-bash extra-class"><pre class="language-bash"><code>Hash: 2e1c61341de0fd7e0e5c
Version: webpack 4.1.1
Time: 3347ms
Built at: 3/16/2018 6:24:51 PM
                   Asset       Size  Chunks             Chunk Names
       manifest.d41d.css    0 bytes       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  manifest
               0.73a8.js  160 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
    vendors~main.3af5.js   96.8 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~main
            main.8da2.js  546 bytes       3  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
           main.5524.css    1.2 KiB       3  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
   vendors~main.3dd5.css   1.32 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~main
        manifest.8cac.js   1.81 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  manifest
           0.73a8.js.map  203 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
    manifest.8cac.js.map     10 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  manifest
vendors~main.3af5.js.map    235 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~main
        main.8da2.js.map   1.45 KiB       3  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
              index.html  460 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre></div><p>This change gave a separate file that contains the manifest. In the output above it has been marked with <code>manifest</code> chunk name. Because the setup is using <code>HtmlWebpackPlugin</code>, there is no need to worry about loading the manifest ourselves as the plugin adds a reference to <em>index.html</em>.</p><p>Plugins, such as <a href="https://www.npmjs.com/package/inline-manifest-webpack-plugin" target="_blank" rel="noopener noreferrer">inline-manifest-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://www.npmjs.com/package/html-webpack-inline-chunk-plugin" target="_blank" rel="noopener noreferrer">html-webpack-inline-chunk-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.npmjs.com/package/assets-webpack-plugin" target="_blank" rel="noopener noreferrer">assets-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, work with <code>HtmlWebpackPlugin</code> and allow you to write the manifest within <em>index.html</em> to avoid a request.</p><p>Try adjusting <em>src/index.js</em> and see how the hashes change. This time around it should <strong>not</strong> invalidate the vendor bundle, and only the manifest and app bundle names should become different.</p><p>T&gt; To get a better idea of the manifest contents, run the build in development mode or pass <code>none</code> to mode through configuration. You should see something familiar there.</p><p>T&gt; To integrate with asset pipelines, you can consider using plugins like <a href="https://www.npmjs.com/package/chunk-manifest-webpack-plugin" target="_blank" rel="noopener noreferrer">chunk-manifest-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.npmjs.com/package/webpack-manifest-plugin" target="_blank" rel="noopener noreferrer">webpack-manifest-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://www.npmjs.com/package/webpack-assets-manifest" target="_blank" rel="noopener noreferrer">webpack-assets-manifest<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, or <a href="https://www.npmjs.com/package/webpack-rails-manifest-plugin" target="_blank" rel="noopener noreferrer">webpack-rails-manifest-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. These solutions emit JSON that maps the original asset path to the new one.</p><p>T&gt; The build can be improved further by loading popular dependencies, such as React, through a CDN. That would decrease the size of the vendor bundle even further while adding an external dependency on the project. The idea is that if the user has hit the CDN earlier, caching can kick in like here.</p><h2 id="using-records"><a href="#using-records" aria-hidden="true" class="header-anchor">#</a> Using Records</h2><p>As mentioned in the <em>Bundle Splitting</em> chapter, plugins such as <code>AggressiveSplittingPlugin</code> use <strong>records</strong> to implement caching. The approaches discussed above are still valid, but records go one step further.</p><p>Records are used for storing module IDs across separate builds. The problem is that you need to save this file. If you build locally, one option is to include it in your version control.</p><p>To generate a <em>records.json</em> file, adjust the configuration as follows:</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    recordsPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;records.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If you build the project (<code>npm run build</code>), you should see a new file, <em>records.json</em>, at the project root. The next time webpack builds, it picks up the information and rewrites the file if it has changed.</p><p>Records are particularly valuable if you have a complicated setup with code splitting and want to make sure the split parts gain correct caching behavior. The biggest problem is maintaining the record file.</p><p>T&gt; <code>recordsInputPath</code> and <code>recordsOutputPath</code> give more granular control over input and output, but often setting only <code>recordsPath</code> is enough.</p><p>W&gt; If you change the way webpack handles module IDs (i.e., remove <code>HashedModuleIdsPlugin</code>), possible existing records are still taken into account! If you want to use the new module ID scheme, you have to delete your records file as well.</p><p>{pagebreak}</p><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2><p>The project has basic caching behavior now. If you try to modify <em>index.js</em> or <em>component.js</em>, the vendor bundle should remain the same.</p><p>To recap:</p><ul><li>Webpack maintains a <strong>manifest</strong> containing information needed to run the application.</li><li>If the manifest changes, the change invalidates the containing bundle.</li><li>Certain plugins allow you to write the manifest to the generated <em>index.html</em>. It's also possible to extract the information to a JSON file. The JSON comes in handy with <em>Server Side Rendering</em>.</li><li><strong>Records</strong> allow you to store module IDs across builds. As a downside, you have to track the records file.</li></ul><p>You'll learn to analyze the build in the next chapter as it's essential for understanding and improving your build.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/zh/optimizing/05_separating_manifest.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/zh/optimizing/04_adding_hashes_to_filenames.html" class="prev">
          在文件名中添加hash
        </a></span><span class="next"><a href="/webpack-book/zh/optimizing/06_build_analysis.html">
          Build Analysis
        </a> →
      </span></p></div><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/webpack-book/assets/js/96.7d61e67e.js" defer></script><script src="/webpack-book/assets/js/app.730a74d8.js" defer></script>
  </body>
</html>
