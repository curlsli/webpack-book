<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack-dev-server（WDS） | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.730a74d8.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.730a74d8.js" as="script"><link rel="preload" href="/webpack-book/assets/js/70.0cb23427.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/39.64a05b36.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.4f8cfa1c.css"><link rel="prefetch" href="/webpack-book/assets/js/1.4f8cfa1c.js"><link rel="prefetch" href="/webpack-book/assets/js/2.d4757b93.js"><link rel="prefetch" href="/webpack-book/assets/js/3.ae05c576.js"><link rel="prefetch" href="/webpack-book/assets/js/4.c5ba4651.js"><link rel="prefetch" href="/webpack-book/assets/js/5.a2472f8c.js"><link rel="prefetch" href="/webpack-book/assets/js/6.542d275f.js"><link rel="prefetch" href="/webpack-book/assets/js/7.a1cb5062.js"><link rel="prefetch" href="/webpack-book/assets/js/8.086e7a4e.js"><link rel="prefetch" href="/webpack-book/assets/js/9.f88e1a35.js"><link rel="prefetch" href="/webpack-book/assets/js/10.c8e04b4b.js"><link rel="prefetch" href="/webpack-book/assets/js/11.eddd4daf.js"><link rel="prefetch" href="/webpack-book/assets/js/12.bd0b0740.js"><link rel="prefetch" href="/webpack-book/assets/js/13.fdab70f9.js"><link rel="prefetch" href="/webpack-book/assets/js/14.362d11ff.js"><link rel="prefetch" href="/webpack-book/assets/js/15.2482b33e.js"><link rel="prefetch" href="/webpack-book/assets/js/16.9b7b5d40.js"><link rel="prefetch" href="/webpack-book/assets/js/17.a17e4a39.js"><link rel="prefetch" href="/webpack-book/assets/js/18.8cc3b223.js"><link rel="prefetch" href="/webpack-book/assets/js/19.40535ed2.js"><link rel="prefetch" href="/webpack-book/assets/js/20.d9ef9548.js"><link rel="prefetch" href="/webpack-book/assets/js/21.dd176a49.js"><link rel="prefetch" href="/webpack-book/assets/js/22.c7feedd1.js"><link rel="prefetch" href="/webpack-book/assets/js/23.81d099fa.js"><link rel="prefetch" href="/webpack-book/assets/js/24.a6019410.js"><link rel="prefetch" href="/webpack-book/assets/js/25.04169afd.js"><link rel="prefetch" href="/webpack-book/assets/js/26.67808a22.js"><link rel="prefetch" href="/webpack-book/assets/js/27.cee93429.js"><link rel="prefetch" href="/webpack-book/assets/js/28.d48927a8.js"><link rel="prefetch" href="/webpack-book/assets/js/29.e1b69cd6.js"><link rel="prefetch" href="/webpack-book/assets/js/30.ce3127e6.js"><link rel="prefetch" href="/webpack-book/assets/js/31.b89ef8bf.js"><link rel="prefetch" href="/webpack-book/assets/js/32.99b09052.js"><link rel="prefetch" href="/webpack-book/assets/js/33.96a6c707.js"><link rel="prefetch" href="/webpack-book/assets/js/34.5b015703.js"><link rel="prefetch" href="/webpack-book/assets/js/35.0cfb24a3.js"><link rel="prefetch" href="/webpack-book/assets/js/36.d20addbf.js"><link rel="prefetch" href="/webpack-book/assets/js/37.681925b1.js"><link rel="prefetch" href="/webpack-book/assets/js/38.711f68a2.js"><link rel="prefetch" href="/webpack-book/assets/js/40.40e573ea.js"><link rel="prefetch" href="/webpack-book/assets/js/41.4cb32931.js"><link rel="prefetch" href="/webpack-book/assets/js/42.3ae863ec.js"><link rel="prefetch" href="/webpack-book/assets/js/43.65b9c678.js"><link rel="prefetch" href="/webpack-book/assets/js/44.03957b0b.js"><link rel="prefetch" href="/webpack-book/assets/js/45.23c4d2a9.js"><link rel="prefetch" href="/webpack-book/assets/js/46.d55d3d42.js"><link rel="prefetch" href="/webpack-book/assets/js/47.fe24bc33.js"><link rel="prefetch" href="/webpack-book/assets/js/48.5c148f58.js"><link rel="prefetch" href="/webpack-book/assets/js/49.ffefe0f3.js"><link rel="prefetch" href="/webpack-book/assets/js/50.3023ccd2.js"><link rel="prefetch" href="/webpack-book/assets/js/51.d50d421b.js"><link rel="prefetch" href="/webpack-book/assets/js/52.280cd293.js"><link rel="prefetch" href="/webpack-book/assets/js/53.9b9572f9.js"><link rel="prefetch" href="/webpack-book/assets/js/54.cf991a46.js"><link rel="prefetch" href="/webpack-book/assets/js/55.fd7e34a2.js"><link rel="prefetch" href="/webpack-book/assets/js/56.b9495db7.js"><link rel="prefetch" href="/webpack-book/assets/js/57.0a9a51d8.js"><link rel="prefetch" href="/webpack-book/assets/js/58.e4e01c76.js"><link rel="prefetch" href="/webpack-book/assets/js/59.2b8743de.js"><link rel="prefetch" href="/webpack-book/assets/js/60.4ca191a4.js"><link rel="prefetch" href="/webpack-book/assets/js/61.96bf4c0d.js"><link rel="prefetch" href="/webpack-book/assets/js/62.bb6eef40.js"><link rel="prefetch" href="/webpack-book/assets/js/63.723bfd8c.js"><link rel="prefetch" href="/webpack-book/assets/js/64.619cf063.js"><link rel="prefetch" href="/webpack-book/assets/js/65.7f7aecc5.js"><link rel="prefetch" href="/webpack-book/assets/js/66.289e7749.js"><link rel="prefetch" href="/webpack-book/assets/js/67.7b1e3ba8.js"><link rel="prefetch" href="/webpack-book/assets/js/68.0e3ee8b3.js"><link rel="prefetch" href="/webpack-book/assets/js/69.9376a79a.js"><link rel="prefetch" href="/webpack-book/assets/js/71.f5d074e5.js"><link rel="prefetch" href="/webpack-book/assets/js/72.c592143d.js"><link rel="prefetch" href="/webpack-book/assets/js/73.2c64a04e.js"><link rel="prefetch" href="/webpack-book/assets/js/74.f5567034.js"><link rel="prefetch" href="/webpack-book/assets/js/75.e30961e7.js"><link rel="prefetch" href="/webpack-book/assets/js/76.2ff88d0b.js"><link rel="prefetch" href="/webpack-book/assets/js/77.dd7e5edf.js"><link rel="prefetch" href="/webpack-book/assets/js/78.7a350dea.js"><link rel="prefetch" href="/webpack-book/assets/js/79.24694390.js"><link rel="prefetch" href="/webpack-book/assets/js/80.4f80a679.js"><link rel="prefetch" href="/webpack-book/assets/js/81.37c3261c.js"><link rel="prefetch" href="/webpack-book/assets/js/82.8381e276.js"><link rel="prefetch" href="/webpack-book/assets/js/83.b4efc603.js"><link rel="prefetch" href="/webpack-book/assets/js/84.c1acfd5d.js"><link rel="prefetch" href="/webpack-book/assets/js/85.7767ccf3.js"><link rel="prefetch" href="/webpack-book/assets/js/86.615edc6a.js"><link rel="prefetch" href="/webpack-book/assets/js/87.42cd871d.js"><link rel="prefetch" href="/webpack-book/assets/js/88.73085312.js"><link rel="prefetch" href="/webpack-book/assets/js/89.2df7e593.js"><link rel="prefetch" href="/webpack-book/assets/js/90.a3111caf.js"><link rel="prefetch" href="/webpack-book/assets/js/91.d2939609.js"><link rel="prefetch" href="/webpack-book/assets/js/92.d793f5cd.js"><link rel="prefetch" href="/webpack-book/assets/js/93.18e01984.js"><link rel="prefetch" href="/webpack-book/assets/js/94.fc7ea5ab.js"><link rel="prefetch" href="/webpack-book/assets/js/95.482ce212.js"><link rel="prefetch" href="/webpack-book/assets/js/96.7d61e67e.js"><link rel="prefetch" href="/webpack-book/assets/js/97.394606bf.js"><link rel="prefetch" href="/webpack-book/assets/js/98.4c6eb05f.js"><link rel="prefetch" href="/webpack-book/assets/js/99.a0713270.js"><link rel="prefetch" href="/webpack-book/assets/js/100.1061814c.js"><link rel="prefetch" href="/webpack-book/assets/js/101.838e0b0c.js"><link rel="prefetch" href="/webpack-book/assets/js/102.08a8bd85.js"><link rel="prefetch" href="/webpack-book/assets/js/103.24a38648.js"><link rel="prefetch" href="/webpack-book/assets/js/104.0d15b20c.js"><link rel="prefetch" href="/webpack-book/assets/js/105.cef1ff87.js"><link rel="prefetch" href="/webpack-book/assets/js/106.446e7977.js"><link rel="prefetch" href="/webpack-book/assets/js/107.397fd38c.js"><link rel="prefetch" href="/webpack-book/assets/js/108.c7bed854.js"><link rel="prefetch" href="/webpack-book/assets/js/109.cd0b9263.js"><link rel="prefetch" href="/webpack-book/assets/js/110.85c592cc.js"><link rel="prefetch" href="/webpack-book/assets/js/111.04c8a22d.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.730a74d8.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.4f8cfa1c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/developing/02_webpack_dev_server.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/developing/02_webpack_dev_server.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><a href="/webpack-book/" class="sidebar-link">简介</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>指南</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>开发</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/zh/developing/01_getting_started.html" class="sidebar-link">进入正题</a></li><li><a href="/webpack-book/zh/developing/02_webpack_dev_server.html" class="active sidebar-link">webpack-dev-server（WDS）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#webpack-的-watch-模式-和-webpack-dev-server" class="sidebar-link">Webpack 的 watch 模式 和 webpack-dev-server</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#wds-分发文件" class="sidebar-link">WDS 分发文件</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#添加wds依赖" class="sidebar-link">添加WDS依赖</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#在项目中引入-wds" class="sidebar-link">在项目中引入 WDS</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#在webpack中配置-wds" class="sidebar-link">在webpack中配置 WDS</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#开启浏览器端的错误浮层功能" class="sidebar-link">开启浏览器端的错误浮层功能</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#开启模块热替换功能" class="sidebar-link">开启模块热替换功能</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#可以通过网络访问开发服务器" class="sidebar-link">可以通过网络访问开发服务器</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#在开发模式的配置中用它更高效" class="sidebar-link">在开发模式的配置中用它更高效</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#用轮询机制替代监视机制" class="sidebar-link">用轮询机制替代监视机制</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#wds的替代方案" class="sidebar-link">WDS的替代方案</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#wds的其他特性" class="sidebar-link">WDS的其他特性</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#development-plugins" class="sidebar-link">Development Plugins</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#output-plugins" class="sidebar-link">Output Plugins</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/developing/02_webpack_dev_server.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/webpack-book/zh/developing/03_composing_configuration.html" class="sidebar-link">组合配置</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>样式</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>加载静态资源</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>构建</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>优化</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>输出</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>技术</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>扩展</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="webpack-dev-server（wds）"><a href="#webpack-dev-server（wds）" aria-hidden="true" class="header-anchor">#</a> webpack-dev-server（WDS）</h1><p>你可以使用 <a href="http://livereload.com/" target="_blank" rel="noopener noreferrer">LiveReload<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>、 <a href="http://www.browsersync.io/" target="_blank" rel="noopener noreferrer">Browsersync<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来实现应用改变，浏览器自动刷新。你也可以使用 <a href="https://www.npmjs.com/package/browser-sync-webpack-plugin" target="_blank" rel="noopener noreferrer">browser-sync-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件实现浏览器的同步刷新，但webpack还有一些隐藏的功能。</p><h2 id="webpack-的-watch-模式-和-webpack-dev-server"><a href="#webpack-的-watch-模式-和-webpack-dev-server" aria-hidden="true" class="header-anchor">#</a> Webpack 的 <code>watch</code> 模式 和 <em>webpack-dev-server</em></h2><p>实现更好的开发环境的第一步就是使用webpack的监视模式。通过向webpack传递 <code>--watch</code> 来激活它。 如：<code>npm run build -- --watch</code> 。</p><p>这个功能一旦开启，监视模式将检测文件是否发生改变，如果改变，将自动重新编译。<em>webpack-dev-server</em> (WDS) 同样实现了监视模式，但它更进一步。</p><p>WDS 是运行在内存的服务器，也就是说打包的内容不被写在输出文件中，而是存在内存中。在你调试代码和样式的时候，你要明白这个区别。</p><p>WDS默认配置是自动刷新浏览器，因此在你开发的时候，不用自己设置。此外，它也支持webpack的高级功能——模块热替换（HMR）。</p><p>HMR 允许修改浏览器的状态是部分刷新，而不是全部。就像 React(vue.js，angular.js) y一样。附录中 <a href="https://lvzhenbang.github.io/webpack-book/dist/zh/appendices/02_hmr.html" target="_blank" rel="noopener noreferrer"><em>模块热替换</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这一部分将详细介绍。</p><p>WDS提供了一个接口，使即时修改代码成为可能，但要想高效的工作，你必须在客户端代码实现这个接口。css是无状态的，所以很简单，但是js框架和库实现起来有点困难。</p><h2 id="wds-分发文件"><a href="#wds-分发文件" aria-hidden="true" class="header-anchor">#</a> WDS 分发文件</h2><p>虽然因为性能原因WDS在内存中进行操作，但有时分发文件到文件系统中比较好。如果你正在集成另一个服务器，这个服务器需要访问同样文件，那么后者将变得很有必要。这个插件<a href="https://www.npmjs.com/package/write-file-webpack-plugin" target="_blank" rel="noopener noreferrer">write-file-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
可以帮你实现这个功能。</p><blockquote><p>你应该严格的用WDS在开发模式。如果你想要托管你的应用程序，你可以使用其他的解决方案，如：Apache、Nginx。</p></blockquote><h2 id="添加wds依赖"><a href="#添加wds依赖" aria-hidden="true" class="header-anchor">#</a> 添加WDS依赖</h2><p>使用前，需要在项目中添加 WDS 依赖：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> webpack-dev-server --save-dev
</code></pre></div><p>之后，将在 <code>npm bin</code> 目录下生成一个命令文件，你可以从这儿运行 <em>webpack-dev-server</em>，启动WDS之后, 你将有一个开发模式下的服务器，运行在<code>http://localhost:8080</code>。这样自动刷新浏览器的功能就实现了。</p><h2 id="在项目中引入-wds"><a href="#在项目中引入-wds" aria-hidden="true" class="header-anchor">#</a> 在项目中引入 WDS</h2><p>将WDS集成到项目中，定义一个npm脚本命令来启动它，代码修改如下：</p><p><strong>package.json</strong></p><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server --mode development&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode production&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>WDS 不仅可以使用webpack的配置，也可以使用它的命令。</p></blockquote><p>如果现在你运行 <em>npm run start</em> 或 <em>npm start</em> 命令，在终端中你会看到下面的内容：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token operator">&gt;</span> webpack-dev-server --mode development

ℹ ｢wds｣: Project is running at http://localhost:8080/
ℹ ｢wds｣: webpack output is served from /
ℹ ｢wdm｣: Hash: eb06816060088d633767
Version: webpack 4.1.1
Time: 608ms
Built at: 3/16/2018 3:44:04 PM
     Asset       Size  Chunks                    Chunk Names
   main.js    338 KiB    main  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
index.html  181 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token punctuation">[</span>big<span class="token punctuation">]</span> <span class="token operator">=</span> main.js
<span class="token punctuation">..</span>.
</code></pre></div><p>这是服务器已经启动，如果你在浏览器中访问 <code>http://localhost:8080/</code> ，你会看到与下面一样的效果：</p><p><img src="data:image/png;base64,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" alt="Hello world"></p><p>如果你修改了源代码，你将在终端看到新的输出内容，同时浏览器也将自动刷新，完成后，显示新的内容。</p><blockquote><p>如果默认端口被占用，WDS 将尝试打开新的端口。你可以用 <code>netstat -na | grep 8080</code> 命令，查看端口情况。</p></blockquote><blockquote><p>除了 <code>production</code> 和 <code>development</code>，webpack还有一个 <code>none</code> 模式（禁用所有内容）。</p></blockquote><h2 id="在webpack中配置-wds"><a href="#在webpack中配置-wds" aria-hidden="true" class="header-anchor">#</a> 在webpack中配置 WDS</h2><p>可以同webpack的 <code>devServer</code> 选项来自定以 WDS 的功能。当然你也可以在 CLI 中定义，但是在webpack中定义可能更方便管理。</p><p>可以启动下面这些功能：</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 为了减少输出量，可以只显示错误</span>
    stats<span class="token punctuation">:</span> <span class="token string">&quot;errors-only&quot;</span><span class="token punctuation">,</span>

    <span class="token comment">// 开发环境的 host 和 port，允许自定义</span>
    <span class="token comment">//</span>
    <span class="token comment">// 如果你使用 Docker, Vagrant 或 Cloud9 虚拟机，</span>
    <span class="token comment">// 你可以设置 host: &quot;0.0.0.0&quot;;</span>
    <span class="token comment">//</span>
    <span class="token comment">// 不像默认的 `localhost`，0.0.0.0 适用于所有的网络设备。</span>
    host<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">HOST</span><span class="token punctuation">,</span> <span class="token comment">// 默认是：`localhost`</span>
    port<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token comment">// 默认是：8080</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 浏览器自启动</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>之后，你就可以用 host 和 port 选项，配置服务器 (如： <code>PORT=3000 npm start</code>)。</p><blockquote><p><a href="https://www.npmjs.com/package/dotenv" target="_blank" rel="noopener noreferrer">dotenv<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 允许你用 <em>.env</em> 文件来定义环境变量，实现快速的配置。</p></blockquote><blockquote><p>如果你的路由使用了HTML5 History API，则开启<code>devServer.historyApiFallback</code>。</p></blockquote><h2 id="开启浏览器端的错误浮层功能"><a href="#开启浏览器端的错误浮层功能" aria-hidden="true" class="header-anchor">#</a> 开启浏览器端的错误浮层功能</h2><p>WDS 提供了一个浏览器端的错误浮层的功能：</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    overlay<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>用 <code>npm start</code> 命令启动服务器，然后破坏源代码，你将在浏览器中看到一个包含错误和警告弹出层：</p><p><img src="/webpack-book/assets/img/error-overlay.45bea51d.png" alt="Error overlay"></p><blockquote><p>如果你想要更好的错误提示，可以考虑 <a href="https://www.npmjs.com/package/error-overlay-webpack-plugin" target="_blank" rel="noopener noreferrer">error-overlay-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，因为它展示错误的效果更好。</p></blockquote><blockquote><p>WDS 错误提示浮层 <em>not</em> 不提示应用的运行时错误。</p></blockquote><h2 id="开启模块热替换功能"><a href="#开启模块热替换功能" aria-hidden="true" class="header-anchor">#</a> 开启模块热替换功能</h2><p>模块热替换功能使webpack变得与众不同。实现它需要从服务器和客户端同时着手。 附录 <a href="https://lvzhenbang.github.io/webpack-book/dist/zh/appendices/02_hmr.html" target="_blank" rel="noopener noreferrer"><em>模块热替换</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 将详细介绍。</p><h2 id="可以通过网络访问开发服务器"><a href="#可以通过网络访问开发服务器" aria-hidden="true" class="header-anchor">#</a> 可以通过网络访问开发服务器</h2><p>你可以通过环境来自定义port和host, (如：在Unix上 <code>export PORT=3000</code>，在windows上 <code>SET PORT=3000</code>)。</p><p>访问你的服务器，你需要知道你的机器的ip。在Unix上，你可以用 <code>ifconfig | grep inet</code> 获得。在Windows上，你可以用 <code>ipconfig</code> 获得。<a href="https://www.npmjs.com/package/node-ip" target="_blank" rel="noopener noreferrer">node-ip<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>使用起来更方便。特别是在windows上，你需要设置 <code>HOST</code> 完成。</p><p>这样可以模拟一个本地服务器的网络运行环境。</p><h2 id="在开发模式的配置中用它更高效"><a href="#在开发模式的配置中用它更高效" aria-hidden="true" class="header-anchor">#</a> 在开发模式的配置中用它更高效</h2><p>当你改变构建文件时，WDS将重启服务器。如果你改变webpack配置时呢？你需要手动的重启开发服务器，这是一个无聊的工作。<a href="https://github.com/webpack/webpack-dev-server/issues/440#issuecomment-205757892" target="_blank" rel="noopener noreferrer">GitHub上讨论的结果<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，你可以使用<a href="https://www.npmjs.com/package/nodemon" target="_blank" rel="noopener noreferrer">nodemon<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 监视器工具。</p><p>为了让它工作，你不得不用 <code>npm install nodemon --save-dev</code> 安装它。之后，当源代码改变时，你可以用它监视webpack的配置和重启WDS，NPM脚本修改如下：</p><p><strong>package.json</strong></p><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon --watch webpack.config.js --exec \&quot;webpack-dev-server --mode development\&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode production&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>WDS在未来 <a href="https://github.com/webpack/webpack-cli/issues/15" target="_blank" rel="noopener noreferrer">将支持这个功能<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。如果配置文件发生改变，你想要实现它自己调用自己，你可以尝试实现这个解决方案。</p><h2 id="用轮询机制替代监视机制"><a href="#用轮询机制替代监视机制" aria-hidden="true" class="header-anchor">#</a> 用轮询机制替代监视机制</h2><p>当你的系统时老版本的Windows、Ubuntu、Vagrant 或 Docker时，开启轮询（polling）是一个好的选择：</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Delay the rebuild after the first change</span>
      aggregateTimeout<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>

      <span class="token comment">// Poll using interval (in ms, accepts boolean too)</span>
      poll<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// Ignore node_modules so CPU usage with poll</span>
    <span class="token comment">// watching drops significantly.</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>WatchIgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>设置它比用默认的设置更消耗内存资源，但值得尝试。</p><h2 id="wds的替代方案"><a href="#wds的替代方案" aria-hidden="true" class="header-anchor">#</a> WDS的替代方案</h2><p>你可以通过终端传递WDS选项。在webpack配置中管理选项更清楚，因为这有助于保持 <em>package。json</em> 漂亮和整洁。也更容易理解发生了什么，因为你不需要从webpack源代码中找出答案。</p><p>你可以创建Express服务器并使用中间件。有下面几个选择:</p><ul><li><a href="https://webpack.js.org/guides/development/#using-webpack-dev-middleware" target="_blank" rel="noopener noreferrer">The official WDS middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://www.npmjs.com/package/webpack-hot-middleware" target="_blank" rel="noopener noreferrer">webpack-hot-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://www.npmjs.com/package/webpack-isomorphic-dev-middleware" target="_blank" rel="noopener noreferrer">webpack-isomorphic-dev-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><p>有一个 <a href="https://webpack.js.org/configuration/dev-server/" target="_blank" rel="noopener noreferrer">Node API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>可以给你更多且更灵活的选择。</p><blockquote><p>CLI 和 Node API之间<a href="https://github.com/webpack/webpack-dev-server/issues/616" target="_blank" rel="noopener noreferrer">有些许不同<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote><h2 id="wds的其他特性"><a href="#wds的其他特性" aria-hidden="true" class="header-anchor">#</a> WDS的其他特性</h2><p>WDS 提供的功能不止上面描述的。你需要留意这些下面这些：</p><ul><li><code>devServer.contentBase</code> - 如果你不动态的生成 <em>index.html</em> 且比较喜欢在特定的目录操作它，这是你可以用 <code>contentBase</code> 向 WDS 做说明，<code>contentBase</code> 接受 一个路径（如：<code>&quot;build&quot;</code>）或者一个路径数组（如：<code>[&quot;build&quot;, &quot;images&quot;]</code>）。它的默认值是项目根目录。</li><li><code>devServer.proxy</code> - 如果你使用多个服务器，你需要将WDS代理给它们。<code>proxy</code> 选项接受一个代理映射对象(<code>{ &quot;/api&quot;: &quot;http://localhost:3000/api&quot; }</code>) 。默认不能代理。</li><li><code>devServer.headers</code> - 定义你的请求headers。</li></ul><blockquote><p><a href="https://webpack.js.org/configuration/dev-server/" target="_blank" rel="noopener noreferrer">官方文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 包含所有的选项。</p></blockquote><h2 id="development-plugins"><a href="#development-plugins" aria-hidden="true" class="header-anchor">#</a> Development Plugins</h2><p>Webapck的生态系统多样化，所以有很多插件辅助开发：</p><ul><li><a href="https://www.npmjs.com/package/case-sensitive-paths-webpack-plugin" target="_blank" rel="noopener noreferrer">case-sensitive-paths-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 当你在macOS或Windows等不区分大小写的环境上进行开发，但使用Linux等区分大小写的环境进行生产时，这将非常方便。</li><li><a href="https://www.npmjs.com/package/npm-install-webpack-plugin" target="_blank" rel="noopener noreferrer">npm-install-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 允许webpack在你导入新包到你的项目时，用 <em>package.json</em> 来安装和连接已经安装的包。</li><li><a href="https://www.npmjs.com/package/react-dev-utils" target="_blank" rel="noopener noreferrer">react-dev-utils<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 包含所有 为<a href="https://www.npmjs.com/package/create-react-app" target="_blank" rel="noopener noreferrer">创建React应用<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的工具集，不管它的名字是什么，都可以在React中找到用途。如果你只想要webpack信息被格式化，你可以考虑用<a href="https://www.npmjs.com/package/webpack-format-messages" target="_blank" rel="noopener noreferrer">webpack-format-messages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</li><li><a href="https://www.npmjs.com/package/start-server-webpack-plugin" target="_blank" rel="noopener noreferrer">start-server-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 能够在你完成构建后重启服务器。</li></ul><h2 id="output-plugins"><a href="#output-plugins" aria-hidden="true" class="header-anchor">#</a> Output Plugins</h2><p>还有一些插件可以使webpack输出更容易被注意到和理解:</p><ul><li><a href="https://www.npmjs.com/package/system-bell-webpack-plugin" target="_blank" rel="noopener noreferrer">system-bell-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在失败时提醒系统，而不是webpack失败时保持静默。</li><li><a href="https://www.npmjs.com/package/webpack-notifier" target="_blank" rel="noopener noreferrer">webpack-notifier<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 使用系统通知让你知道webpack状态。</li><li><a href="https://www.npmjs.com/package/nyan-progress-webpack-plugin" target="_blank" rel="noopener noreferrer">nyan-progress-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可用于在构建过程中获得更整洁的输出。如果你使用的是像Travis这样的持续集成(CI)系统，请小心，因为它们会破坏输出。Webpack提供了 <code>ProgressPlugin</code> 用于同样的目的。</li><li><a href="https://www.npmjs.com/package/friendly-errors-webpack-plugin" target="_blank" rel="noopener noreferrer">friendly-errors-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 改进了webpack的错误提示，它可以捕获常见错误并用更友好的方式显示它们。</li><li><a href="https://www.npmjs.com/package/webpack-dashboard" target="_blank" rel="noopener noreferrer">webpack-dashboard<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 在标准webpack输出上提供一个基于终端的仪表板。如果你更喜欢清晰的视觉输出，这个会很有用。</li></ul><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2><p>WDS完善了webpack，并通过提供面向开发的功能使其对开发人员更友好</p><p>内容回顾：</p><ul><li>Webpack的 <code>watch</code> 模式，为提升开体验迈出了重要的一步。但你改变了源代码时，webpack能实现重新编译。</li><li>但源代码改变后，WDS 能刷新浏览器，它也实现了 <strong>模块的热替换</strong>。</li><li>WDS在某些旧系统上使用会出现问题，基于这个原因，轮询是一个不错的替代方案。</li><li>WDS可以以中间件的形式集成在一个Node服务器中。与依赖命令行接口相比，这样做可以提供更多的控制。</li><li>WDS不仅可以做自动刷新和HMR。如：通过代理连接其它服务器。</li></ul><p>在下一章，你将学习如何组合配置，以便本书后面部分的进一步使用。</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/zh/developing/02_webpack_dev_server.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/zh/developing/01_getting_started.html" class="prev">
          进入正题
        </a></span><span class="next"><a href="/webpack-book/zh/developing/03_composing_configuration.html">
          组合配置
        </a> →
      </span></p></div><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/webpack-book/assets/js/70.0cb23427.js" defer></script><script src="/webpack-book/assets/js/app.730a74d8.js" defer></script>
  </body>
</html>
