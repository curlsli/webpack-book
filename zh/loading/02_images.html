<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>加载 Images | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.e4b61ea9.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.e4b61ea9.js" as="script"><link rel="preload" href="/webpack-book/assets/js/88.c6692c41.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/38.7f355ea3.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.45cc87d3.css"><link rel="prefetch" href="/webpack-book/assets/js/1.45cc87d3.js"><link rel="prefetch" href="/webpack-book/assets/js/2.c0558643.js"><link rel="prefetch" href="/webpack-book/assets/js/3.82147960.js"><link rel="prefetch" href="/webpack-book/assets/js/4.4e17298f.js"><link rel="prefetch" href="/webpack-book/assets/js/5.fc33582f.js"><link rel="prefetch" href="/webpack-book/assets/js/6.559785d0.js"><link rel="prefetch" href="/webpack-book/assets/js/7.ff44e233.js"><link rel="prefetch" href="/webpack-book/assets/js/8.4150c5f1.js"><link rel="prefetch" href="/webpack-book/assets/js/9.c1062c75.js"><link rel="prefetch" href="/webpack-book/assets/js/10.66b4c2c9.js"><link rel="prefetch" href="/webpack-book/assets/js/11.d0167fa8.js"><link rel="prefetch" href="/webpack-book/assets/js/12.bd1f5673.js"><link rel="prefetch" href="/webpack-book/assets/js/13.e285ee60.js"><link rel="prefetch" href="/webpack-book/assets/js/14.59c4bffd.js"><link rel="prefetch" href="/webpack-book/assets/js/15.c696a176.js"><link rel="prefetch" href="/webpack-book/assets/js/16.ad6ea981.js"><link rel="prefetch" href="/webpack-book/assets/js/17.848bd53b.js"><link rel="prefetch" href="/webpack-book/assets/js/18.6772e612.js"><link rel="prefetch" href="/webpack-book/assets/js/19.115de346.js"><link rel="prefetch" href="/webpack-book/assets/js/20.83e4aea8.js"><link rel="prefetch" href="/webpack-book/assets/js/21.2e3c90de.js"><link rel="prefetch" href="/webpack-book/assets/js/22.94484168.js"><link rel="prefetch" href="/webpack-book/assets/js/23.31a875d3.js"><link rel="prefetch" href="/webpack-book/assets/js/24.0fd19b9e.js"><link rel="prefetch" href="/webpack-book/assets/js/25.8c0325c7.js"><link rel="prefetch" href="/webpack-book/assets/js/26.7dd0a21d.js"><link rel="prefetch" href="/webpack-book/assets/js/27.7a717d84.js"><link rel="prefetch" href="/webpack-book/assets/js/28.93ca3bc4.js"><link rel="prefetch" href="/webpack-book/assets/js/29.56efc258.js"><link rel="prefetch" href="/webpack-book/assets/js/30.2ea44d1b.js"><link rel="prefetch" href="/webpack-book/assets/js/31.b96b3185.js"><link rel="prefetch" href="/webpack-book/assets/js/32.9a2c7707.js"><link rel="prefetch" href="/webpack-book/assets/js/33.a5e07b19.js"><link rel="prefetch" href="/webpack-book/assets/js/34.434ba785.js"><link rel="prefetch" href="/webpack-book/assets/js/35.dd058437.js"><link rel="prefetch" href="/webpack-book/assets/js/36.006dbaf0.js"><link rel="prefetch" href="/webpack-book/assets/js/37.a987b637.js"><link rel="prefetch" href="/webpack-book/assets/js/39.a05eee4d.js"><link rel="prefetch" href="/webpack-book/assets/js/40.db5e39d5.js"><link rel="prefetch" href="/webpack-book/assets/js/41.f0a38917.js"><link rel="prefetch" href="/webpack-book/assets/js/42.b865345d.js"><link rel="prefetch" href="/webpack-book/assets/js/43.01ce2820.js"><link rel="prefetch" href="/webpack-book/assets/js/44.7f95afda.js"><link rel="prefetch" href="/webpack-book/assets/js/45.dcfb550d.js"><link rel="prefetch" href="/webpack-book/assets/js/46.2fd831f8.js"><link rel="prefetch" href="/webpack-book/assets/js/47.3cf87574.js"><link rel="prefetch" href="/webpack-book/assets/js/48.1e61e8c2.js"><link rel="prefetch" href="/webpack-book/assets/js/49.20c5df71.js"><link rel="prefetch" href="/webpack-book/assets/js/50.2f9b3797.js"><link rel="prefetch" href="/webpack-book/assets/js/51.f9899011.js"><link rel="prefetch" href="/webpack-book/assets/js/52.2b7c0ffd.js"><link rel="prefetch" href="/webpack-book/assets/js/53.603c7655.js"><link rel="prefetch" href="/webpack-book/assets/js/54.57e75f8b.js"><link rel="prefetch" href="/webpack-book/assets/js/55.352be02a.js"><link rel="prefetch" href="/webpack-book/assets/js/56.d4c10d93.js"><link rel="prefetch" href="/webpack-book/assets/js/57.0c7a7a91.js"><link rel="prefetch" href="/webpack-book/assets/js/58.765a870d.js"><link rel="prefetch" href="/webpack-book/assets/js/59.bc01c29d.js"><link rel="prefetch" href="/webpack-book/assets/js/60.cc3266a7.js"><link rel="prefetch" href="/webpack-book/assets/js/61.d4742353.js"><link rel="prefetch" href="/webpack-book/assets/js/62.1d551a7a.js"><link rel="prefetch" href="/webpack-book/assets/js/63.0eae740f.js"><link rel="prefetch" href="/webpack-book/assets/js/64.a564e6c8.js"><link rel="prefetch" href="/webpack-book/assets/js/65.f84359d1.js"><link rel="prefetch" href="/webpack-book/assets/js/66.3a62781a.js"><link rel="prefetch" href="/webpack-book/assets/js/67.821e7211.js"><link rel="prefetch" href="/webpack-book/assets/js/68.f3764711.js"><link rel="prefetch" href="/webpack-book/assets/js/69.4556cf84.js"><link rel="prefetch" href="/webpack-book/assets/js/70.cb76d9d3.js"><link rel="prefetch" href="/webpack-book/assets/js/71.f5c0508d.js"><link rel="prefetch" href="/webpack-book/assets/js/72.86c41abe.js"><link rel="prefetch" href="/webpack-book/assets/js/73.a8820435.js"><link rel="prefetch" href="/webpack-book/assets/js/74.9008eb01.js"><link rel="prefetch" href="/webpack-book/assets/js/75.ee7a8bbb.js"><link rel="prefetch" href="/webpack-book/assets/js/76.d24d189a.js"><link rel="prefetch" href="/webpack-book/assets/js/77.3d2824f1.js"><link rel="prefetch" href="/webpack-book/assets/js/78.d029813d.js"><link rel="prefetch" href="/webpack-book/assets/js/79.92bf908e.js"><link rel="prefetch" href="/webpack-book/assets/js/80.0605ed79.js"><link rel="prefetch" href="/webpack-book/assets/js/81.1c589dac.js"><link rel="prefetch" href="/webpack-book/assets/js/82.47924dd8.js"><link rel="prefetch" href="/webpack-book/assets/js/83.9d8e676d.js"><link rel="prefetch" href="/webpack-book/assets/js/84.c82d11aa.js"><link rel="prefetch" href="/webpack-book/assets/js/85.726b81c4.js"><link rel="prefetch" href="/webpack-book/assets/js/86.64948b27.js"><link rel="prefetch" href="/webpack-book/assets/js/87.b48cf050.js"><link rel="prefetch" href="/webpack-book/assets/js/89.3e130a8d.js"><link rel="prefetch" href="/webpack-book/assets/js/90.1d7bcf63.js"><link rel="prefetch" href="/webpack-book/assets/js/91.86cca913.js"><link rel="prefetch" href="/webpack-book/assets/js/92.db0ad595.js"><link rel="prefetch" href="/webpack-book/assets/js/93.751d25a6.js"><link rel="prefetch" href="/webpack-book/assets/js/94.fcc921ca.js"><link rel="prefetch" href="/webpack-book/assets/js/95.19fec0e9.js"><link rel="prefetch" href="/webpack-book/assets/js/96.b3553500.js"><link rel="prefetch" href="/webpack-book/assets/js/97.b758c384.js"><link rel="prefetch" href="/webpack-book/assets/js/98.c5609fb7.js"><link rel="prefetch" href="/webpack-book/assets/js/99.aeae8502.js"><link rel="prefetch" href="/webpack-book/assets/js/100.0b9a4bc7.js"><link rel="prefetch" href="/webpack-book/assets/js/101.065606e1.js"><link rel="prefetch" href="/webpack-book/assets/js/102.34624029.js"><link rel="prefetch" href="/webpack-book/assets/js/103.4719eae8.js"><link rel="prefetch" href="/webpack-book/assets/js/104.3a239f3b.js"><link rel="prefetch" href="/webpack-book/assets/js/105.319c5359.js"><link rel="prefetch" href="/webpack-book/assets/js/106.70eddccc.js"><link rel="prefetch" href="/webpack-book/assets/js/107.d55c9ccd.js"><link rel="prefetch" href="/webpack-book/assets/js/108.2bd7e358.js"><link rel="prefetch" href="/webpack-book/assets/js/109.38234887.js"><link rel="prefetch" href="/webpack-book/assets/js/110.1461cec1.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.e4b61ea9.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.45cc87d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/loading/02_images.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/loading/02_images.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/webpack-book/" class="sidebar-link">简介</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>指南</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>开发</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>样式</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>加载静态资源</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/zh/loading/01_loader_definitions.html" class="sidebar-link">Loader 的基本定义</a></li><li><a href="/webpack-book/zh/loading/02_images.html" class="active sidebar-link">加载 Images</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#配置-url-loader" class="sidebar-link">配置 url-loader</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#配置-file-loader" class="sidebar-link">配置 file-loader</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#将-images-集成到项目中" class="sidebar-link">将 Images 集成到项目中</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#加载-svgs" class="sidebar-link">加载 SVGs</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#优化-images" class="sidebar-link">优化 Images</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#启用-srcset" class="sidebar-link">启用 srcset</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#动态加载-images" class="sidebar-link">动态加载 Images</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#加载雪碧图（sprites）" class="sidebar-link">加载雪碧图（Sprites）</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#使用占位符" class="sidebar-link">使用占位符</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#getting-image-dimensions" class="sidebar-link">Getting Image Dimensions</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#images-的引用" class="sidebar-link">Images 的引用</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#images-and-css-loader-source-map-gotcha" class="sidebar-link">Images and css-loader Source Map Gotcha</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/loading/02_images.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/webpack-book/zh/loading/03_fonts.html" class="sidebar-link">加载字体</a></li><li><a href="/webpack-book/zh/loading/04_javascript.html" class="sidebar-link">加载 JavaScript</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>构建</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>优化</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>输出</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>技术</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>扩展</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="加载-images"><a href="#加载-images" aria-hidden="true" class="header-anchor">#</a> 加载 Images</h1><p>HTTP/1应用程序因为加载大量的小静态资源而变得运行缓慢，这是因为每个请求都会带来开销。
HTTP/2在针对上面的情况做出了改进，并在一定程度上改变了这种情况。你曾经也会为使用那一种解决方案而感到困扰，下面Webpack允许其中的一些。</p><p>Webpack 可以使用 url-loader 实现静态资源的内联。它将你的图片资源以base64格式的字符串形式打包到js中。虽然这种处理方式可以减小请求的次数，但是它增加了打包生成文件的大小。url-loader在开发模式下足够用了，但是在生产模式下你需要考虑是用其它的loader。
Webpack提供了对内联过程的控制，并可以延迟加载到file-loader。file-loader输出图像文件并返回路径，而不是内联。这种技术适用于其他资产类型，如：字体。你将在后面的章节中看到。</p><h2 id="配置-url-loader"><a href="#配置-url-loader" aria-hidden="true" class="header-anchor">#</a> 配置 <em>url-loader</em></h2><p>从开发模式来说，url-loader是一个完美的选择，因为你不必关心结果包的大小。它有一个限制选项，可用于当图片超过限制后将图像生成交给file-loader。通过这种方式，你可以将小文件内联到JavaScript包中，而为较大的文件生成单独的文件。</p><p>如果使用limit选项，则需要将url-loader和file-loader安装到项目中。假如你已经正确配置了它们，webpack将解析你的样式中所包含的任何url()语法，也可以你通过JavaScript代码引用的图像资源。</p><p>如果使用了limit选项，url-loader会将这个选项传递给file-loader，从而可以进一步配置它的行为。</p><p>如果 .jpg 和 .png 类型的文件小于25kB需要内联， 你可以添加这样的配置loader：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      limit<span class="token punctuation">:</span> <span class="token number">25000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>如果在达到限制时，而你喜欢使用非file-loader的loader，你可以设置调用该loader,然后webpack会执行它，而不是一定要用file-loader。</p></blockquote><h2 id="配置-file-loader"><a href="#配置-file-loader" aria-hidden="true" class="header-anchor">#</a> 配置 <em>file-loader</em></h2><p>如果你想直接跳过内联这个步骤，你可以直接使用file-loader。它支持自定义文件名和路径。默认情况下，file-loader返回原始的文件扩展名和文件内容的MD5哈希值，具体使用可参考下面的配置：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(jpg|png)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">&quot;[path][name].[hash].[ext]&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><blockquote><p>如果你想要将图片输出到指定的目录中，可以修改 <code>options.name</code> 为 <code>name: &quot;./images/[hash].[ext]&quot;</code> 。</p></blockquote><blockquote><p>注意 <code>file-loader</code> 和 <code>url-loader</code> 不能是并列的关系，要么只是用两者中其中一个，要么是嵌套关系。如果 <em>url-loader</em> 的 <code>limit</code> 的不能满足使用，可以选择使用 <code>include</code> 字段。</p></blockquote><h2 id="将-images-集成到项目中"><a href="#将-images-集成到项目中" aria-hidden="true" class="header-anchor">#</a> 将 Images 集成到项目中</h2><p>可以将上面想法的封装成一个函数，添加的配置文件中。</p><p>首先添加 <code>file-loader</code> 和 <code>url-loader</code> 依赖：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> file-loader url-loader --save-dev
</code></pre></div><p>在 <strong>webpack.parts.js</strong> 中，添加一个如下面所示的配置函数：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span><span class="token function-variable function">loadImages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> include<span class="token punctuation">,</span> exclude<span class="token punctuation">,</span> options <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg)$/</span><span class="token punctuation">,</span>
        include<span class="token punctuation">,</span>
        exclude<span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
          options<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在 <strong>webpack.config.js</strong> 中，引入上面的配置函数。在开发模式下，只使用 <em>url-loader</em> ，而在生产模式下，引入 <em>url-loader</em> 和 <em>file-loader</em> 。当添加了 <code>limit</code> 选项， <em>url-loader</em> 会隐式的使用 <em>file-loader</em>，所以为了是配置起作用，你需要同时安装这两个loader。</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token operator">...</span>
  parts<span class="token punctuation">.</span><span class="token function">loadImages</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      limit<span class="token punctuation">:</span> <span class="token number">15000</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token string">&quot;[name].[ext]&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> developmentConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token operator">...</span>
  parts<span class="token punctuation">.</span><span class="token function">loadImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>为了测试配置的工作情况，下载或生成一个图片(<code>convert -size 100x100 gradient:blue logo.png</code>)，然后再项目中引用它。</p><p><strong>src/main.css</strong></p><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> cornsilk<span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(&quot;./logo.png&quot;)</span><span class="token punctuation">;</span>
  <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token punctuation">;</span>
  <span class="token property">background-position</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>具体的操作方式取决于 <code>limit</code> 的配置。如果在配置值之下，则内联这张图片，否则就生成一张图片和图片存在的路径。这个查找工作取决于 <em>css-loader</em>。你也可以在js代码中引入一张图片，然后看看发生了什么。</p><h2 id="加载-svgs"><a href="#加载-svgs" aria-hidden="true" class="header-anchor">#</a> 加载 SVGs</h2><p>Webpack 可以使用<a href="https://github.com/webpack/webpack/issues/595" target="_blank" rel="noopener noreferrer">两种方法<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 加载 SVGs。然而最简单的方法是用 <em>file-loader</em> ，配置如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.svg$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>如果上面的配置是正确的，你可以在css代码中引入svg，像下面这样：</p><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.icon</span> <span class="token punctuation">{</span>
   <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(&quot;../assets/icon.svg&quot;)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>也可以考虑使用下面的loader：</p><ul><li><a href="https://www.npmjs.com/package/raw-loader" target="_blank" rel="noopener noreferrer">raw-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以访问 SVG 内容。</li><li><a href="https://www.npmjs.com/package/svg-inline-loader" target="_blank" rel="noopener noreferrer">svg-inline-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以更进一步的实现清除SVG内的不必要的标记。</li><li><a href="https://www.npmjs.com/package/svg-sprite-loader" target="_blank" rel="noopener noreferrer">svg-sprite-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以将多张svg合成为一张雪碧图。它也支持 <em>.jpg</em> 和 <em>.png</em> 格式图片的处理。</li><li><a href="https://www.npmjs.com/package/svg-url-loader" target="_blank" rel="noopener noreferrer">svg-url-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 把 SVGs 用UTF-8格式编码为data-URI，这样静态资源更小，且比base64架加载更快。</li><li><a href="https://www.npmjs.com/package/react-svg-loader" target="_blank" rel="noopener noreferrer">react-svg-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以在React中以 <code>&lt;Image width={50} height={50}/&gt;</code> 格式的代码引入svg，然后渲染它。</li></ul><blockquote><p>你可以仍然使用 <em>url-loader</em> ，但要注意 SVGs 的处理。</p></blockquote><h2 id="优化-images"><a href="#优化-images" aria-hidden="true" class="header-anchor">#</a> 优化 Images</h2><p>你可以使用 <a href="https://www.npmjs.com/package/image-webpack-loader" target="_blank" rel="noopener noreferrer">image-webpack-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，<a href="https://www.npmjs.com/package/svgo-loader" target="_blank" rel="noopener noreferrer">svgo-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (SVG specific)，或 <a href="https://www.npmjs.com/package/imagemin-webpack-plugin" target="_blank" rel="noopener noreferrer">imagemin-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来压缩图片。这种类型的 loader 被首先用来改变数据，所以你应该把它放在 <code>use</code> 列表的最后位置。</p><p>它在生产中很有意义，因为它可以减小请求静态资源的带宽，因此可以起到加速你的站点或应用程序的启动。</p><h2 id="启用-srcset"><a href="#启用-srcset" aria-hidden="true" class="header-anchor">#</a> 启用 <code>srcset</code></h2><p><a href="https://www.npmjs.com/package/resize-image-loader" target="_blank" rel="noopener noreferrer">resize-image-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://www.npmjs.com/package/responsive-loader" target="_blank" rel="noopener noreferrer">responsive-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 允许你生成 <code>srcset</code> 兼容现代浏览器的图片集合。<code>srcset</code> 为浏览器提供了更多的控制，可以控制加载什么图像，以及在什么情况下可以获得更高的性能</p><h2 id="动态加载-images"><a href="#动态加载-images" aria-hidden="true" class="header-anchor">#</a> 动态加载 Images</h2><p>Webpack 允许在某个条件下动态的加载图片。这个技术包括 <em>Code Splitting</em> 和 <em><a href="https://lvzhenbang.github.io/webpack-book/dist/zh/techniques/01_dynamic_loading.html" target="_blank" rel="noopener noreferrer">Dynamic Loading<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> 。这样做可以节省带宽，图片可以等到需要的时候在加载，或者在你有时间的时候预先加载它们。</p><h2 id="加载雪碧图（sprites）"><a href="#加载雪碧图（sprites）" aria-hidden="true" class="header-anchor">#</a> 加载雪碧图（Sprites）</h2><p><strong>Spriting</strong> 允许你将多张小图片合成一张大图。它过去常被用在游戏的动画上，在web开发上也可以用来减少请求的次数。</p><p><a href="https://www.npmjs.com/package/webpack-spritesmith" target="_blank" rel="noopener noreferrer">webpack-spritesmith<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以转换图片成一张雪碧图，伴随生成一个 Sass/Less/Stylus 样式文件。你可以添加 <code>SpritesmithPlugin</code> 配置，然后指定目标图片组，你也可以指定生成的mixin名称，然后你可以像下面这样引用样式：</p><div class="language-scss extra-class"><pre class="language-scss"><code><span class="token keyword">@import</span> <span class="token string">&quot;~sprite.sass&quot;</span><span class="token punctuation">;</span>

<span class="token selector">.close-button </span><span class="token punctuation">{</span>
  <span class="token function">sprite</span><span class="token punctuation">(</span><span class="token variable">$close</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.open-button </span><span class="token punctuation">{</span>
  <span class="token function">sprite</span><span class="token punctuation">(</span><span class="token variable">$open</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="使用占位符"><a href="#使用占位符" aria-hidden="true" class="header-anchor">#</a> 使用占位符</h2><p><a href="https://www.npmjs.com/package/image-trace-loader" target="_blank" rel="noopener noreferrer">image-trace-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 可以加载图片，然后暴露<code>image/svg+xml</code> 这样的URL编码数据。它可以跟 <em>file-loader</em> 和 <em>url-loader</em> 一起使用，当真正的图片加载前，使用这一个占位符。</p><p><a href="https://www.npmjs.com/package/lqip-loader" target="_blank" rel="noopener noreferrer">lqip-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 实现了相似的功能。它实现的是一个模糊效果的图片，而不是一个占位图片。</p><h2 id="getting-image-dimensions"><a href="#getting-image-dimensions" aria-hidden="true" class="header-anchor">#</a> Getting Image Dimensions</h2><p>有的时候只得到一张图片的引用是不够的。 <a href="https://www.npmjs.com/package/image-size-loader" target="_blank" rel="noopener noreferrer">image-size-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 不仅返回图片的引用，还返回图片的 dimensions、type、size信息。</p><h2 id="images-的引用"><a href="#images-的引用" aria-hidden="true" class="header-anchor">#</a> Images 的引用</h2><p>如果 Webpack 配置使用了 <em>css-loader</em> ，那么它可以在样式中通过 <code>@import</code> 和 <code>url()</code> 来获取图片。你也可以在你的js代码中引入图片，这时你需要像下面例子中那样引入并使用图片：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> src <span class="token keyword">from</span> <span class="token string">&quot;./avatar.png&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// Use the image in your code somehow now</span>
<span class="token keyword">const</span> <span class="token function-variable function">Profile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>src<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>如果你在使用React，并且项目中引入了 <a href="https://www.npmjs.com/package/babel-plugin-transform-react-jsx-img-import" target="_blank" rel="noopener noreferrer">babel-plugin-transform-react-jsx-img-import<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 插件，<code>require</code> 会自动生成，在这样的情况下，你可以像下面这样引入图片：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Profile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">&quot;avatar.png&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>你也可以配置动态引入图片，在 <em><a href="https://lvzhenbang.github.io/webpack-book/dist/zh/building/03_code_splitting.html" target="_blank" rel="noopener noreferrer">Code Splitting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></em> 这章将详细介绍。下面是个小例子：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./avatars/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>avatar<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>`<span class="token punctuation">.</span>
</code></pre></div><h2 id="images-and-css-loader-source-map-gotcha"><a href="#images-and-css-loader-source-map-gotcha" aria-hidden="true" class="header-anchor">#</a> Images and <em>css-loader</em> Source Map Gotcha</h2><p>如果你正在使用图片且在 <em>css-loader</em> 中开启了 <code>sourceMap</code> 功能，这时你需要设置 <code>output.publicPath</code> 为一个指明开发服务器的绝对值。否则，图片将没有效果，可查看 <a href="https://github.com/webpack/style-loader/issues/55" target="_blank" rel="noopener noreferrer">webpack issue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 去进一步了解问题。</p><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2><p>Webpack 可以根据打包的需要来实现图片的内联。根据实际的需求设置内联的限制条件。你需要在构建包的大小和请求次数之间做权衡。</p><p>内容回顾：</p><ul><li><em>url-loader</em> 将静态资源内敛到JavaScript。它由一个 <code>limit</code> 选项可以实现将静态资源延迟传递给 <em>file-loader</em> 。</li><li><em>file-loader</em> 输出图片静态资源，并返回给js代码一个路径信息。它允许内静态资源的名字中注入hash（文件内容的MD5 hash，所以每个图片都有一个唯一的hash）。</li><li>你可以使用与图片优化相关的 loaders 和 plugins 来进一步调整图片的大小。</li><li>将一些小图片生成一个 <strong>sprite sheets</strong> 来减少请求次数。</li><li>Webpack 允许你在某一条件下，动态的加载图片。</li><li>如果你要使用source-maps，你需要设置 <code>output.publicPath</code> 为一个绝对值，这样图片才能正常展示。</li></ul><p>在下一章中，你将学习使用webpack加载字体。</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/zh/loading/02_images.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/zh/loading/01_loader_definitions.html" class="prev">
          Loader 的基本定义
        </a></span><span class="next"><a href="/webpack-book/zh/loading/03_fonts.html">
          加载字体
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpack-book/assets/js/88.c6692c41.js" defer></script><script src="/webpack-book/assets/js/app.e4b61ea9.js" defer></script>
  </body>
</html>
