<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>构建多页面应用 | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/assets/css/styles.7213af14.css" as="style"><link rel="preload" href="/webpack-book/assets/js/app.7213af14.js" as="script"><link rel="preload" href="/webpack-book/assets/js/100.43748c66.js" as="script"><link rel="prefetch" href="/webpack-book/assets/js/39.4de3484e.js"><link rel="prefetch" href="/webpack-book/assets/css/1.styles.45cc87d3.css"><link rel="prefetch" href="/webpack-book/assets/js/1.45cc87d3.js"><link rel="prefetch" href="/webpack-book/assets/js/2.4a0e8edb.js"><link rel="prefetch" href="/webpack-book/assets/js/3.4c05f671.js"><link rel="prefetch" href="/webpack-book/assets/js/4.c00bb4bb.js"><link rel="prefetch" href="/webpack-book/assets/js/5.6026fd36.js"><link rel="prefetch" href="/webpack-book/assets/js/6.3ddb0710.js"><link rel="prefetch" href="/webpack-book/assets/js/7.13be0be2.js"><link rel="prefetch" href="/webpack-book/assets/js/8.ab685c7d.js"><link rel="prefetch" href="/webpack-book/assets/js/9.4ec307e6.js"><link rel="prefetch" href="/webpack-book/assets/js/10.ce93540e.js"><link rel="prefetch" href="/webpack-book/assets/js/11.d07f2433.js"><link rel="prefetch" href="/webpack-book/assets/js/12.78921a69.js"><link rel="prefetch" href="/webpack-book/assets/js/13.3af73d6e.js"><link rel="prefetch" href="/webpack-book/assets/js/14.51d8e1c3.js"><link rel="prefetch" href="/webpack-book/assets/js/15.2478f68d.js"><link rel="prefetch" href="/webpack-book/assets/js/16.a1674f2e.js"><link rel="prefetch" href="/webpack-book/assets/js/17.08cb5d47.js"><link rel="prefetch" href="/webpack-book/assets/js/18.63a9d4ee.js"><link rel="prefetch" href="/webpack-book/assets/js/19.6ec78de6.js"><link rel="prefetch" href="/webpack-book/assets/js/20.448e928e.js"><link rel="prefetch" href="/webpack-book/assets/js/21.8aed75ba.js"><link rel="prefetch" href="/webpack-book/assets/js/22.442c5d65.js"><link rel="prefetch" href="/webpack-book/assets/js/23.ecb39720.js"><link rel="prefetch" href="/webpack-book/assets/js/24.f53b1026.js"><link rel="prefetch" href="/webpack-book/assets/js/25.91fac79b.js"><link rel="prefetch" href="/webpack-book/assets/js/26.f65132e8.js"><link rel="prefetch" href="/webpack-book/assets/js/27.78edbc75.js"><link rel="prefetch" href="/webpack-book/assets/js/28.7030a8db.js"><link rel="prefetch" href="/webpack-book/assets/js/29.c6fc4663.js"><link rel="prefetch" href="/webpack-book/assets/js/30.2cb421b5.js"><link rel="prefetch" href="/webpack-book/assets/js/31.575d8f9a.js"><link rel="prefetch" href="/webpack-book/assets/js/32.589855e2.js"><link rel="prefetch" href="/webpack-book/assets/js/33.bcbf13b9.js"><link rel="prefetch" href="/webpack-book/assets/js/34.0901960e.js"><link rel="prefetch" href="/webpack-book/assets/js/35.77530cbe.js"><link rel="prefetch" href="/webpack-book/assets/js/36.6ca51425.js"><link rel="prefetch" href="/webpack-book/assets/js/37.e4f9173d.js"><link rel="prefetch" href="/webpack-book/assets/js/38.711f68a2.js"><link rel="prefetch" href="/webpack-book/assets/js/40.93ecfec2.js"><link rel="prefetch" href="/webpack-book/assets/js/41.207dedbe.js"><link rel="prefetch" href="/webpack-book/assets/js/42.7e2cbeb1.js"><link rel="prefetch" href="/webpack-book/assets/js/43.0a66033e.js"><link rel="prefetch" href="/webpack-book/assets/js/44.2e0f0bc1.js"><link rel="prefetch" href="/webpack-book/assets/js/45.7897a16a.js"><link rel="prefetch" href="/webpack-book/assets/js/46.573f427b.js"><link rel="prefetch" href="/webpack-book/assets/js/47.5a6cf832.js"><link rel="prefetch" href="/webpack-book/assets/js/48.2ae652cf.js"><link rel="prefetch" href="/webpack-book/assets/js/49.c1decf35.js"><link rel="prefetch" href="/webpack-book/assets/js/50.cb0ab30d.js"><link rel="prefetch" href="/webpack-book/assets/js/51.61c5bb22.js"><link rel="prefetch" href="/webpack-book/assets/js/52.9418d1bd.js"><link rel="prefetch" href="/webpack-book/assets/js/53.8fb3b3af.js"><link rel="prefetch" href="/webpack-book/assets/js/54.0b373f02.js"><link rel="prefetch" href="/webpack-book/assets/js/55.11cdb808.js"><link rel="prefetch" href="/webpack-book/assets/js/56.d30a62d6.js"><link rel="prefetch" href="/webpack-book/assets/js/57.80db98c6.js"><link rel="prefetch" href="/webpack-book/assets/js/58.170008c8.js"><link rel="prefetch" href="/webpack-book/assets/js/59.b8d33f82.js"><link rel="prefetch" href="/webpack-book/assets/js/60.bad2a4c0.js"><link rel="prefetch" href="/webpack-book/assets/js/61.8502ded7.js"><link rel="prefetch" href="/webpack-book/assets/js/62.2388773f.js"><link rel="prefetch" href="/webpack-book/assets/js/63.fd2ae4b4.js"><link rel="prefetch" href="/webpack-book/assets/js/64.e4a18972.js"><link rel="prefetch" href="/webpack-book/assets/js/65.1c6f2207.js"><link rel="prefetch" href="/webpack-book/assets/js/66.5ba4de03.js"><link rel="prefetch" href="/webpack-book/assets/js/67.6e5a522b.js"><link rel="prefetch" href="/webpack-book/assets/js/68.c3000811.js"><link rel="prefetch" href="/webpack-book/assets/js/69.df6a6b01.js"><link rel="prefetch" href="/webpack-book/assets/js/70.1e6f5177.js"><link rel="prefetch" href="/webpack-book/assets/js/71.9a00df76.js"><link rel="prefetch" href="/webpack-book/assets/js/72.ea1b395f.js"><link rel="prefetch" href="/webpack-book/assets/js/73.c8734858.js"><link rel="prefetch" href="/webpack-book/assets/js/74.24597070.js"><link rel="prefetch" href="/webpack-book/assets/js/75.b38bb75c.js"><link rel="prefetch" href="/webpack-book/assets/js/76.64d5107c.js"><link rel="prefetch" href="/webpack-book/assets/js/77.17ce9bc3.js"><link rel="prefetch" href="/webpack-book/assets/js/78.c1d50222.js"><link rel="prefetch" href="/webpack-book/assets/js/79.42c031ab.js"><link rel="prefetch" href="/webpack-book/assets/js/80.c83603fe.js"><link rel="prefetch" href="/webpack-book/assets/js/81.9dca7a45.js"><link rel="prefetch" href="/webpack-book/assets/js/82.bea2f876.js"><link rel="prefetch" href="/webpack-book/assets/js/83.5277ed35.js"><link rel="prefetch" href="/webpack-book/assets/js/84.9c43366f.js"><link rel="prefetch" href="/webpack-book/assets/js/85.2c3ed690.js"><link rel="prefetch" href="/webpack-book/assets/js/86.6ae8c813.js"><link rel="prefetch" href="/webpack-book/assets/js/87.790cef71.js"><link rel="prefetch" href="/webpack-book/assets/js/88.050a6bb5.js"><link rel="prefetch" href="/webpack-book/assets/js/89.a3623978.js"><link rel="prefetch" href="/webpack-book/assets/js/90.d72c8f89.js"><link rel="prefetch" href="/webpack-book/assets/js/91.b4c756d6.js"><link rel="prefetch" href="/webpack-book/assets/js/92.6bc2617e.js"><link rel="prefetch" href="/webpack-book/assets/js/93.a98fa457.js"><link rel="prefetch" href="/webpack-book/assets/js/94.0019b06c.js"><link rel="prefetch" href="/webpack-book/assets/js/95.b0536de7.js"><link rel="prefetch" href="/webpack-book/assets/js/96.fb10cc59.js"><link rel="prefetch" href="/webpack-book/assets/js/97.c833f49f.js"><link rel="prefetch" href="/webpack-book/assets/js/98.6d8bae1f.js"><link rel="prefetch" href="/webpack-book/assets/js/99.4227e9fd.js"><link rel="prefetch" href="/webpack-book/assets/js/101.7308ef4d.js"><link rel="prefetch" href="/webpack-book/assets/js/102.28698397.js"><link rel="prefetch" href="/webpack-book/assets/js/103.0ce8a887.js"><link rel="prefetch" href="/webpack-book/assets/js/104.3c76608e.js"><link rel="prefetch" href="/webpack-book/assets/js/105.26a54f8e.js"><link rel="prefetch" href="/webpack-book/assets/js/106.fd8b2560.js"><link rel="prefetch" href="/webpack-book/assets/js/107.67a9bbb3.js"><link rel="prefetch" href="/webpack-book/assets/js/108.a0674454.js"><link rel="prefetch" href="/webpack-book/assets/js/109.d32767db.js"><link rel="prefetch" href="/webpack-book/assets/js/110.832d1487.js"><link rel="prefetch" href="/webpack-book/assets/js/111.76840d88.js">
    <link rel="stylesheet" href="/webpack-book/assets/css/styles.7213af14.css"><link rel="stylesheet" href="/webpack-book/assets/css/1.styles.45cc87d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/output/02_multiple_pages.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/zh/output/02_multiple_pages.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/webpack-book/" class="sidebar-link">简介</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>指南</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>开发</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>样式</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>加载静态资源</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>构建</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>优化</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>输出</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/zh/output/01_targets.html" class="sidebar-link">构建目标</a></li><li><a href="/webpack-book/zh/output/02_multiple_pages.html" class="active sidebar-link">构建多页面应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/zh/output/02_multiple_pages.html#可能的方法" class="sidebar-link">可能的方法</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/output/02_multiple_pages.html#生成多页面" class="sidebar-link">生成多页面</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/output/02_multiple_pages.html#生成多个页面（页面间共享代码）" class="sidebar-link">生成多个页面（页面间共享代码）</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/output/02_multiple_pages.html#渐进式-web-应用程序" class="sidebar-link">渐进式 Web 应用程序</a></li><li class="sidebar-sub-header"><a href="/webpack-book/zh/output/02_multiple_pages.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/webpack-book/zh/output/03_server_side_rendering.html" class="sidebar-link">服务端渲染</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>技术</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>扩展</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="构建多页面应用"><a href="#构建多页面应用" aria-hidden="true" class="header-anchor">#</a> 构建多页面应用</h1><p>即使webpack经常用于打包单页面应用程序，也可以用它处理多个独立的页面。这个想法类似于 <em>构建目标</em> 这章中所讲的，你可以生成多个输出文件。但是这一次，你必须生成多个独立的页面。而这可以通过 <code>HtmlWebpackPlugin</code> 和一些配置来实现。</p><h2 id="可能的方法"><a href="#可能的方法" aria-hidden="true" class="header-anchor">#</a> 可能的方法</h2><p>使用webpack生成多个页面时，你有以下几种选择：</p><ul><li>完成<em>multi-compiler</em>并返回一组配置。 只要页面是分开的，并且跨越它们共享代码的最小需求，该方法就可以工作。这种方法的好处是你可以通过[parallel-webpack] (https://www.npmjs.com/package/parallel-webpack)处理它，以提高构建性能。</li><li>设置单个配置并提取共性。你执行此操作的方式可能会有所不同，具体取决于你的方式。</li><li>如果你遵循[渐进式 Web 应用程序] (https://developers.google.com/web/progressive-web-apps/)（PWA）的想法，你最终可能会得到 <strong>app shell</strong> 或者 <strong>page shell</strong> 并在使用时加载应用程序的部分。</li></ul><p>在实践中，你可以从更多的维度着手。例如，你必须为页面提供 i18n 支持。这些想法在基本方法之上发展。</p><h2 id="生成多页面"><a href="#生成多页面" aria-hidden="true" class="header-anchor">#</a> 生成多页面</h2><p>要生成多个独立的页面，应以某种方式初始化它们。你还应该能够返回每个页面的配置，因此webpack会选择它们并通过 <code>multi-compiler</code> 模式处理它们。</p><h3 id="页面摘要"><a href="#页面摘要" aria-hidden="true" class="header-anchor">#</a> 页面摘要</h3><p>要初始化页面，它至少应该接收页面标题、输出路径和可选的模板。每个页面都应该接收可选的输出路径和用于自定义的模板。这个想法的建模可参考下面的配置：</p><p><strong>webpack.parts.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  path <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  template <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
    <span class="token string">&quot;html-webpack-plugin/default_index.ejs&quot;</span>
  <span class="token punctuation">)</span><span class="token punctuation">,</span>
  title<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path <span class="token operator">&amp;&amp;</span> path <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">index.html`</span></span><span class="token punctuation">,</span>
      template<span class="token punctuation">,</span>
      title<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="集成到配置"><a href="#集成到配置" aria-hidden="true" class="header-anchor">#</a> 集成到配置</h3><p>要将这个想法融入到配置中，它的组合方式必须改变。此外，还需要定义页面。</p><p>首先，让我们暂时为每个页面重用相同的JavaScript逻辑：</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token comment">// const HtmlWebpackPlugin = require(&quot;html-webpack-plugin&quot;);</span>
<span class="token operator">...</span>


<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token comment">// {</span>
  <span class="token comment">//   plugins: [</span>
  <span class="token comment">//     new HtmlWebpackPlugin({</span>
  <span class="token comment">//       title: &quot;Webpack demo&quot;,</span>
  <span class="token comment">//     }),</span>
  <span class="token comment">//   ],</span>
  <span class="token comment">// },</span>
  <span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> mode <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// if (mode === &quot;production&quot;) {</span>
  <span class="token comment">//   return merge(commonConfig, productionConfig, { mode });</span>
  <span class="token comment">// }</span>

  <span class="token comment">// return merge(commonConfig, developmentConfig, { mode });</span>
  <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token punctuation">[</span>
    parts<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&quot;Webpack demo&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    parts<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">&quot;Another demo&quot;</span><span class="token punctuation">,</span> path<span class="token punctuation">:</span> <span class="token string">&quot;another&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span>
    mode <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">?</span> productionConfig <span class="token punctuation">:</span> developmentConfig<span class="token punctuation">;</span>

  <span class="token keyword">return</span> pages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>page <span class="token operator">=&gt;</span>
    <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> config<span class="token punctuation">,</span> page<span class="token punctuation">,</span> <span class="token punctuation">{</span> mode <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个改变之后，在应用程序中应该有两个页面：<code>/</code>和<code>/ another</code>。应该可以在看到相同输出，并导航它们。</p><h3 id="向每个页面注入不同的脚本"><a href="#向每个页面注入不同的脚本" aria-hidden="true" class="header-anchor">#</a> 向每个页面注入不同的脚本</h3><p>问题是，如何为每个页面注入不同的脚本。在当前配置中，两者共享相同的<code>entry</code>。要解决此问题，你应该将 <code>entry</code> 配置移到较低的级别并按页面进行管理。要使用脚本进行测试，请设置另一个入口点：</p><p><strong>src/another.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&quot;./main.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> component <span class="token keyword">from</span> <span class="token string">&quot;./component&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> demoComponent <span class="token operator">=</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&quot;Another&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>demoComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>该文件可以转到自己的目录。这里重用现有代码以显示某些内容。Webpack配置必须指向此文件：</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>

<span class="token keyword">const</span> commonConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// Needed for code splitting to work in nested paths</span>
      publicPath<span class="token punctuation">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> mode <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// const pages = [</span>
  <span class="token comment">//   parts.page({ title: &quot;Webpack demo&quot; }),</span>
  <span class="token comment">//   parts.page({ title: &quot;Another demo&quot;, path: &quot;another&quot; }),</span>
  <span class="token comment">// ];</span>
  <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token punctuation">[</span>
    parts<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token string">&quot;Webpack demo&quot;</span><span class="token punctuation">,</span>
      entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        app<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    parts<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token string">&quot;Another demo&quot;</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> <span class="token string">&quot;another&quot;</span><span class="token punctuation">,</span>
      entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        another<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token punctuation">,</span> <span class="token string">&quot;another.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span>
    mode <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">?</span> productionConfig <span class="token punctuation">:</span> developmentConfig<span class="token punctuation">;</span>

    <span class="token keyword">return</span> pages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>page <span class="token operator">=&gt;</span>
      <span class="token function">merge</span><span class="token punctuation">(</span>commonConfig<span class="token punctuation">,</span> config<span class="token punctuation">,</span> page<span class="token punctuation">,</span> <span class="token punctuation">{</span> mode <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>调整还需要在相关部分进行更改，以便 <code>entry</code> 包含在配置中：</p><p><strong>webpack.parts.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    path <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    template <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
      <span class="token string">&quot;html-webpack-plugin/default_index.ejs&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    title<span class="token punctuation">,</span>
    entry<span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  entry<span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path <span class="token operator">&amp;&amp;</span> path <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">index.html`</span></span><span class="token punctuation">,</span>
      title<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>/another</code> 有相似的修改，展示效果如下：</p><p><img src="data:image/png;base64,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" alt="Another page shows up"></p><h3 id="赞成和反对观点"><a href="#赞成和反对观点" aria-hidden="true" class="header-anchor">#</a> 赞成和反对观点</h3><p>如果你构建应用程序（<code>npm run build</code>），你应该找到 <em>another/index.html</em>。 根据生成的代码，你可以进行以下观察：</p><ul><li>很清楚如何在配置中添加更多页面。</li><li>生成的静态资源直接位于构建根目录下方。页面是一个除外，因为它们由<code>HtmlWebpackPlugin</code>处理，但它们仍然指向根目录下的静态资源。可以用 <em>webpack.page.js</em> 的形式添加更多抽象，并通过接受公共的页面配置函数来管理路径。</li><li>记录应该按照每个页面单独写在自己的文件中。目前，写入最后一次成功的配置。上述解决方案可以解决这个问题。</li><li>像linting和cleaning这样的过程现在运行两次。 <em>Targets</em> 这章详细的介绍了该问题的解决方案。</li></ul><p>通过删除multi-compiler模式，可以将方法推向另一个方向 尽管处理这种构建的速度较慢，但它可以实现代码共享和shell。实现shell配置的第一步是重新调整配置，以便它获取页面之间共享的代码。</p><h2 id="生成多个页面（页面间共享代码）"><a href="#生成多个页面（页面间共享代码）" aria-hidden="true" class="header-anchor">#</a> 生成多个页面（页面间共享代码）</h2><p>由于使用模式匹配，当前配置可以巧妙地共享代码。页面只有一小部分代码不同，它们的manifest和构建包会根据entries配置来生成。</p><p>在更复杂的应用程序中，你应该跨页面应用 <a href="https://lvzhenbang.github.io/webpack-book/dist/zh/building/02_bundle_splitting.html" target="_blank" rel="noopener noreferrer"><em>构建拆分</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，书中专门有一章介绍这个技术。因此，删除multi-compiler模式是值得的。</p><h3 id="调整配置"><a href="#调整配置" aria-hidden="true" class="header-anchor">#</a> 调整配置</h3><p>需要进行调整以在页面之间共享代码。大多数代码可以保持不变，但将它暴露给webpack的方式必须改变，以便它接收单个配置对象。由于 <code>HtmlWebpackPlugin</code> 默认选择所有块，因此你必须调整它以仅选取与每个页面相关的块：</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> mode <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pages <span class="token operator">=</span> <span class="token punctuation">[</span>
    parts<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token string">&quot;Webpack demo&quot;</span><span class="token punctuation">,</span>
      entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        app<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;manifest&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vendors~app&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    parts<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token string">&quot;Another demo&quot;</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> <span class="token string">&quot;another&quot;</span><span class="token punctuation">,</span>
      entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        another<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token punctuation">,</span> <span class="token string">&quot;another.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      chunks<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;another&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;manifest&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vendors~app&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> config <span class="token operator">=</span>
    mode <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span> <span class="token operator">?</span> productionConfig <span class="token punctuation">:</span> developmentConfig<span class="token punctuation">;</span>

  <span class="token comment">// return pages.map(page =&gt;</span>
  <span class="token comment">//   merge(commonConfig, config, page, { mode })</span>
  <span class="token comment">// )</span>
  <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>commonConfig<span class="token punctuation">,</span> config<span class="token punctuation">,</span> <span class="token punctuation">{</span> mode <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>pages<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>指定页面的配置也需要做一些小的调整：</p><p><strong>webpack.parts.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code>exports<span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    path <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    template <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
      <span class="token string">&quot;html-webpack-plugin/default_index.ejs&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    title<span class="token punctuation">,</span>
    entry<span class="token punctuation">,</span>
    chunks<span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  entry<span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      chunks<span class="token punctuation">,</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>运行 <code>npm run build</code> 脚本命令，你应该注意到与第一个多页构建相比有些不同。不是原来的两个manifest文件，只有一个。由于新的配置，manifest包含对生成的所有包的引用。反过来，特定的entries文件指向manifest的不同部分，manifest根据entry的不同而运行不同的代码。因此不需要多个单独的manifest。</p><h3 id="赞成和反对观点-2"><a href="#赞成和反对观点-2" aria-hidden="true" class="header-anchor">#</a> 赞成和反对观点</h3><p>与之前的方法相比，获得了一些东西，但也丢失了一些：</p><ul><li>鉴于配置不再是multi-compiler形式，编译处理可能会更慢。</li><li>如果不做额外的考虑，如 <code>CleanWebpackPlugin</code> 之类的插件就无法运行。</li><li>manifest不是多个，只剩下一个。但结果不是问题，因为entry会根据其设置使用它不同。</li></ul><h2 id="渐进式-web-应用程序"><a href="#渐进式-web-应用程序" aria-hidden="true" class="header-anchor">#</a> 渐进式 Web 应用程序</h2><p>如果通过将其与代码拆分和智能路由相结合来进一步推动这一想法，你将最终实现渐进式Web应用程序（PWA）的理念。[webpack-pwa]（https://github.com/webpack/webpack-pwa）示例说明了如何通过app shell或页面shell使用webpack实现该方法。</p><p>App shell在初始化的时候加载，它管理整个应用程序，包括其路由。页面shell更精细，并且在使用应用程序时会加载更多内容。在这种情况下，应用程序的总大小更大。相反，你可以更快地加载初始内容。</p><p>PWA与[offline-plugin]（https://www.npmjs.com/package/offline-plugin）和[sw-precache-webpack-plugin]等插件完美结合（https://www.npmjs.com/package/sw-precache-webpack-plugin）。使用[Service Worker]（https://developer.mozilla.org/en/docs/Web/API/Service_Worker_API）并改善离线体验。</p><blockquote><p><a href="https://developers.google.com/web/showcase/2017/twitter" target="_blank" rel="noopener noreferrer">Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 和 <a href="https://medium.com/@addyosmani/a-tinder-progressive-web-app-performance-case-study-78919d98ece0" target="_blank" rel="noopener noreferrer">Tinder<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 案例研究说明了PWA方法如何提升用户体验。</p></blockquote><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2><p>Webpack允许你管理多个页面设置。PWA方法允许应用程序在使用时加载，webpack允许实现它。</p><p>内容回顾：</p><ul><li>Webpack可用于通过multi-cpmpiler模式生成单独的页面，也可以将所有页面配置包含在一个页面中。</li><li>multi-compiler配置可以使用外部解决方案并行运行，但是应用构建拆分等技术会更加困难。</li><li>多页面设置可以修改为 <strong>渐进式Web应用程序</strong>。在这种情况下，你可以使用各种webpack技术来提供快速加载并根据需要获取功能的应用程序。这种技术的两种风格都有其自身的优点。</li></ul><p>在下一章中，将详细的介绍如何实现服务端渲染（SSR）。</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/zh/output/02_multiple_pages.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/zh/output/01_targets.html" class="prev">
          构建目标
        </a></span><span class="next"><a href="/webpack-book/zh/output/03_server_side_rendering.html">
          服务端渲染
        </a> →
      </span></p></div></div></div></div>
    <script src="/webpack-book/assets/js/100.43748c66.js" defer></script><script src="/webpack-book/assets/js/app.7213af14.js" defer></script>
  </body>
</html>
