(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{148:function(t,s,a){t.exports=a.p+"assets/img/code-splitting.d0157e4d.png"},149:function(t,s,a){t.exports=a.p+"assets/img/lazy.dce3fe2f.png"},220:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"code-splitting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-splitting","aria-hidden":"true"}},[this._v("#")]),this._v(" Code Splitting")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Even though splitting bundles can help a notch, they are not the only solution, and you can still end up having to download a lot of data. Fortunately, it's possible to do better thanks to "),s("strong",[this._v("code splitting")]),this._v(". It allows loading code lazily as you need it.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"code-splitting-formats"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-splitting-formats","aria-hidden":"true"}},[this._v("#")]),this._v(" Code Splitting Formats")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Code splitting can be done in two primary ways in webpack: through a dynamic "),s("code",[this._v("import")]),this._v(" or "),s("code",[this._v("require.ensure")]),this._v(" syntax. The former is used in this project.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(148),alt:"Code splitting"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"dynamic-import"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-import","aria-hidden":"true"}},[this._v("#")]),this._v(" Dynamic "),s("code",[this._v("import")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Dynamic imports are defined as "),s("code",[this._v("Promise")]),this._v("s:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token comment"}},[t._v('/* webpackChunkName: "optional-name" */')]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"./module"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  module "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  error "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("Promise"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("all")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"lunr"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"../search_index.json"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("lunr"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" search"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    index"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" lunr"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Index"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("load")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("search"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("index"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    lines"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" search"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lines"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The code above creates separate bundles to a request. If you wanted only one, you would have to use naming or define an intermediate module to "),s("code",[this._v("import")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"setting-up-code-splitting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-code-splitting","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Up Code Splitting")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("To demonstrate the idea of code splitting, you can use dynamic "),s("code",[this._v("import")]),this._v(". The Babel setup of the project needs additions to make the syntax work.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"configuring-babel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuring-babel","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuring Babel")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" @babel/plugin-syntax-dynamic-import --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v(".babelrc")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nleanpub-start-insert\n  "),a("span",{attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"@babel/plugin-syntax-dynamic-import"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nleanpub-end-insert\n  ...\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("W> If you are using ESLint, you should install "),s("code",[this._v("babel-eslint")]),this._v(" and set "),s("code",[this._v('parser: "babel-eslint"')]),this._v(" in addition to "),s("code",[this._v("parserOptions.allowImportExportEverywhere: true")]),this._v(" at ESLint configuration.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"defining-a-split-point-using-a-dynamic-import"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#defining-a-split-point-using-a-dynamic-import","aria-hidden":"true"}},[this._v("#")]),this._v(" Defining a Split Point Using a Dynamic "),s("code",[this._v("import")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("src/lazy.js")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[this._v("export")]),this._v(" "),s("span",{attrs:{class:"token keyword"}},[this._v("default")]),this._v(" "),s("span",{attrs:{class:"token string"}},[this._v('"Hello from lazy"')]),s("span",{attrs:{class:"token punctuation"}},[this._v(";")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("src/component.js")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Hello world"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"div"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("className "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"pure-button"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nleanpub"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("start"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("onclick")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"./lazy"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lazy "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textContent "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" lazy"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("default")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("error")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nleanpub"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("end"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you open up the application ("),s("code",[this._v("npm start")]),this._v(") and click the button, you should see the new text in the button.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(149),alt:"Lazy loaded content"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you run "),s("code",[this._v("npm run build")]),this._v(", you should see something:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("Hash: 063e54c36163f79e8c90\nVersion: webpack 4.1.1\nTime: 3185ms\nBuilt at: 3/16/2018 5:04:04 PM\n               Asset       Size  Chunks             Chunk Names\nleanpub-start-insert\n            0.js.map  198 bytes       0  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n                0.js  156 bytes       0  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nleanpub-end-insert\n             main.js    2.2 KiB       2  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  main\n            main.css   1.27 KiB       2  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  main\n    vendors~main.css   2.27 KiB       1  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  vendors~main\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("That "),s("em",[this._v("0.js")]),this._v(" is your split point. Examining the file reveals that webpack has wrapped the code in a "),s("code",[this._v("webpackJsonp")]),this._v(" block and processed the code bit.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("If you want to adjust the name of the chunk, set "),s("code",[this._v("output.chunkFilename")]),this._v(". For example, setting it to "),s("code",[this._v('"chunk.[id].js"')]),this._v(' would prefix each split chunk with the word "chunk".')])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("The "),s("em",[this._v("Dynamic Loading")]),this._v(" chapter covers other techniques that come in handy when you have to deal with more complicated splits.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"code-splitting-in-react"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-splitting-in-react","aria-hidden":"true"}},[this._v("#")]),this._v(" Code Splitting in React")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"react"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Somewhere in code")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("AsyncComponent loader"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("import")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"./SomeComponent"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("AsyncComponent")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("React"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("constructor")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("super")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("componentDidMount")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("loader")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("then")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      Component "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setState")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("render")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Component "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Placeholder"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("props "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("props"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Component "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Component "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("props"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("Placeholder "),a("span",{attrs:{class:"token operator"}},[t._v("/")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nAsyncComponent"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("propTypes "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  loader"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PropTypes"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("func"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isRequired"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  Placeholder"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PropTypes"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("node"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isRequired"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"disabling-code-splitting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#disabling-code-splitting","aria-hidden":"true"}},[this._v("#")]),this._v(" Disabling Code Splitting")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" webpack "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"webpack"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LimitChunkCountPlugin")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      maxChunks"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"conclusion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conclusion","aria-hidden":"true"}},[this._v("#")]),this._v(" Conclusion")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("strong",[t._v("Code splitting")]),t._v(" comes with extra effort as you have to decide what to split and where. Often, you find good split points within a router. Or you notice that specific functionality is required only when a particular feature is used. Charting is an excellent example of this.")]),a("li",[t._v("To use dynamic "),a("code",[t._v("import")]),t._v(" syntax, both Babel and ESLint require careful tweaks. Webpack supports the syntax out of the box.")]),a("li",[t._v("Use naming to pull separate split points into the same bundles.")]),a("li",[t._v("The techniques can be used within modern frameworks and libraries like React. You can wrap related logic to a specific component that handles the loading process in a user-friendly manner.")]),a("li",[t._v("To disable code splitting, use "),a("code",[t._v("webpack.optimize.LimitChunkCountPlugin")]),t._v(" with "),a("code",[t._v("maxChunks")]),t._v(" set to one.")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("The "),s("em",[this._v("Searching with React")]),this._v(" appendix contains a complete example of code splitting. It shows how to set up a static site index that's loaded when the user searches information.")])])}],e=a(0),o=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),a("p",[t._v("Web applications tend to grow big as features are developed. The longer it takes for your application to load, the more frustrating it's to the user. This problem is amplified in a mobile environment where the connections can be slow.")]),t._m(1),a("p",[t._v("You can load more code as the user enters a new view of the application. You can also tie loading to a specific action like scrolling or clicking a button. You could also try to predict what the user is trying to do next and load code based on your guess. This way the functionality would be already there as the user tries to access it.")]),a("blockquote",[a("p",[t._v("Incidentally, it's possible to implement Google's "),a("a",{attrs:{href:"https://developers.google.com/web/fundamentals/performance/prpl-pattern/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PRPL pattern"),a("OutboundLink")],1),t._v(" using webpack's lazy loading. PRPL (Push, Render, Pre-cache, Lazy-load) has been designed with mobile web in mind.")])]),t._m(2),t._m(3),a("p",[t._v("The goal is to end up with a split point that gets loaded on demand. There can be splits inside splits, and you can structure an entire application based on splits. The advantage of doing this is that then the initial payload of your application can be smaller than it would be otherwise.")]),t._m(4),t._m(5),a("p",[t._v("The "),a("a",{attrs:{href:"https://github.com/tc39/proposal-dynamic-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("dynamic "),a("code",[t._v("import")]),t._v(" syntax"),a("OutboundLink")],1),t._v(" isn't in the official language specification yet. Minor tweaks are needed especially at the Babel setup for this reason.")]),t._m(6),t._m(7),a("p",[t._v("The optional name allows you to pull multiple split points into a single bundle. As long as they have the same name, they will be grouped. Each split point generates a separate bundle by default.")]),a("p",[t._v("The interface allows composition, and you could load multiple resources in parallel:")]),t._m(8),t._m(9),a("p",[t._v("W> The syntax works only with JavaScript after configuring it the right way. If you use another environment you may have to use alternatives covered in the following sections.")]),a("blockquote",[a("p",[t._v("There's an older syntax, "),a("a",{attrs:{href:"https://webpack.js.org/api/module-methods/#require-ensure",target:"_blank",rel:"noopener noreferrer"}},[t._v("require.ensure"),a("OutboundLink")],1),t._v(". In practice the new syntax can cover the same functionality. See also "),a("a",{attrs:{href:"https://webpack.js.org/api/module-methods/#require-include",target:"_blank",rel:"noopener noreferrer"}},[t._v("require.include"),a("OutboundLink")],1),t._v(".")])]),a("blockquote",[a("p",[a("a",{attrs:{href:"https://github.com/webpack/webpack-pwa",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-pwa"),a("OutboundLink")],1),t._v(" illustrates the idea on a larger scale and discusses different shell based approaches. You get back to this topic in the "),a("em",[t._v("Multiple Pages")]),t._v(" chapter.")])]),t._m(10),t._m(11),t._m(12),a("p",[t._v("Given Babel doesn't support the dynamic "),a("code",[t._v("import")]),t._v(" syntax out of the box, it needs "),a("a",{attrs:{href:"https://www.npmjs.com/package/@babel/plugin-syntax-dynamic-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/plugin-syntax-dynamic-import"),a("OutboundLink")],1),t._v(" to work.")]),a("p",[t._v("Install it first:")]),t._m(13),a("p",[t._v("To connect it with the project, adjust the configuration as follows:")]),t._m(14),t._m(15),t._m(16),t._m(17),a("p",[t._v("The idea can be demonstrated by setting up a module that contains a string that replaces the text of the demo button:")]),t._m(18),t._m(19),a("p",[t._v("You also need to point the application to this file, so the application knows to load it by binding the loading process to click. Whenever the user happens to click the button, you trigger the loading process and replace the content:")]),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/bundle-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("bundle-loader"),a("OutboundLink")],1),t._v(" gives similar results, but through a loader interface. It supports bundle naming through its "),a("code",[t._v("name")]),t._v(" option.")])]),t._m(28),t._m(29),a("p",[t._v("The splitting pattern can be wrapped into a React component. Airbnb uses the following solution "),a("a",{attrs:{href:"https://gist.github.com/lencioni/643a78712337d255f5c031bfc81ca4cf",target:"_blank",rel:"noopener noreferrer"}},[t._v("as described by Joe Lencioni"),a("OutboundLink")],1),t._v(":")]),t._m(30),a("blockquote",[a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/react-async-component",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-async-component"),a("OutboundLink")],1),t._v(" wraps the pattern in a "),a("code",[t._v("createAsyncComponent")]),t._v(" call and provides server side rendering specific functionality. "),a("a",{attrs:{href:"https://www.npmjs.com/package/loadable-components",target:"_blank",rel:"noopener noreferrer"}},[t._v("loadable-components"),a("OutboundLink")],1),t._v(" is another option.")])]),t._m(31),a("p",[t._v("Although code splitting is good behavior to have by default, it's not correct always, especially on server-side usage. For this reason, it can be disabled as below:")]),t._m(32),a("blockquote",[a("p",[t._v("See "),a("a",{attrs:{href:"https://medium.com/@glennreyes/how-to-disable-code-splitting-in-webpack-1c0b1754a3c5",target:"_blank",rel:"noopener noreferrer"}},[t._v("Glenn Reyes' detailed explanation"),a("OutboundLink")],1),t._v(".")])]),t._m(33),a("p",[t._v("Code splitting is a feature that allows you to push your application a notch further. You can load code when you need it to gain faster initial load times and improved user experience especially in a mobile context where bandwidth is limited.")]),a("p",[t._v("To recap:")]),t._m(34),a("p",[t._v("You'll learn to tidy up the build in the next chapter.")]),t._m(35)])},n,!1,null,null,null);o.options.__file="03_code_splitting.md";s.default=o.exports}}]);