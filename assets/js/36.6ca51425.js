(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{250:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),a("p",[t._v("The problem can be worked around by processing the code through "),a("a",{attrs:{href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Babel"),a("OutboundLink")],1),t._v(", a famous JavaScript compiler that supports ES2015+ features and more. It resembles ESLint in that it's built on top of presets and plugins. Presets are collections of plugins, and you can define your own as well.")]),a("p",[t._v("T> Given sometimes extending existing presets is not enough, "),a("a",{attrs:{href:"https://www.npmjs.com/package/modify-babel-preset",target:"_blank",rel:"noopener noreferrer"}},[t._v("modify-babel-preset"),a("OutboundLink")],1),t._v(" allows you to go a step further and configure the base preset in a more flexible way.")]),t._m(5),t._m(6),a("p",[t._v("Skipping processing is a good option primarily if you don't rely on any custom language features and work using a modern browser. Processing through Babel becomes almost a necessity when you compile your code for production, though.")]),a("p",[t._v("You can use Babel with webpack through "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-loader"),a("OutboundLink")],1),t._v(". It can pick up project level Babel configuration, or you can configure it at the webpack loader itself. "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-webpack-plugin"),a("OutboundLink")],1),t._v(" is another lesser-known option.")]),a("p",[t._v("Connecting Babel with a project allows you to process webpack configuration through it. To achieve this, name your webpack configuration using the "),a("em",[t._v("webpack.config.babel.js")]),t._v(" convention. "),a("a",{attrs:{href:"https://www.npmjs.com/package/interpret",target:"_blank",rel:"noopener noreferrer"}},[t._v("interpret"),a("OutboundLink")],1),t._v(" package enables this, and it supports other compilers as well.")]),a("p",[t._v("T> Given that "),a("a",{attrs:{href:"http://node.green/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node supports the ES2015 specification well"),a("OutboundLink")],1),t._v(" these days, you can use a lot of ES2015 features without having to process configuration through Babel.")]),t._m(7),a("p",[t._v("{pagebreak}")]),t._m(8),a("p",[t._v("The first step towards configuring Babel to work with webpack is to set up "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-loader"),a("OutboundLink")],1),t._v(". It takes the code and turns it into a format older browsers can understand. Install "),a("em",[t._v("babel-loader")]),t._v(" and include its peer dependency "),a("em",[t._v("@babel/core")]),t._v(":")]),t._m(9),a("p",[t._v("As usual, let's define a function for Babel:")]),t._m(10),t._m(11),a("p",[t._v("Next, you need to connect this to the main configuration. If you are using a modern browser for development, you can consider processing only the production code through Babel. It's used for both production and development environments in this case. Also, only application code is processed through Babel.")]),a("p",[t._v("{pagebreak}")]),a("p",[t._v("Adjust as below:")]),t._m(12),t._m(13),t._m(14),a("p",[t._v("W> If you try to import files "),a("strong",[t._v("outside")]),t._v(" of your configuration root directory and then process them through "),a("em",[t._v("babel-loader")]),t._v(", this fails. It's "),a("a",{attrs:{href:"https://github.com/babel/babel-loader/issues/313",target:"_blank",rel:"noopener noreferrer"}},[t._v("a known issue"),a("OutboundLink")],1),t._v(", and there are workarounds including maintaining "),a("em",[t._v(".babelrc")]),t._v(" at a higher level in the project and resolving against Babel presets through "),a("code",[t._v("require.resolve")]),t._v(" at webpack configuration.")]),t._m(15),a("p",[t._v("At a minimum, you need "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-preset-env",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-preset-env"),a("OutboundLink")],1),t._v(". It's a Babel preset that enables the required plugins based on the optional environment definition you pass to it.")]),a("p",[t._v("Install the preset first:")]),t._m(16),t._m(17),a("p",[t._v("Adjust the target definition as you like. As long as you follow "),a("a",{attrs:{href:"https://www.npmjs.com/package/browserslist",target:"_blank",rel:"noopener noreferrer"}},[t._v("browserslist"),a("OutboundLink")],1),t._v(", it should work. Here's a sample configuration:")]),t._m(18),t._m(19),t._m(20),a("p",[t._v("{pagebreak}")]),t._m(21),t._m(22),t._m(23),a("p",[t._v("Note especially how the function was transformed. You can try out different browser definitions and language features to see how the output changes based on the selection.")]),t._m(24),a("p",[a("em",[t._v("babel-preset-env")]),t._v(" allows you to polyfill certain language features for older browsers. For this to work, you should enable its "),a("code",[t._v("useBuiltIns")]),t._v(" option ("),a("code",[t._v('"useBuiltIns": true')]),t._v(") and install "),a("a",{attrs:{href:"https://babeljs.io/docs/usage/polyfill/",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-polyfill"),a("OutboundLink")],1),t._v(". You have to include it in your project either through an import or an entry ("),a("code",[t._v('app: ["babel-polyfill", PATHS.app]')]),t._v("). "),a("em",[t._v("babel-preset-env")]),t._v(" rewrites the import based on your browser definition and loads only the polyfills that are needed.")]),a("p",[a("em",[t._v("babel-polyfill")]),t._v(" pollutes the global scope with objects like "),a("code",[t._v("Promise")]),t._v(". Given this can be problematic for library authors, there's "),a("a",{attrs:{href:"https://babeljs.io/docs/plugins/transform-runtime/",target:"_blank",rel:"noopener noreferrer"}},[t._v("transform-runtime"),a("OutboundLink")],1),t._v(" option. It can be enabled as a Babel plugin, and it avoids the problem of globals by rewriting the code in such way that they aren't be needed.")]),t._m(25),t._m(26),a("p",[t._v("There are other possible "),a("a",{attrs:{href:"https://babeljs.io/docs/usage/options/",target:"_blank",rel:"noopener noreferrer"}},[a("em",[t._v(".babelrc")]),t._v(" options"),a("OutboundLink")],1),t._v(" beyond the ones covered here. Like ESLint, "),a("em",[t._v(".babelrc")]),t._v(" supports "),a("a",{attrs:{href:"https://www.npmjs.com/package/json5",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSON5"),a("OutboundLink")],1),t._v(" as its configuration format meaning you can include comments in your source, use single quoted strings, and so on.")]),a("p",[t._v("Sometimes you want to use experimental features that fit your project. Although you can find a lot of them within so-called stage presets, it's a good idea to enable them one by one and even organize them to a preset of their own unless you are working on a throwaway project. If you expect your project to live a long time, it's better to document the features you are using well.")]),a("p",[t._v("Babel isn't the only option although it's the most popular one. "),a("a",{attrs:{href:"https://buble.surge.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("Buble"),a("OutboundLink")],1),t._v(" by Rich Harris is another compiler worth checking out. There's experimental "),a("a",{attrs:{href:"https://www.npmjs.com/package/buble-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("buble-loader"),a("OutboundLink")],1),t._v(" that allows you to use it with webpack. Buble doesn't support ES2015 modules, but that's not a problem as webpack provides that functionality.")]),a("p",[t._v("{pagebreak}")]),t._m(27),a("p",[t._v("Perhaps the greatest thing about Babel is that it's possible to extend with plugins:")]),a("ul",[a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-import"),a("OutboundLink")],1),t._v(" rewrites module imports so that you can use a form such as "),a("code",[t._v('import { Button } from "antd";')]),t._v(" instead of pointing to the module through an exact path.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-import-asserts",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-import-asserts"),a("OutboundLink")],1),t._v(" asserts that your imports have been defined.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-jsdoc-to-assert",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-jsdoc-to-assert"),a("OutboundLink")],1),t._v(" converts "),a("a",{attrs:{href:"http://usejsdoc.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSDoc"),a("OutboundLink")],1),t._v(" annotations to runnable assertions.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-log-deprecated",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-log-deprecated"),a("OutboundLink")],1),t._v(" adds "),a("code",[t._v("console.warn")]),t._v(" to functions that have "),a("code",[t._v("@deprecate")]),t._v(" annotation in their comment.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-annotate-console-log",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-annotate-console-log"),a("OutboundLink")],1),t._v(" annotates "),a("code",[t._v("console.log")]),t._v(" calls with information about invocation context, so it's easier to see where they logged.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-sitrep",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-sitrep"),a("OutboundLink")],1),t._v(" logs all assignments of a function and prints them.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-webpack-loaders",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-webpack-loaders"),a("OutboundLink")],1),t._v(" allows you to use certain webpack loaders through Babel.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-syntax-trailing-function-commas",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-syntax-trailing-function-commas"),a("OutboundLink")],1),t._v(" adds trailing comma support for functions.")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-transform-react-remove-prop-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-transform-react-remove-prop-types"),a("OutboundLink")],1),t._v(" allows you to remove "),a("code",[t._v("propType")]),t._v(" related code from your production build. It also allows component authors to generate code that's wrapped so that setting environment at "),a("code",[t._v("DefinePlugin")]),t._v(" can kick in as discussed in the book.")])]),a("p",[t._v("T> It's possible to connect Babel with Node through "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-register",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-register"),a("OutboundLink")],1),t._v(" or "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-cli",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-cli"),a("OutboundLink")],1),t._v(". These packages can be handy if you want to execute your code through Babel without using webpack.")]),t._m(28),a("p",[t._v("Babel allows you to control which presets and plugins are used per environment through its "),a("a",{attrs:{href:"https://babeljs.io/docs/usage/babelrc/#env-option",target:"_blank",rel:"noopener noreferrer"}},[t._v("env option"),a("OutboundLink")],1),t._v(". You can manage Babel's behavior per build target this way.")]),t._m(29),a("p",[t._v("Consider the example below:")]),t._m(30),t._m(31),t._m(32),a("p",[t._v("{pagebreak}")]),a("p",[t._v("It's possible to pass the webpack environment to Babel with a tweak:")]),t._m(33),t._m(34),t._m(35),t._m(36),a("p",[t._v("Microsoft's "),a("a",{attrs:{href:"http://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript"),a("OutboundLink")],1),t._v(" is a compiled language that follows a similar setup as Babel. The neat thing is that in addition to JavaScript, it can emit type definitions. A good editor can pick those up and provide enhanced editing experience. Stronger typing is valuable for development as it becomes easier to state your type contracts.")]),a("p",[t._v("Compared to Facebook's type checker Flow, TypeScript is a more secure option. As a result, you find more premade type definitions for it, and overall, the quality of support should be better.")]),a("p",[t._v("You can use TypeScript with webpack using the following loaders:")]),a("ul",[a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/ts-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("ts-loader"),a("OutboundLink")],1)]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/awesome-typescript-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("awesome-typescript-loader"),a("OutboundLink")],1)])]),a("p",[t._v("T> There's a "),a("a",{attrs:{href:"https://www.npmjs.com/package/typescript-eslint-parser",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript parser for ESLint"),a("OutboundLink")],1),t._v(". It's also possible to lint it through "),a("a",{attrs:{href:"https://www.npmjs.com/package/tslint",target:"_blank",rel:"noopener noreferrer"}},[t._v("tslint"),a("OutboundLink")],1),t._v(".")]),t._m(37),a("p",[a("a",{attrs:{href:"https://flow.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Flow"),a("OutboundLink")],1),t._v(" performs static analysis based on your code and its type annotations. You have to install it as a separate tool and then run it against your code. There's "),a("a",{attrs:{href:"https://www.npmjs.com/package/flow-status-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("flow-status-webpack-plugin"),a("OutboundLink")],1),t._v(" that allows you to run it through webpack during development.")]),a("p",[t._v("If you use React, the React specific Babel preset does most of the work through "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-syntax-flow",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-syntax-flow"),a("OutboundLink")],1),t._v(". It can strip Flow annotations and convert your code into a format that is possible to transpile further.")]),a("p",[t._v("There's also "),a("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-typecheck",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-typecheck"),a("OutboundLink")],1),t._v(" that allows you to perform runtime checks based on your Flow annotations. "),a("a",{attrs:{href:"https://codemix.github.io/flow-runtime/",target:"_blank",rel:"noopener noreferrer"}},[t._v("flow-runtime"),a("OutboundLink")],1),t._v(" goes a notch further and provides more functionality. These approaches complement Flow static checker and allow you to catch even more issues.")]),a("p",[t._v("T> "),a("a",{attrs:{href:"https://www.npmjs.com/package/flow-coverage-report",target:"_blank",rel:"noopener noreferrer"}},[t._v("flow-coverage-report"),a("OutboundLink")],1),t._v(" shows how much of your code is covered by Flow type annotations.")]),a("p",[t._v("{pagebreak}")]),t._m(38),a("p",[t._v("Babel has become an indispensable tool for developers given it bridges the standard with older browsers. Even if you targeted modern browsers, transforming through Babel is an option.")]),a("p",[t._v("To recap:")]),t._m(39)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"loading-javascript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#loading-javascript","aria-hidden":"true"}},[this._v("#")]),this._v(" Loading JavaScript")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Webpack processes ES2015 module definitions by default and transforms them into code. It does "),e("strong",[this._v("not")]),this._v(" transform specific syntax, such as "),e("code",[this._v("const")]),this._v(", though. The resulting code can be problematic especially in the older browsers.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To get a better idea of the default transform, consider the example output below ("),e("code",[this._v("npm run build -- --devtool false --mode development")]),this._v("):")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("dist/main.js")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_exports__"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n__webpack_require__"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("r")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__webpack_exports__"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/* harmony default export */")]),t._v(" __webpack_exports__"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"default"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("text "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Hello world"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" element "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"div"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("className "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"pure-button"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"using-babel-with-webpack-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#using-babel-with-webpack-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Using Babel with Webpack Configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Even though Babel can be used standalone, as you can see in the "),e("em",[this._v("SurviveJS - Maintenance")]),this._v(" book, you can hook it up with webpack as well. During development, it can make sense to skip processing if you are using language features supported by your browser.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("W> If you use "),e("em",[this._v("webpack.config.babel.js")]),this._v(", take care with the "),e("code",[this._v('"modules": false,')]),this._v(" setting. If you want to use ES2015 modules, you could skip the setting in your global Babel configuration and then configure it per environment as discussed below.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"setting-up-babel-loader"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-babel-loader","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Up "),e("em",[this._v("babel-loader")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),e("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" babel-loader @babel/core --save-dev\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("webpack.parts.js")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("exports"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("loadJavaScript")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" include"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exclude "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token regex"}},[t._v("/\\.js$/")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        include"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exclude"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"babel-loader"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("webpack.config.js")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" commonConfig "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("merge")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\nleanpub"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("start"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n  parts"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("loadJavaScript")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" include"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nleanpub"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("end"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Even though you have Babel installed and set up, you are still missing one bit: Babel configuration. The configuration can be set up using a "),e("em",[this._v(".babelrc")]),this._v(" dotfile as then other tooling can use the same.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"setting-up-babelrc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-babelrc","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Up "),e("em",[this._v(".babelrc")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),e("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" @babel/preset-env --save-dev\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To make Babel aware of the preset, you need to write a "),e("em",[this._v(".babelrc")]),this._v(". Given webpack supports ES2015 modules out of the box, you can tell Babel to skip processing them. Jumping over this step would break webpack's HMR mechanism although the production build would still work. You can also constrain the build output to work only in recent versions of Chrome.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v(".babelrc")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v('"@babel/preset-env"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"modules"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you execute "),e("code",[this._v("npm run build -- --devtool false --mode development")]),this._v(" now and examine "),e("em",[this._v("dist/main.js")]),this._v(", you will see something different based on your "),e("code",[this._v(".browserslistrc")]),this._v(" file.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Try to include only a definition like "),e("code",[this._v("IE 8")]),this._v(" there, and the code should change accordingly:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("dist/main.js")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/***/")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("module"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_exports__"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" __webpack_require__"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{attrs:{class:"token string"}},[t._v('"use strict"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n__webpack_require__"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("r")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__webpack_exports__"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("/* harmony default export */")]),t._v(" __webpack_exports__"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v('"default"')]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" text "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" arguments"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" arguments"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("!==")]),t._v(" undefined "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" arguments"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"Hello world"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" element "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"div"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("className "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"pure-button"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" text"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"polyfilling-features"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#polyfilling-features","aria-hidden":"true"}},[this._v("#")]),this._v(" Polyfilling Features")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("W> Certain webpack features, such as "),e("em",[this._v("Code Splitting")]),this._v(", write "),e("code",[this._v("Promise")]),this._v(" based code to webpack's bootstrap after webpack has processed loaders. The problem can be solved by applying a shim before your application code is executed. Example: "),e("code",[this._v('entry: { app: ["core-js/es6/promise", PATHS.app] }')]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"babel-tips"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-tips","aria-hidden":"true"}},[this._v("#")]),this._v(" Babel Tips")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"babel-plugins"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#babel-plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" Babel Plugins")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"enabling-presets-and-plugins-per-environment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#enabling-presets-and-plugins-per-environment","aria-hidden":"true"}},[this._v("#")]),this._v(" Enabling Presets and Plugins per Environment")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[a("code",[t._v("env")]),t._v(" checks both "),a("code",[t._v("NODE_ENV")]),t._v(" and "),a("code",[t._v("BABEL_ENV")]),t._v(" and adds functionality to your build based on that. If "),a("code",[t._v("BABEL_ENV")]),t._v(" is set, it overrides any possible "),a("code",[t._v("NODE_ENV")]),t._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v(".babelrc")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ...\n  "),a("span",{attrs:{class:"token property"}},[t._v('"env"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"development"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token property"}},[t._v('"plugins"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token string"}},[t._v('"annotate-console-log"')]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Any shared presets and plugins are available to all targets still. "),e("code",[this._v("env")]),this._v(" allows you to specialize your Babel configuration further.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("webpack.config.js")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("module"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" mode "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\nleanpub"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("start"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n  process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token constant"}},[t._v("BABEL_ENV")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" mode"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nleanpub"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("end"),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n\n  "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("T> The way "),e("code",[this._v("env")]),this._v(" works is subtle. Consider logging "),e("code",[this._v("env")]),this._v(" and make sure it matches your Babel configuration or otherwise the functionality you expect is not applied to your build.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"setting-up-typescript"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-typescript","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Up TypeScript")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"setting-up-flow"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-flow","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Up Flow")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"conclusion"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#conclusion","aria-hidden":"true"}},[this._v("#")]),this._v(" Conclusion")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Babel gives you control over what browsers to support. It can compile ES2015+ features to a form the older browser understand. "),e("em",[this._v("babel-preset-env")]),this._v(" is valuable as it can choose which features to compile and which polyfills to enable based on your browser definition.")]),e("li",[this._v("Babel allows you to use experimental language features. You can find numerous plugins that improve development experience and the production build through optimizations.")]),e("li",[this._v("Babel functionality can be enabled per development target. This way you can be sure you are using the correct plugins at the right place.")]),e("li",[this._v("Besides Babel, webpack supports other solutions like TypeScript or Flow. Flow can complement Babel while TypeScript represents an entire language compiling to JavaScript.")])])}],!1,null,null,null);n.options.__file="04_javascript.md";e.default=n.exports}}]);