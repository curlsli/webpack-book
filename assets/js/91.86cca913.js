(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{187:function(t,a,s){"use strict";s.r(a);var n=s(0),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"content"},[t._m(0),s("p",[t._v("从webpack 4开始，默认情况下使用UglifyJS压缩生产输出。也就是说，了解技术和进一步的可能性是很好的。")]),t._m(1),t._m(2),s("p",[t._v("不安全的转换可能会破坏代码，因为它们可能会丢失底层代码所依赖的隐含内容。例如，Angular1.x在使用模块时需要特定的函数参数命名。除非在这种情况下采取预防措施，否则重写参数会破坏代码。")]),t._m(3),t._m(4),s("p",[t._v("为了调整默认值，我们将"),s("a",{attrs:{href:"https://www.npmjs.com/package/uglifyjs-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("uglifyjs-webpack-plugin"),s("OutboundLink")],1),t._v("附加到项目中，以便可以对其进行调整。")]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),s("blockquote",[s("p",[t._v("要从结果源中删除 "),s("code",[t._v("console.log")]),t._v(" 调用，请将 "),s("code",[t._v("uglifyOptions.compress.drop_console")]),t._v(" 设置为 "),s("code",[t._v("true")]),t._v(" 。在"),s("a",{attrs:{href:"https://stackoverflow.com/questions/49101152/webpack-v4-remove-console-logs-with-webpack-uglify",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stack Overflow"),s("OutboundLink")],1),t._v(" 中有详细讨论。")])]),t._m(13),t._m(14),s("ul",[s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/babel-minify-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-minify-webpack-plugin"),s("OutboundLink")],1),t._v(" 依赖于 "),s("a",{attrs:{href:"https://www.npmjs.com/package/babel-preset-minify",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-preset-minify"),s("OutboundLink")],1),t._v(" 它是由Babel团队开发的。但它比UglifyJS要慢。")]),s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/webpack-closure-compiler",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-closure-compiler"),s("OutboundLink")],1),t._v("时并行运行，并且有时比 "),s("code",[t._v("babel-minify-webpack-plugin")]),t._v(" 的结果更小。 "),s("a",{attrs:{href:"https://www.npmjs.com/package/closure-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("closure-webpack-plugin"),s("OutboundLink")],1),t._v(" 是另一个选择。")]),s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/butternut-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("butternut-webpack-plugin"),s("OutboundLink")],1),t._v(" 使用Rich Harris开发的 "),s("a",{attrs:{href:"https://www.npmjs.com/package/butternut",target:"_blank",rel:"noopener noreferrer"}},[t._v("butternut"),s("OutboundLink")],1),t._v(" 实现压缩。")])]),t._m(15),s("p",[t._v("特定的解决方案允许你预处理代码，以便它运行得更快。它们补充了缩小技术，可以分为“范围提升”，“预评估”和“改进解析”。这些技术有时可能会增加整体包大小，同时允许更快的执行速度。")]),t._m(16),s("p",[t._v("从webpack4.x开始，它默认在生产模式下应用作用域提升。它将所有模块提升到单个作用域，而不是为每个模块编写单独的闭包。这样做会减慢构建速度，但会为你提供执行速度更快的构建包。[阅读有关作用域提升的更多信息]（https://medium.com/webpack/brief-introduction-to-scope-hoisting-in-webpack-8435084c171f）在webpack博客上。")]),t._m(17),t._m(18),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/prepack-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("prepack-webpack-plugin"),s("OutboundLink")],1),t._v(" 使用了 "),s("a",{attrs:{href:"https://prepack.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prepack"),s("OutboundLink")],1),t._v("，它是一个部分JavaScript计算器。它重写了可以在编译时完成的计算，从而加快了代码执行速度。另请参阅"),s("a",{attrs:{href:"https://www.npmjs.com/package/val-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("val-loader"),s("OutboundLink")],1),t._v(" 和 "),s("a",{attrs:{href:"https://www.npmjs.com/package/babel-plugin-preval",target:"_blank",rel:"noopener noreferrer"}},[t._v("babel-plugin-preval"),s("OutboundLink")],1),t._v("替代解决方案。")]),t._m(19),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/optimize-js-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("optimize-js-plugin"),s("OutboundLink")],1),t._v("通过包装eager函数来补充其他解决方案，并且它增强了最初解析JavaScript代码的方式。该插件依赖于Nolan Lawson的"),s("a",{attrs:{href:"https://github.com/nolanlawson/optimize-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("optimize-js"),s("OutboundLink")],1),t._v("。")]),t._m(20),s("p",[t._v("如果你使用"),s("a",{attrs:{href:"https://www.npmjs.com/package/html-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("html-loader"),s("OutboundLink")],1),t._v("来处理项目中使用的HTML模板，则可以通过"),s("a",{attrs:{href:"https://www.npmjs.com/package/posthtml",target:"_blank",rel:"noopener noreferrer"}},[t._v("posthtml"),s("OutboundLink")],1),t._v("与"),s("a",{attrs:{href:"https://www.npmjs.com/package/posthtml-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("posthtml-loader"),s("OutboundLink")],1),t._v("对其进行预处理。你可以使用"),s("a",{attrs:{href:"https://www.npmjs.com/package/posthtml-minifier",target:"_blank",rel:"noopener noreferrer"}},[t._v("posthtml-minifier"),s("OutboundLink")],1),t._v("通过它缩小HTML。")]),t._m(21),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/clean-css-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("clean-css-loader"),s("OutboundLink")],1),t._v(" 允许你使用流行的CSS压缩工具 "),s("a",{attrs:{href:"https://www.npmjs.com/package/clean-css",target:"_blank",rel:"noopener noreferrer"}},[t._v("clean-css"),s("OutboundLink")],1),t._v("。")]),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/optimize-css-assets-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("optimize-css-assets-webpack-plugin"),s("OutboundLink")],1),t._v(" 是一个基于插件的方案，它将用minifier来处理CSS静态资源。使用 "),s("code",[t._v("MiniCssExtractPlugin")]),t._v(" 会导致结果包含重复的CSS，因为它只是合并文本块。 "),s("code",[t._v("OptimizeCSSAssetsPlugin")]),t._v(" 通过对生成的结果进一步的处理来避免这个问题，从而可以产生更好的结果。")]),t._m(22),s("p",[t._v("在可用的解决方案中，"),s("code",[t._v("OptimizeCSSAssetsPlugin")]),t._v(" 是最佳的选择。要使用它，首先安装 "),s("a",{attrs:{href:"http://cssnano.co/",target:"_blank",rel:"noopener noreferrer"}},[t._v("cssnano"),s("OutboundLink")],1),t._v(" 依赖：")]),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),s("blockquote",[s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/compression-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("compression-webpack-plugin"),s("OutboundLink")],1),t._v(" 允许你将生成压缩文件的问题推送到webpack，从而可能节省在服务器上的处理时间。")])]),t._m(31),s("p",[t._v("图片的大小的压缩，你可以使用 "),s("a",{attrs:{href:"https://www.npmjs.com/package/img-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("img-loader"),s("OutboundLink")],1),t._v("，"),s("a",{attrs:{href:"https://www.npmjs.com/package/imagemin-webpack",target:"_blank",rel:"noopener noreferrer"}},[t._v("imagemin-webpack"),s("OutboundLink")],1),t._v("，和 "),s("a",{attrs:{href:"https://www.npmjs.com/package/imagemin-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("imagemin-webpack-plugin"),s("OutboundLink")],1),t._v("。这些包使用底层的图片优化工具。")]),s("p",[t._v("使用 "),s("code",[t._v("cache-loader")]),t._v(" 和 "),s("code",[t._v("thread-loader")]),t._v(" 这些loader可能是一个好主意，正如 "),s("a",{attrs:{href:"https://lvzhenbang.github.io/webpack-book/zh/optimizing/07_performance.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("性能")]),s("OutboundLink")],1),t._v(" 这章所述，因为它们做了一些实质性的操作。")]),t._m(32),s("p",[t._v("为了使你的构建更小，压缩是你可以采取的最最合适的操作。")]),s("p",[t._v("内容回顾：")]),t._m(33),s("p",[t._v("在下一章中，将详细的介绍如何对构建结果执行tree-shaking。")])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩","aria-hidden":"true"}},[this._v("#")]),this._v(" 压缩")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"压缩js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩js","aria-hidden":"true"}},[this._v("#")]),this._v(" 压缩js")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[a("code",[this._v("压缩")]),this._v("的目的是将代码转换为更小的形式。安全地"),a("code",[this._v("转换")]),this._v("通过重写代码而不会失去任何意义。这方面的好例子包括重命名变量，甚至根据它们无法访问的事实删除整个代码块（"),a("code",[this._v("if（false）")]),this._v("）。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"修改javascript压缩过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改javascript压缩过程","aria-hidden":"true"}},[this._v("#")]),this._v(" 修改JavaScript压缩过程")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("在webpack 4中，通过两个配置字段控制压缩过程："),a("code",[this._v("optimization.minimize")]),this._v("标志以切换它和"),a("code",[this._v("optimization.minimizer")]),this._v("数组来配置压缩过程。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("首先，在项目中，安装 "),a("code",[this._v("uglifyjs-webpack-plugin")]),this._v(" 依赖：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),a("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" uglifyjs-webpack-plugin --save-dev\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("然后，在 "),a("code",[this._v("webpack.parts.js")]),this._v(" 中定义一个函数：")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" UglifyWebpackPlugin "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"uglifyjs-webpack-plugin"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nexports"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-variable function"}},[t._v("minifyJavaScript")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  optimization"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    minimizer"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("UglifyWebpackPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" sourceMap"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("紧接着，在 "),a("code",[this._v("webpack.config.js")]),this._v(" 中引入上面定义的函数：")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" productionConfig "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("merge")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  parts"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("clean")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  parts"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("minifyJavaScript")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("运行 "),a("code",[this._v("npm run build")]),this._v(" 脚本命令，你应该看到与之前相同的结果。结果可能略好一些，因为你可能会以这种方式使用较新版本的UglifyJS。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[this._v("默认情况下禁用源映射。你可以通过 "),a("code",[this._v("sourceMap")]),this._v(" 选项启用它们。你应该查看 "),a("code",[this._v("uglifyjs-webpack-plugin")]),this._v(" 官方文档以获取更多选项。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"压缩javascript的其它方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩javascript的其它方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 压缩JavaScript的其它方法")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("虽然默认值和 "),a("code",[this._v("uglifyjs-webpack-plugin")]),this._v(" 都适用于此demo，但你可以考虑其他的方案：")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"加快javascript执行速度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加快javascript执行速度","aria-hidden":"true"}},[this._v("#")]),this._v(" 加快JavaScript执行速度")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"提升作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提升作用域","aria-hidden":"true"}},[this._v("#")]),this._v(" 提升作用域")])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[this._v("将 "),a("code",[this._v("--display-optimization-bailout")]),this._v(" 标志传递给webpack，以获取与提升结果相关的调试信息。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"pre-evaluation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pre-evaluation","aria-hidden":"true"}},[this._v("#")]),this._v(" Pre-evaluation")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"改进parseing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改进parseing","aria-hidden":"true"}},[this._v("#")]),this._v(" 改进parseing")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"压缩-html"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩-html","aria-hidden":"true"}},[this._v("#")]),this._v(" 压缩 HTML")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"压缩-css"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩-css","aria-hidden":"true"}},[this._v("#")]),this._v(" 压缩 CSS")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h3",{attrs:{id:"配置-css-压缩"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-css-压缩","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 CSS 压缩")])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),a("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" optimize-css-assets-webpack-plugin cssnano --save-dev\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("然后，在 "),a("code",[this._v("webpack.parts.js")]),this._v(" 中定义下面这样一个函数：")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" OptimizeCSSAssetsPlugin "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{attrs:{class:"token string"}},[t._v('"optimize-css-assets-webpack-plugin"')]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cssnano "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("require")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token string"}},[t._v('"cssnano"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nexports"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function-variable function"}},[t._v("minifyCSS")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" options "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{attrs:{class:"token class-name"}},[t._v("OptimizeCSSAssetsPlugin")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      cssProcessor"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" cssnano"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      cssProcessorOptions"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" options"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      canPrint"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("false")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("blockquote",[a("p",[this._v("如果你向webpack传入"),a("code",[this._v("--json")]),this._v(" 参数，它在 "),a("code",[this._v("构建分析")]),this._v(" 这章中有详细的介绍。你应该为插件设置 "),a("code",[this._v("canPrint：false")]),this._v("。")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("然后，在 "),a("code",[this._v("webpack.config.js")]),this._v(" 中引入上面定义的函数：")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" productionConfig "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("merge")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  parts"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("minifyJavaScript")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  parts"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("minifyCSS")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    options"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      discardComments"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        removeAll"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{attrs:{class:"token comment"}},[t._v("// Run cssnano in safe mode to avoid")]),t._v("\n      "),s("span",{attrs:{class:"token comment"}},[t._v("// potentially unsafe transformations.")]),t._v("\n      safe"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("运行 "),a("code",[this._v("npm run build")]),this._v(" 脚本命令，然后查看输出，你应该注意到CSS已经变小了，因为它缺少了注释：")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("Hash: f51ecf99e0da4db99834\nVersion: webpack 4.1.1\nTime: 3125ms\nBuilt at: 3/16/2018 5:32:55 PM\n           Asset       Size  Chunks             Chunk Names\n      chunk.0.js  162 bytes       0  "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      chunk.1.js   96.8 KiB       1  "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  vendors~main\n         main.js   2.19 KiB       2  "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  main\n        main.css    1.2 KiB       2  "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  main\nvendors~main.css   1.32 KiB       1  "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  vendors~main\n  chunk.0.js.map  204 bytes       0  "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  chunk.1.js.map    235 KiB       1  "),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  vendors~main\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"压缩-images"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩-images","aria-hidden":"true"}},[this._v("#")]),this._v(" 压缩 Images")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("如果使用安全转换，"),a("code",[this._v("压缩")]),this._v("过程会分析你的源代码，并将其转换为具有相同含义的较小形式。特定的不安全转换允许你达到更小的结果，同时可能破坏依赖于精确参数命名的代码。")]),a("li",[this._v("Webpack默认使用UglifyJS在生产模式下执行压缩。其他解决方案，例如"),a("code",[this._v("babel-minify-webpack-plugin")]),this._v("，提供与其自身成本相似的功能。")]),a("li",[this._v("除了JavaScript之外，还可以压缩其他静态资源，例如CSS，HTML和图像。压缩它们需要特定的技术支持，这些技术必须通过自己的loader和插件来使用。")])])}],!1,null,null,null);e.options.__file="01_minifying.md";a.default=e.exports}}]);