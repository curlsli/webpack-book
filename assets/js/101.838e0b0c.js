(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{140:function(t,s){t.exports="data:image/png;base64,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"},149:function(t,s,a){t.exports=a.p+"assets/img/ssr.b1293b4a.png"},183:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"服务端渲染"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务端渲染","aria-hidden":"true"}},[this._v("#")]),this._v(" 服务端渲染")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("服务端渲染")]),this._v(" (SSR) 是一种允许你使用HTML，JavaScript，CSS，甚至应用程序状态来提供初始有效负载的技术。即使没有启用JavaScript，你也可以提供完全呈现的HTML页面。除了提供潜在的性能优势外，这还有助于搜索引擎优化（SEO）。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("SSR 不仅解决了 SEO 的问题。"),s("strong",[this._v("Prerendering")]),this._v(" 也是一种可选择的技术，如果它适合你的用例，实现起来更容易。这种方法不适用于高动态数据。[prerender-spa-plugin]（https://www.npmjs.com/package/prerender-spa-plugin）允许你使用webpack实现它。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"使用react配置babel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用react配置babel","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用React配置Babel")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Loading JavaScript *章节介绍了使用Babel和webpack的基本要点。不过，你应该添加执行React特有的选项。考虑到大多数React项目依赖于[JSX]（https://facebook.github.io/jsx/）格式，你可以通过Babel启用它。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" @babel/preset-react --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v(".babelrc")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ...\n  "),a("span",{attrs:{class:"token property"}},[t._v('"presets"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v('"@babel/preset-react"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ...\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"创建一个react示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建一个react示例","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建一个React示例")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" react react-dom --save\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("接下来，React代码需要一个小入口点。如果你在浏览器端，则应将 "),s("code",[this._v("Hello world``div")]),this._v(" 挂载到文档中。要证明它有效，单击它应该弹出一个带有“hello”消息的对话框。在服务器端，返回React组件，服务器可以接收它。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("修改 "),s("strong",[this._v("src/ssr.js")]),this._v(" 代码如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" React "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"react"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ReactDOM "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"react-dom"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("SSR")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("<")]),t._v("div onClick"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("alert")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"hello"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token operator"}},[t._v(">")]),t._v("Hello world"),a("span",{attrs:{class:"token operator"}},[t._v("<")]),a("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// Render only in the browser, export otherwise")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" document "),a("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"undefined"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("SSR")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ReactDOM"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("hydrate")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("SSR")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"app"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("注意ES2015的import规范和CommonJS的export不能混合。入口点是用CommonJS规范编写的。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"配置-webpack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-webpack","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 Webpack")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("webpack.ssr.js")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"path"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" merge "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"webpack-merge"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parts "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"./webpack.parts"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  build"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("join")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"static"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ssrDemo"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("join")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"src"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ssr.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("merge")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    mode"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"production"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    entry"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      index"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssrDemo"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    output"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      path"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      filename"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"[name].js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      libraryTarget"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"umd"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      globalObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"this"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  parts"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("loadJavaScript")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" include"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ssrDemo "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("package.json")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"build:ssr"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"webpack --config webpack.ssr.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("运行 "),s("code",[this._v("npm run build:ssr")]),this._v(" 脚本命令，你应该在 "),s("em",[this._v("./static/index.js")]),this._v(" 中看到一个新文件。下一步是设置服务器来呈现它。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"创建一个server"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建一个server","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建一个Server")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" express --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("server.js")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" express "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"express"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" renderToString "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"react-dom/server"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token constant"}},[t._v("SSR")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"./static"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token function"}},[t._v("server")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token constant"}},[t._v("PORT")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("8080")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("server")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("express")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("use")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("express"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("static")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"static"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"/"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n    res"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("status")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("200")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("send")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("renderMarkup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token function"}},[t._v("renderToString")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token constant"}},[t._v("SSR")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("listen")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("renderMarkup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v('`<!DOCTYPE html>\n<html>\n  <head>\n    <title>Webpack SSR Demo</title>\n    <meta charset="utf-8" />\n  </head>\n  <body>\n    <div id="app">')]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("html"),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v('</div>\n    <script src="./index.js"></scrip>\n  </body>\n</html>`')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("运行 "),s("code",[this._v("node ./server.js")]),this._v(" 脚本命令启动服务器，然后在浏览器中访问 "),s("code",[this._v("http://localhost:8080")]),this._v(" ，你将看到如下的显示：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(140),alt:"Hello world"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("虽然现在可以运行React应用程序，但是使用它继续开发也不方便。如果你尝试修改代码，则不会发生任何事情。如本书前面所述，在multi-compiler模式下，运行webpack可以解决该问题。另一种选择是针对当前配置，使用 "),s("strong",[this._v("监视模式")]),this._v(" 运行webpack，同时也为服务器设置监视器。接下来将讲解如何实现。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("如果你要调试输出的结果你可以设置为 "),s("code",[this._v("export DEBUG=express:application")]),this._v(" 。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"监视-ssr-的改变，然后刷新浏览器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监视-ssr-的改变，然后刷新浏览器","aria-hidden":"true"}},[this._v("#")]),this._v(" 监视 SSR 的改变，然后刷新浏览器")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在终端中运行 "),s("code",[this._v("npm run build：ssr - --watch")]),this._v(" 脚本，可以解决无法动态处理ssr.js变化的问题。这迫使webpack以监视模式运行。为方便起见，可以在npm脚本中实现这个想法，这对于演示示例来说已经足够了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" browser-refresh --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("server.js")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("server")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token constant"}},[t._v("PORT")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("8080")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("server")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// app.listen(port);")]),t._v("\n  app"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("listen")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("send "),a("span",{attrs:{class:"token operator"}},[t._v("&&")]),t._v(" process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("send")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v('"online"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("renderMarkup")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("html"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v('`<!DOCTYPE html>\n<html>\n  ...\n  <body>\n    ...\n    <script src="')]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("process"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token constant"}},[t._v("BROWSER_REFRESH_URL")]),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v('"><\/script>\n  </body>\n</html>`')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("另开一个客户端，执行 "),a("code",[t._v("node_modules/.bin/browser-refresh ./server.js")]),t._v(" 脚本命令，然后再浏览器中访问 "),a("code",[t._v("http://localhost:8080")]),t._v(" 。另开启一个终端，让webpack在监视模式下运行（"),a("code",[t._v("npm run build：ssr - --watch")]),t._v("）。 如果一切正常，你对演示客户端脚本（"),a("code",[t._v("app/ssr.js")]),t._v("）所做的任何更改，都将显示在浏览器中。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:a(149),alt:"SSR output"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 "),s("code",[this._v("div")]),this._v(" 中不仅可以挂载应用程序，你还可以在那里看到所有相关的HTML。这种特殊情况并不多，但它足以展示这种方法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("可以通过为服务器实现生产模式来进一步改进，该模式将至少跳过注入浏览器刷新脚本。服务器可以将初始数据有效负载注入生成的HTML中。 这样做可以避免客户端的查询。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"open-questions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#open-questions","aria-hidden":"true"}},[this._v("#")]),this._v(" Open Questions")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("如何处理样式？ Node不理解CSS相关的导入。")]),s("li",[this._v("如何处理除JavaScript之外的任何事情？如果服务器端是通过webpack处理的，那么这不是一个问题，因为你可以在webpack上修补它。")]),s("li",[this._v("如何通过Node之外的其他东西运行服务器？一种选择是将Node实例包装在服务中，然后通过主机环境运行。理想情况下，结果将被缓存，你可以为每个平台找到更具体的解决方案。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("路由是它自己解决的一个大问题，如：Next.js这样的框架。Patrick Hund在[Universal JavaScript Apps with React Router 4]（https://ebaytech.berlin/universal-web-apps-with-react-router-4-15002bb30ccb）文章中讨论了如何解决该问题。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("服务器端渲染可以为浏览器提供更多初始化渲染。你可以立即显示标记，而不是等待JavaScript加载。")]),s("li",[this._v("服务器端渲染还允许你将初始数据的有效负载传递到客户端，以避免对服务器进行不必要的查询。")]),s("li",[this._v("Webpack可以管理的客户端的部分实现。如果需要更集成的解决方案，它也可用于生成服务器，如：Next.js（它实现了这些细节）。")]),s("li",[this._v("服务器端渲染不是没有成本的，它会导致新的问题，因为你需要更好的方法来处理这方面的问题，如：样式或路由。服务器和客户端环境的基本方式不同，因此编写代码需要注意，以使其不依赖于特定平台的功能。")])])}],e=a(0),r=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),a("p",[t._v("这个想法不仅听起来不那么独特，还存在技术成本。这种方法由React推广。为了解决框架封装的棘手问题，如：[Next.js]（https://www.npmjs.com/package/next）和[razzle]（https://www.npmjs.com/package/razzle）的依赖出现了。")]),a("p",[t._v("为了演示SSR，你可以使用webpack编译客户端构建，然后由服务器接收，该服务器遵循原则使用React呈现它。这样做足以了解它是如何工作的，以及问题。")]),t._m(2),t._m(3),t._m(4),a("p",[t._v("要让React，尤其是JSX与Babel一起工作，首先安装预设：")]),t._m(5),a("p",[t._v("像下面这样，在babel配置中引入react预设：")]),t._m(6),t._m(7),t._m(8),a("p",[t._v("要确保项目具有有相关依赖，需安装React和[react-dom]（https://www.npmjs.com/package/react-dom）。然后定义一个包来将应用程序呈现给DOM。")]),t._m(9),t._m(10),t._m(11),t._m(12),a("p",[t._v("你仍然缺少webpack配置来将此文件转换为服务器可以接收的内容。")]),t._m(13),t._m(14),a("p",[t._v("为了保持友好，我们将定义一个单独的配置文件。它已经完成了很多工作。考虑到你需要在多个环境中使用相同的输出，因此使用UMD作为库目标是有意义的：")]),t._m(15),t._m(16),a("p",[t._v("为了方便生成构建，可以添加下面这样一个脚本：")]),t._m(17),t._m(18),t._m(19),t._m(20),a("p",[t._v("为了清楚地理解，你可以配置一个独立的Express服务器来获取生成的构建生成包，并按照SSR原理呈现它。首先安装Express：")]),t._m(21),a("p",[t._v("然后，为了运行一些东西，按如下方式实现服务器：")]),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),a("blockquote",[a("p",[t._v("如果你按照 "),a("a",{attrs:{href:"https://lvzhenbang.github.io/webpack-book/dist/zh/optimizing/05_separating_manifest.html",target:"_blank",rel:"noopener noreferrer"}},[a("em",[t._v("分离出一个清单")]),a("OutboundLink")],1),t._v(" 章节中的讲的那样编写manifest，则可以将对webpack生成的资产的引用自动写入服务器端模板。")])]),t._m(28),t._m(29),a("p",[t._v("如何让服务器知道改变，以及如何将改变传递到浏览器？")]),a("p",[t._v("[browser-refresh]（https://www.npmjs.com/package/browser-refresh）可以派上用场，因为它解决了这两个问题。")]),a("p",[t._v("首先，在项目中安装这个依赖：")]),t._m(30),a("p",[t._v("需要对服务器代码进行两处小的修改：")]),t._m(31),t._m(32),a("p",[t._v("第一个修改告诉客户端应用程序已联机并准备就绪。后一个修改将客户端脚本附加到输出中。 * browser-refresh *管理有问题的环境变量。")]),t._m(33),a("p",[t._v("如果服务器崩溃，则会丢失WebSocket连接。在这种情况下，你必须在浏览器中强制刷新。如果服务器也是通过webpack管理的，那么问题就可以避免。")]),a("p",[t._v("要证明SSR有效，请查看浏览器检查器。你应该看到熟悉的东西：")]),t._m(34),t._m(35),t._m(36),t._m(37),a("p",[t._v("尽管该示例演示了SSR的基本概念，但它仍然存在悬而未决的问题：")]),t._m(38),a("p",[t._v("像这样的问题就是Next.js或razzle等解决方案存在的原因。它们旨在解决这些特定于SSR的问题。")]),t._m(39),t._m(40),a("p",[t._v("SSR带来了技术挑战，因此围绕它出现了特定的解决方案。Webpack非常适合SSR设置。")]),a("p",[t._v("内容回顾：")]),t._m(41)])},n,!1,null,null,null);r.options.__file="03_server_side_rendering.md";s.default=r.exports}}]);