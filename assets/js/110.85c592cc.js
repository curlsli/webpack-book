(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{256:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),a("p",[a("a",{attrs:{href:"https://www.npmjs.com/package/gh-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("gh-pages"),a("OutboundLink")],1),t._v(" 允许你轻松地在 "),a("code",[t._v("GitHub Pages")]),t._v(" 上托管独立的应用程序。首先必须指向构建目录。它赋值指定内容，并将它们推送到 "),a("code",[t._v("gh-pages")]),t._v(" 分支。")]),a("p",[t._v("不管它的名称是什么，该包可以与支持Git存储库托管的其他服务一起使用。鉴于GitHub的受欢迎程度，可以用它来进行验证。在实践中，你可能会有更复杂的配置，通过持续集成系统将结果推送到另一个服务。")]),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),a("p",[t._v("在这种情况下，将其设置为指向GitHub项目就足够了，如下所示：")]),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),a("p",[t._v("即使你可以将部署问题放到webpack之外，但有一些特定于webpack的实用程序可以派上用场：")]),a("ul",[a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/webpack-deploy",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-deploy"),a("OutboundLink")],1),t._v(" 是部署应用程序的集合，甚至可以在webpack之外工作。")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/webpack-s3-sync-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-s3-sync-plugin"),a("OutboundLink")],1),t._v(" 和 "),a("a",{attrs:{href:"https://www.npmjs.com/package/webpack-s3-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-s3-plugin"),a("OutboundLink")],1),t._v(" 将静态资源同步到 Amazon。")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/ssh-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("ssh-webpack-plugin"),a("OutboundLink")],1),t._v(" 专为SSH部署而设计。")]),a("li",[a("a",{attrs:{href:"https://www.npmjs.com/package/now-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("now-loader"),a("OutboundLink")],1),t._v(" 在资源级别上运行，并允许你将特定资源部署到Now托管服务。")])]),a("blockquote",[a("p",[t._v("要访问生成的文件及其路径，请考虑使用"),a("a",{attrs:{href:"https://www.npmjs.com/package/assets-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("assets-webpack-plugin"),a("OutboundLink")],1),t._v("。路径信息允许你在部署时将webpack与其他环境集成。")])]),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),a("p",[t._v("虽然webpack不是部署工具，但你可以找到相关的插件，使其具有部署功能。")]),a("p",[t._v("内容回顾：")]),t._m(27),a("p",[t._v("在下一章中，将详细的介绍如何在webpack中使用依赖包。")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"部署应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署应用","aria-hidden":"true"}},[this._v("#")]),this._v(" 部署应用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("使用webpack构建的项目可以部署到各种环境中。可以使用 "),s("code",[this._v("gh-pages")]),this._v(" 包将不依赖后端的公共项目推送到 "),s("code",[this._v("GitHub Pages")]),this._v("。此外，还有各种webpack插件可以针对其他环境，例如S3。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"用-gh-pages-部署应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用-gh-pages-部署应用","aria-hidden":"true"}},[this._v("#")]),this._v(" 用 "),s("code",[this._v("gh-pages")]),this._v(" 部署应用")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"引入-gh-pages-依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#引入-gh-pages-依赖","aria-hidden":"true"}},[this._v("#")]),this._v(" 引入 "),s("code",[this._v("gh-pages")]),this._v(" 依赖")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("首先，安装 "),s("code",[this._v("gh-pages")]),this._v(" 依赖到项目：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" gh-pages --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("然后，在 "),s("code",[this._v("package.json")]),this._v(" 中配置快捷命令：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("package.json")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"deploy"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"gh-pages -d build"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("要使静态资源路径在 "),s("code",[this._v("GitHub Pages")]),this._v(" 上运行，必须调整 "),s("code",[this._v("output.publicPath")]),this._v(" 字段。否则，静态资源路径最终指向根，除非你直接在域根(例如"),s("code",[this._v("survivaljs.com")]),this._v(")之后托管，否则这不起作用。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("例如，"),s("code",[this._v("publicPath")]),this._v(" 控制你访问 "),s("code",[this._v("index.html")]),this._v(" 时看到结果的url。如果你在CDN上托管静态资源，这里就是需要调整的地方。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("webpack.config.js")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" productionConfig "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("merge")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    output"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// Needed for code splitting to work in nested paths")]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v('// publicPath: "/",')]),t._v("\n      "),a("span",{attrs:{class:"token comment"}},[t._v("// Tweak this to match your GitHub project name")]),t._v("\n      publicPath"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"/webpack-demo/"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("运行 "),a("code",[t._v("npm run build")]),t._v(" 脚本命令后，执行 "),a("code",[t._v("npm run deploy")]),t._v(" 命令，你应该从 "),a("code",[t._v("GitHub Pages")]),t._v("上托管的 "),a("code",[t._v("build/")]),t._v(" 目录中获取你的应用程序。然后在浏览器中，访问 "),a("code",[t._v("https://<name>.github.io/<project>")]),t._v(" ，并查看结果。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("如果你需要更精细的控制，请使用 "),s("code",[this._v("gh-pages")]),this._v(" 提供的Node API。但通常情况下，它提供的默认命令行工具足以满足基本目的。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[a("code",[t._v("GitHub Pages")]),t._v(" 允许你选择部署的分支。即使对于不需要打包的最小站点来说，它也可以使用"),a("code",[t._v("master")]),t._v(" 分支。你还可以指向 "),a("code",[t._v("master")]),t._v(" 分支中的 "),a("code",[t._v("./docs")]),t._v(" 目录下方并维护你的站点。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"将旧版本存档管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将旧版本存档管理","aria-hidden":"true"}},[this._v("#")]),this._v(" 将旧版本存档管理")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("gh-pages")]),this._v(" 为存档目的提供"),s("code",[this._v("add")]),this._v("选项。 这个想法如下：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("将旧版本的站点复制到临时目录中，并从中删除 "),s("code",[this._v("archive")]),this._v(" 目录。 你可以根据需要命名存档目录。")]),s("li",[this._v("清理并构建项目。")]),s("li",[this._v("复制以下旧版本 "),s("code",[this._v("build/archive/<version>")])]),s("li",[this._v("设置脚本以通过Node调用* gh-pages *，如下所示，并捕获回调中可能的错误：")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("ghpages"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("publish")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("join")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"build"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" add"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"部署到其它环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署到其它环境","aria-hidden":"true"}},[this._v("#")]),this._v(" 部署到其它环境")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("为确保在部署新版本后，依赖旧版构建包的客户端仍然有效，请不要删除旧文件，直到它们足够大。你可以对部署时要删除的内容执行特定检查，而不是删除每个旧的静态资源。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"动态的解析-output-publicpath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#动态的解析-output-publicpath","aria-hidden":"true"}},[this._v("#")]),this._v(" 动态的解析 "),s("code",[this._v("output.publicPath")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果你事先不知道 "),s("code",[this._v("publicPath")]),this._v("，则可以通过以下步骤，根据环境解决它：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("设置 "),a("code",[t._v("__webpack_public_path__ = window.myDynamicPublicPath;")]),t._v(" 在应用程序入口点，并根据需要调整它。")]),a("li",[t._v("从项目配置中移除 "),a("code",[t._v("output.publicPath")]),t._v(" 选项。")]),a("li",[t._v("如果你使用的是ESLint，通过"),a("code",[t._v("globals.__webpack_public_path__: true")]),t._v(" ，将它设置为忽略全局。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("编译时，webpack选择 "),s("code",[this._v("__webpack_public_path__")]),this._v(" 并重写它，使其指向webpack逻辑。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("可以处理webpack之外的部署问题。如，可以在npm脚本中实现此目的。")]),s("li",[this._v("你可以动态配置webpack的 "),s("code",[this._v("output.publicPath")]),this._v(" 。如果你不知道compile-time，并希望在这之后下决定，这种技术很有用。可以通过 "),s("code",[this._v("__webpack_public_path__")]),this._v(" global来实现。")])])}],!1,null,null,null);n.options.__file="05_deploying.md";s.default=n.exports}}]);