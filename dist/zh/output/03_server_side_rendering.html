<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>服务端渲染 | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/dist/assets/css/styles.2815151f.css" as="style"><link rel="preload" href="/webpack-book/dist/assets/js/app.2815151f.js" as="script"><link rel="preload" href="/webpack-book/dist/assets/js/101.f91835c7.js" as="script"><link rel="prefetch" href="/webpack-book/dist/assets/js/39.23556d83.js"><link rel="prefetch" href="/webpack-book/dist/assets/css/1.styles.55ac1f3c.css"><link rel="prefetch" href="/webpack-book/dist/assets/js/1.55ac1f3c.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/2.0bcfd9a6.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/3.b71846be.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/4.123394f5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/5.a1df9d68.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/6.cf960ab0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/7.8aff2653.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/8.b2b0e672.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/9.23d1b6a1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/10.c89aa233.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/11.119b346d.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/12.6b2d8011.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/13.90135418.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/14.d7c5902b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/15.82740151.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/16.9feeb5a8.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/17.7dafc840.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/18.86520a22.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/19.06aa1f0f.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/20.a1ea82cc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/21.83e64e3c.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/22.fa5231b5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/23.d68f173f.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/24.c362fcbc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/25.dbe72d2b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/26.51e49fea.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/27.44b8cce2.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/28.bdd8149d.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/29.53f3a6a3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/30.8d53b342.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/31.54701dd5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/32.7b95cfca.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/33.12767367.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/34.e8f937ff.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/35.0116a5ee.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/36.4577296e.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/37.664aef77.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/38.905219c1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/40.3cf8f3a9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/41.5f19363b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/42.53051f20.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/43.5f7005a3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/44.501e283a.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/45.8928a712.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/46.09909576.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/47.24159ecf.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/48.05bd4e93.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/49.bd5f02a3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/50.98dd3729.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/51.75a16507.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/52.2600380f.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/53.6bc22a60.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/54.9ee44c32.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/55.0292288e.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/56.ee93b099.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/57.2ac7ace9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/58.afff402a.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/59.6ef84ad3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/60.90d3264b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/61.03440db3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/62.bcb571bb.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/63.4908a7ca.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/64.8e0106d7.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/65.5837f196.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/66.48d46f1e.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/67.6f397c77.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/68.811563e4.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/69.0951460b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/70.b8918784.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/71.3cf15c56.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/72.45e5d4a1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/73.64a4530c.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/74.55c32af9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/75.50767dc1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/76.ac663f00.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/77.a6c805a6.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/78.2f4d9a87.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/79.c5070066.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/80.a4df8a94.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/81.5955e495.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/82.451f5f9a.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/83.b88550c0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/84.c53c0eb4.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/85.cefcaebc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/86.136acab7.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/87.fd12cdba.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/88.00a8eadc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/89.2f79953e.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/90.14cff6a9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/91.d164cf98.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/92.5f9f33b5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/93.255542ba.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/94.e13bca86.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/95.488dbedc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/96.5413f710.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/97.70cc2691.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/98.2f176607.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/99.ef01748b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/100.8df8d78b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/102.13ca9142.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/103.521eafa3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/104.d16546c0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/105.76ce0f67.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/106.a15b86d2.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/107.63c49e77.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/108.5dab2706.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/109.0ceece9d.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/110.31b11593.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/111.3a552df9.js">
    <link rel="stylesheet" href="/webpack-book/dist/assets/css/styles.2815151f.css"><link rel="stylesheet" href="/webpack-book/dist/assets/css/1.styles.55ac1f3c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/dist/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/dist/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/dist/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><a href="/webpack-book/dist/" class="sidebar-link">简介</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>指南</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>开发</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>样式</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>加载静态资源</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>构建</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>优化</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>输出</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/dist/zh/output/01_targets.html" class="sidebar-link">构建目标</a></li><li><a href="/webpack-book/dist/zh/output/02_multiple_pages.html" class="sidebar-link">构建多页面应用</a></li><li><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html" class="active sidebar-link">服务端渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html#使用react配置babel" class="sidebar-link">使用React配置Babel</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html#创建一个react示例" class="sidebar-link">创建一个React示例</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html#配置-webpack" class="sidebar-link">配置 Webpack</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html#创建一个server" class="sidebar-link">创建一个Server</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html#监视-ssr-的改变，然后刷新浏览器" class="sidebar-link">监视 SSR 的改变，然后刷新浏览器</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html#open-questions" class="sidebar-link">Open Questions</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/output/03_server_side_rendering.html#总结" class="sidebar-link">总结</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>技术</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>扩展</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="服务端渲染"><a href="#服务端渲染" aria-hidden="true" class="header-anchor">#</a> 服务端渲染</h1><p><strong>服务端渲染</strong> (SSR) 是一种允许你使用HTML，JavaScript，CSS，甚至应用程序状态来提供初始有效负载的技术。即使没有启用JavaScript，你也可以提供完全呈现的HTML页面。除了提供潜在的性能优势外，这还有助于搜索引擎优化（SEO）。</p><p>这个想法不仅听起来不那么独特，还存在技术成本。这种方法由React推广。为了解决框架封装的棘手问题，如：[Next.js]（https://www.npmjs.com/package/next）和[razzle]（https://www.npmjs.com/package/razzle）的依赖出现了。</p><p>为了演示SSR，你可以使用webpack编译客户端构建，然后由服务器接收，该服务器遵循原则使用React呈现它。这样做足以了解它是如何工作的，以及问题。</p><blockquote><p>SSR 不仅解决了 SEO 的问题。<strong>Prerendering</strong> 也是一种可选择的技术，如果它适合你的用例，实现起来更容易。这种方法不适用于高动态数据。[prerender-spa-plugin]（https://www.npmjs.com/package/prerender-spa-plugin）允许你使用webpack实现它。</p></blockquote><h2 id="使用react配置babel"><a href="#使用react配置babel" aria-hidden="true" class="header-anchor">#</a> 使用React配置Babel</h2><ul><li>Loading JavaScript *章节介绍了使用Babel和webpack的基本要点。不过，你应该添加执行React特有的选项。考虑到大多数React项目依赖于[JSX]（https://facebook.github.io/jsx/）格式，你可以通过Babel启用它。</li></ul><p>要让React，尤其是JSX与Babel一起工作，首先安装预设：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @babel/preset-react --save-dev
</code></pre></div><p>像下面这样，在babel配置中引入react预设：</p><p><strong>.babelrc</strong></p><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;@babel/preset-react&quot;</span><span class="token punctuation">,</span>
    ...
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="创建一个react示例"><a href="#创建一个react示例" aria-hidden="true" class="header-anchor">#</a> 创建一个React示例</h2><p>要确保项目具有有相关依赖，需安装React和[react-dom]（https://www.npmjs.com/package/react-dom）。然后定义一个包来将应用程序呈现给DOM。</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> react react-dom --save
</code></pre></div><p>接下来，React代码需要一个小入口点。如果你在浏览器端，则应将 <code>Hello world``div</code> 挂载到文档中。要证明它有效，单击它应该弹出一个带有“hello”消息的对话框。在服务器端，返回React组件，服务器可以接收它。</p><p>修改 <strong>src/ssr.js</strong> 代码如下：</p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ReactDOM <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">SSR</span> <span class="token operator">=</span> <span class="token operator">&lt;</span>div onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Hello world<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// Render only in the browser, export otherwise</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> document <span class="token operator">===</span> <span class="token string">&quot;undefined&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token constant">SSR</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  ReactDOM<span class="token punctuation">.</span><span class="token function">hydrate</span><span class="token punctuation">(</span><span class="token constant">SSR</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你仍然缺少webpack配置来将此文件转换为服务器可以接收的内容。</p><blockquote><p>注意ES2015的import规范和CommonJS的export不能混合。入口点是用CommonJS规范编写的。</p></blockquote><h2 id="配置-webpack"><a href="#配置-webpack" aria-hidden="true" class="header-anchor">#</a> 配置 Webpack</h2><p>为了保持友好，我们将定义一个单独的配置文件。它已经完成了很多工作。考虑到你需要在多个环境中使用相同的输出，因此使用UMD作为库目标是有意义的：</p><p><strong>webpack.ssr.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack-merge&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> parts <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.parts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">PATHS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  build<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  ssrDemo<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ssr.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    mode<span class="token punctuation">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
    entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      index<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>ssrDemo<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>build<span class="token punctuation">,</span>
      filename<span class="token punctuation">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
      libraryTarget<span class="token punctuation">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span>
      globalObject<span class="token punctuation">:</span> <span class="token string">&quot;this&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  parts<span class="token punctuation">.</span><span class="token function">loadJavaScript</span><span class="token punctuation">(</span><span class="token punctuation">{</span> include<span class="token punctuation">:</span> <span class="token constant">PATHS</span><span class="token punctuation">.</span>ssrDemo <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>为了方便生成构建，可以添加下面这样一个脚本：</p><p><strong>package.json</strong></p><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;build:ssr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --config webpack.ssr.js&quot;</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>运行 <code>npm run build:ssr</code> 脚本命令，你应该在 <em>./static/index.js</em> 中看到一个新文件。下一步是设置服务器来呈现它。</p><h2 id="创建一个server"><a href="#创建一个server" aria-hidden="true" class="header-anchor">#</a> 创建一个Server</h2><p>为了清楚地理解，你可以配置一个独立的Express服务器来获取生成的构建生成包，并按照SSR原理呈现它。首先安装Express：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> express --save-dev
</code></pre></div><p>然后，为了运行一些东西，按如下方式实现服务器：</p><p><strong>server.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> renderToString <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;react-dom/server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">SSR</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./static&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">server</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">server</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token keyword">static</span><span class="token punctuation">(</span><span class="token string">&quot;static&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token function">renderMarkup</span><span class="token punctuation">(</span><span class="token function">renderToString</span><span class="token punctuation">(</span><span class="token constant">SSR</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderMarkup</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Webpack SSR Demo&lt;/title&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>html<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;
    &lt;script src=&quot;./index.js&quot;&gt;&lt;/scrip&gt;
  &lt;/body&gt;
&lt;/html&gt;`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行 <code>node ./server.js</code> 脚本命令启动服务器，然后在浏览器中访问 <code>http://localhost:8080</code> ，你将看到如下的显示：</p><p><img src="data:image/png;base64,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" alt="Hello world"></p><p>虽然现在可以运行React应用程序，但是使用它继续开发也不方便。如果你尝试修改代码，则不会发生任何事情。如本书前面所述，在multi-compiler模式下，运行webpack可以解决该问题。另一种选择是针对当前配置，使用 <strong>监视模式</strong> 运行webpack，同时也为服务器设置监视器。接下来将讲解如何实现。</p><blockquote><p>如果你要调试输出的结果你可以设置为 <code>export DEBUG=express:application</code> 。</p></blockquote><blockquote><p>如果你按照 <a href="https://lvzhenbang.github.io/webpack-book/dist/zh/optimizing/05_separating_manifest.html" target="_blank" rel="noopener noreferrer"><em>分离出一个清单</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 章节中的讲的那样编写manifest，则可以将对webpack生成的资产的引用自动写入服务器端模板。</p></blockquote><h2 id="监视-ssr-的改变，然后刷新浏览器"><a href="#监视-ssr-的改变，然后刷新浏览器" aria-hidden="true" class="header-anchor">#</a> 监视 SSR 的改变，然后刷新浏览器</h2><p>在终端中运行 <code>npm run build：ssr - --watch</code> 脚本，可以解决无法动态处理ssr.js变化的问题。这迫使webpack以监视模式运行。为方便起见，可以在npm脚本中实现这个想法，这对于演示示例来说已经足够了。</p><p>如何让服务器知道改变，以及如何将改变传递到浏览器？</p><p>[browser-refresh]（https://www.npmjs.com/package/browser-refresh）可以派上用场，因为它解决了这两个问题。</p><p>首先，在项目中安装这个依赖：</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> browser-refresh --save-dev
</code></pre></div><p>需要对服务器代码进行两处小的修改：</p><p><strong>server.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">server</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">server</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>

  <span class="token comment">// app.listen(port);</span>
  app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> process<span class="token punctuation">.</span>send <span class="token operator">&amp;&amp;</span> process<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;online&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">renderMarkup</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`&lt;!DOCTYPE html&gt;
&lt;html&gt;
  ...
  &lt;body&gt;
    ...
    &lt;script src=&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BROWSER_REFRESH_URL</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>第一个修改告诉客户端应用程序已联机并准备就绪。后一个修改将客户端脚本附加到输出中。 * browser-refresh *管理有问题的环境变量。</p><p>另开一个客户端，执行 <code>node_modules/.bin/browser-refresh ./server.js</code> 脚本命令，然后再浏览器中访问 <code>http://localhost:8080</code> 。另开启一个终端，让webpack在监视模式下运行（<code>npm run build：ssr - --watch</code>）。 如果一切正常，你对演示客户端脚本（<code>app/ssr.js</code>）所做的任何更改，都将显示在浏览器中。</p><p>如果服务器崩溃，则会丢失WebSocket连接。在这种情况下，你必须在浏览器中强制刷新。如果服务器也是通过webpack管理的，那么问题就可以避免。</p><p>要证明SSR有效，请查看浏览器检查器。你应该看到熟悉的东西：</p><p><img src="/webpack-book/dist/assets/img/ssr.b1293b4a.png" alt="SSR output"></p><p>在 <code>div</code> 中不仅可以挂载应用程序，你还可以在那里看到所有相关的HTML。这种特殊情况并不多，但它足以展示这种方法。</p><blockquote><p>可以通过为服务器实现生产模式来进一步改进，该模式将至少跳过注入浏览器刷新脚本。服务器可以将初始数据有效负载注入生成的HTML中。 这样做可以避免客户端的查询。</p></blockquote><h2 id="open-questions"><a href="#open-questions" aria-hidden="true" class="header-anchor">#</a> Open Questions</h2><p>尽管该示例演示了SSR的基本概念，但它仍然存在悬而未决的问题：</p><ul><li>如何处理样式？ Node不理解CSS相关的导入。</li><li>如何处理除JavaScript之外的任何事情？如果服务器端是通过webpack处理的，那么这不是一个问题，因为你可以在webpack上修补它。</li><li>如何通过Node之外的其他东西运行服务器？一种选择是将Node实例包装在服务中，然后通过主机环境运行。理想情况下，结果将被缓存，你可以为每个平台找到更具体的解决方案。</li></ul><p>像这样的问题就是Next.js或razzle等解决方案存在的原因。它们旨在解决这些特定于SSR的问题。</p><blockquote><p>路由是它自己解决的一个大问题，如：Next.js这样的框架。Patrick Hund在[Universal JavaScript Apps with React Router 4]（https://ebaytech.berlin/universal-web-apps-with-react-router-4-15002bb30ccb）文章中讨论了如何解决该问题。</p></blockquote><h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2><p>SSR带来了技术挑战，因此围绕它出现了特定的解决方案。Webpack非常适合SSR设置。</p><p>内容回顾：</p><ul><li>服务器端渲染可以为浏览器提供更多初始化渲染。你可以立即显示标记，而不是等待JavaScript加载。</li><li>服务器端渲染还允许你将初始数据的有效负载传递到客户端，以避免对服务器进行不必要的查询。</li><li>Webpack可以管理的客户端的部分实现。如果需要更集成的解决方案，它也可用于生成服务器，如：Next.js（它实现了这些细节）。</li><li>服务器端渲染不是没有成本的，它会导致新的问题，因为你需要更好的方法来处理这方面的问题，如：样式或路由。服务器和客户端环境的基本方式不同，因此编写代码需要注意，以使其不依赖于特定平台的功能。</li></ul></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/zh/output/03_server_side_rendering.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/dist/zh/output/02_multiple_pages.html" class="prev">
          构建多页面应用
        </a></span><span class="next"><a href="/webpack-book/dist/zh/techniques/01_dynamic_loading.html">
          Dynamic Loading
        </a> →
      </span></p></div><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/webpack-book/dist/assets/js/101.f91835c7.js" defer></script><script src="/webpack-book/dist/assets/js/app.2815151f.js" defer></script>
  </body>
</html>
