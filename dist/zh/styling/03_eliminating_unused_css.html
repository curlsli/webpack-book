<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Eliminating Unused CSS | webpack surviveJS</title>
    <meta name="description" content="webpack SruriveJS">
    
    
    <link rel="preload" href="/webpack-book/dist/assets/css/styles.6a0ce08f.css" as="style"><link rel="preload" href="/webpack-book/dist/assets/js/app.6a0ce08f.js" as="script"><link rel="preload" href="/webpack-book/dist/assets/js/104.4331b797.js" as="script"><link rel="prefetch" href="/webpack-book/dist/assets/js/39.23556d83.js"><link rel="prefetch" href="/webpack-book/dist/assets/css/1.styles.55ac1f3c.css"><link rel="prefetch" href="/webpack-book/dist/assets/js/1.55ac1f3c.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/2.0bcfd9a6.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/3.b71846be.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/4.0148a882.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/5.cb7f6734.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/6.cf960ab0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/7.8aff2653.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/8.b2b0e672.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/9.23d1b6a1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/10.dbf725f0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/11.5f1816e5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/12.702bce71.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/13.90135418.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/14.d7c5902b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/15.f9ab99d0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/16.9feeb5a8.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/17.b8259f10.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/18.86520a22.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/19.06aa1f0f.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/20.a1ea82cc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/21.83e64e3c.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/22.7cabceb0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/23.d68f173f.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/24.c362fcbc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/25.dbe72d2b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/26.51e49fea.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/27.44b8cce2.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/28.bdd8149d.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/29.53f3a6a3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/30.8d53b342.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/31.54701dd5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/32.7b95cfca.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/33.12767367.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/34.e8f937ff.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/35.0116a5ee.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/36.4577296e.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/37.664aef77.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/38.905219c1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/40.3cf8f3a9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/41.5f19363b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/42.2c756443.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/43.5f7005a3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/44.501e283a.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/45.652f8997.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/46.46fde3ed.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/47.dd579050.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/48.05bd4e93.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/49.c37908a5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/50.98dd3729.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/51.75a16507.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/52.2600380f.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/53.6bc22a60.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/54.9ee44c32.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/55.0292288e.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/56.ee93b099.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/57.2ac7ace9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/58.afff402a.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/59.6ef84ad3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/60.90d3264b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/61.03440db3.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/62.bcb571bb.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/63.4908a7ca.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/64.8e0106d7.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/65.e0b788b8.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/66.4d5df543.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/67.9d6db054.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/68.372f2285.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/69.0951460b.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/70.e99254ef.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/71.3cf15c56.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/72.28885b2c.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/73.64a4530c.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/74.55c32af9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/75.50767dc1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/76.ac663f00.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/77.ee1a43d9.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/78.2f4d9a87.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/79.c5070066.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/80.a4df8a94.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/81.5955e495.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/82.451f5f9a.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/83.b88550c0.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/84.c53c0eb4.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/85.cefcaebc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/86.136acab7.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/87.fd12cdba.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/88.69eae1ca.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/89.b456219d.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/90.55ae22fc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/91.d384e698.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/92.5f9f33b5.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/93.255542ba.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/94.e13bca86.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/95.488dbedc.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/96.5413f710.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/97.70cc2691.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/98.2f176607.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/99.443fdfb2.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/100.c8262adf.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/101.b1db9816.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/102.e2ddeb84.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/103.b3619eba.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/105.36bc39b1.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/106.a15b86d2.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/107.63c49e77.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/108.5dab2706.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/109.0ceece9d.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/110.31b11593.js"><link rel="prefetch" href="/webpack-book/dist/assets/js/111.3a552df9.js">
    <link rel="stylesheet" href="/webpack-book/dist/assets/css/styles.6a0ce08f.css"><link rel="stylesheet" href="/webpack-book/dist/assets/css/1.styles.55ac1f3c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/webpack-book/dist/" class="home-link router-link-active"><!----><span class="site-name">
      webpack surviveJS
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/dist/zh/styling/03_eliminating_unused_css.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/dist/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">选择语言</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/webpack-book/dist/zh/styling/03_eliminating_unused_css.html" class="nav-link router-link-exact-active router-link-active">简体中文</a></li><li class="dropdown-item"><!----><a href="/webpack-book/dist/en/" class="nav-link">English</a></li></ul></div></div><a href="https://github.com/lvzhenbang/webpack-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><div class="carbon-ads"></div><ul class="sidebar-links"><li><a href="/webpack-book/dist/" class="sidebar-link">简介</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>指南</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>开发</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>技术</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>样式</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/webpack-book/dist/zh/styling/01_loading.html" class="sidebar-link">加载样式</a></li><li><a href="/webpack-book/dist/zh/styling/02_separating_css.html" class="sidebar-link">分割 CSS</a></li><li><a href="/webpack-book/dist/zh/styling/03_eliminating_unused_css.html" class="active sidebar-link">Eliminating Unused CSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/styling/03_eliminating_unused_css.html#setting-up-pure-css" class="sidebar-link">Setting Up Pure.css</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/styling/03_eliminating_unused_css.html#enabling-purifycss" class="sidebar-link">Enabling PurifyCSS</a></li><li class="sidebar-sub-header"><a href="/webpack-book/dist/zh/styling/03_eliminating_unused_css.html#conclusion" class="sidebar-link">Conclusion</a></li></ul></li><li><a href="/webpack-book/dist/zh/styling/04_autoprefixing.html" class="sidebar-link">Autoprefixing</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>加载</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>输出</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>构建</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>优化</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>扩展</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>附录</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="eliminating-unused-css"><a href="#eliminating-unused-css" aria-hidden="true" class="header-anchor">#</a> Eliminating Unused CSS</h1><p>Frameworks like <a href="https://getbootstrap.com/" target="_blank" rel="noopener noreferrer">Bootstrap<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> tend to come with a lot of CSS. Often you use only a small part of it. Typically, you bundle even the unused CSS. It's possible, however, to eliminate the portions you aren't using.</p><p><a href="https://www.npmjs.com/package/purifycss" target="_blank" rel="noopener noreferrer">PurifyCSS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a tool that can achieve this by analyzing files. It walks through your code and figures out which CSS classes are being used. Often there is enough information for it to strip unused CSS from your project. It also works with single page applications to an extent.</p><p><a href="https://www.npmjs.com/package/uncss" target="_blank" rel="noopener noreferrer">uncss<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a good alternative to PurifyCSS. It operates through PhantomJS and performs its work differently. You can use uncss itself as a PostCSS plugin.</p><p>W&gt; You have to be careful if you are using CSS Modules. You have to <strong>whitelist</strong> the related classes as discussed in <a href="https://github.com/webpack-contrib/purifycss-webpack#usage-with-css-modules" target="_blank" rel="noopener noreferrer">purifycss-webpack readme<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p><h2 id="setting-up-pure-css"><a href="#setting-up-pure-css" aria-hidden="true" class="header-anchor">#</a> Setting Up Pure.css</h2><p>To make the demo more realistic, let's install <a href="http://purecss.io/" target="_blank" rel="noopener noreferrer">Pure.css<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, a small CSS framework, as well and refer to it from the project so that you can see PurifyCSS in action. These two projects aren't related in any way despite the naming.</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> purecss --save
</code></pre></div><p>To make the project aware of Pure.css, <code>import</code> it:</p><p><strong>src/index.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token string">&quot;purecss&quot;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
</code></pre></div><p>T&gt; The <code>import</code> works because webpack will resolve against <code>&quot;browser&quot;: &quot;build/pure-min.css&quot;,</code> field in the <em>package.json</em> file of Pure.css due to <a href="https://webpack.js.org/configuration/resolve/#resolve-mainfields" target="_blank" rel="noopener noreferrer">resolve.mainFields<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Webpack will try to resolve possible <code>browser</code> and <code>module</code> fields before looking into <code>main</code>.</p><p>You should also make the demo component use a Pure.css class, so there is something to work with:</p><p><strong>src/component.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>text <span class="token operator">=</span> <span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  element<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">&quot;pure-button&quot;</span><span class="token punctuation">;</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> text<span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>If you run the application (<code>npm start</code>), the &quot;Hello world&quot; should look like a button.</p><p><img src="images/styled-button.png" alt="Styled hello"></p><p>Building the application (<code>npm run build</code>) should yield output:</p><div class="language-bash extra-class"><pre class="language-bash"><code>Hash: 36bff4e71a3f746d46fa
Version: webpack 4.1.1
Time: 739ms
Built at: 3/16/2018 4:26:49 PM
     Asset       Size  Chunks             Chunk Names
   main.js  747 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
  main.css   16.1 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
index.html  220 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre></div><p>As you can see, the size of the CSS file grew, and this is something to fix with PurifyCSS.</p><h2 id="enabling-purifycss"><a href="#enabling-purifycss" aria-hidden="true" class="header-anchor">#</a> Enabling PurifyCSS</h2><p>Using PurifyCSS can lead to significant savings. In the example of the project, they purify and minify Bootstrap (140 kB) in an application using ~40% of its selectors to mere ~35 kB. That's a big difference.</p><p><a href="https://www.npmjs.com/package/purifycss-webpack" target="_blank" rel="noopener noreferrer">purifycss-webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> allows to achieve similar results. You should use the <code>MiniCssExtractPlugin</code> with it for the best results. Install it and a <a href="https://www.npmjs.org/package/glob" target="_blank" rel="noopener noreferrer">glob<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> helper first:</p><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> glob purifycss-webpack purify-css --save-dev
</code></pre></div><p>You also need PurifyCSS configuration as below:</p><p><strong>webpack.parts.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> PurifyCSSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;purifycss-webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">purifyCSS</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> paths <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">PurifyCSSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> paths <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Next, the part has to be connected with the configuration. It's essential the plugin is used <em>after</em> the <code>MiniCssExtractPlugin</code>; otherwise, it doesn't work:</p><p><strong>webpack.config.js</strong></p><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">...</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> glob <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;glob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> parts <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./webpack.parts&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">PATHS</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token operator">...</span>

<span class="token keyword">const</span> productionConfig <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token operator">...</span>
  parts<span class="token punctuation">.</span><span class="token function">purifyCSS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    paths<span class="token punctuation">:</span> glob<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">PATHS</span><span class="token punctuation">.</span>app<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/**/*.js`</span></span><span class="token punctuation">,</span> <span class="token punctuation">{</span> nodir<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>W&gt; The order matters. CSS extraction has to happen before purifying.</p><p>If you execute <code>npm run build</code> now, you should see something:</p><div class="language-bash extra-class"><pre class="language-bash"><code>Hash: 36bff4e71a3f746d46fa
Version: webpack 4.1.1
Time: 695ms
Built at: 3/16/2018 4:29:54 PM
     Asset       Size  Chunks             Chunk Names
   main.js  747 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
  main.css   2.07 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
index.html  220 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre></div><p>The size of the style has decreased noticeably. Instead of 16k, you have roughly 2k now. The difference would be even more significant for more massive CSS frameworks.</p><p>PurifyCSS supports <a href="https://github.com/purifycss/purifycss#the-optional-options-argument" target="_blank" rel="noopener noreferrer">additional options<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> including <code>minify</code>. You can enable these through the <code>purifyOptions</code> field when instantiating the plugin. Given PurifyCSS cannot pick all of the classes you are always using, you should use <code>purifyOptions.whitelist</code> array to define selectors which it should leave in the result no matter what.</p><p>W&gt; Using PurifyCSS loses CSS source maps even if you have enabled them with loader specific configuration due to the way it works underneath.</p><h3 id="critical-path-rendering"><a href="#critical-path-rendering" aria-hidden="true" class="header-anchor">#</a> Critical Path Rendering</h3><p>The idea of <a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/" target="_blank" rel="noopener noreferrer">critical path rendering<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> takes a look at CSS performance from a different angle. Instead of optimizing for size, it optimizes for render order and emphasizes <strong>above-the-fold</strong> CSS. The result is achieved by rendering the page and then figuring out which rules are required to obtain the shown result.</p><p><a href="https://www.npmjs.com/package/webpack-critical" target="_blank" rel="noopener noreferrer">webpack-critical<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="https://www.npmjs.com/package/html-critical-webpack-plugin" target="_blank" rel="noopener noreferrer">html-critical-webpack-plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> implement the technique as a <code>HtmlWebpackPlugin</code> plugin. <a href="https://www.npmjs.com/package/isomorphic-style-loader" target="_blank" rel="noopener noreferrer">isomorphic-style-loader<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> achieves the same using webpack and React.</p><p><a href="https://github.com/addyosmani/critical-path-css-tools" target="_blank" rel="noopener noreferrer">critical-path-css-tools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> by Addy Osmani lists other related tools.</p><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" class="header-anchor">#</a> Conclusion</h2><p>Using PurifyCSS can lead to a significant decrease in file size. It's mainly valuable for static sites that rely on a massive CSS framework. The more dynamic a site or an application becomes, the harder it becomes to analyze reliably.</p><p>To recap:</p><ul><li>Eliminating unused CSS is possible using PurifyCSS. It performs static analysis against the source.</li><li>The functionality can be enabled through <em>purifycss-webpack</em>, and the plugin should be applied <em>after</em><code>MiniCssExtractPlugin</code>.</li><li>At best, PurifyCSS can eliminate most, if not all, unused CSS rules.</li><li>Critical path rendering is another CSS technique that emphasizes rendering the above-the-fold CSS first. The idea is to render something as fast as possible instead of waiting for all CSS to load.</li></ul><p>In the next chapter, you'll learn to <strong>autoprefix</strong>. Enabling the feature makes it more convenient to develop complicated CSS setups that work with older browsers as well.</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/lvzhenbang/webpack-book/edit/dev/docs/zh/styling/03_eliminating_unused_css.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/webpack-book/dist/zh/styling/02_separating_css.html" class="prev">
          分割 CSS
        </a></span><span class="next"><a href="/webpack-book/dist/zh/styling/04_autoprefixing.html">
          Autoprefixing
        </a> →
      </span></p></div><div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></div></div></div>
    <script src="/webpack-book/dist/assets/js/104.4331b797.js" defer></script><script src="/webpack-book/dist/assets/js/app.6a0ce08f.js" defer></script>
  </body>
</html>
