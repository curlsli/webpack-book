(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{255:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),s("p",[s("a",{attrs:{href:"https://www.npmjs.com/package/gh-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("gh-pages"),s("OutboundLink")],1),t._v(" allows you to host stand-alone applications on GitHub Pages easily. It has to be pointed to a build directory first. It picks up the contents and pushes them to the "),s("code",[t._v("gh-pages")]),t._v(" branch.")]),s("p",[t._v("Despite its name, the package works with other services that support hosting from a Git repository as well. But given GitHub is so popular, it can be used to demonstrate the idea. In practice, you would likely have more complicated setup in place that would push the result to another service through a Continuous Integration system.")]),t._m(3),s("p",[t._v("To get started, execute")]),t._m(4),s("p",[t._v("{pagebreak}")]),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),s("p",[t._v("In this case, it's enough to set it to point the GitHub project as below:")]),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),s("ol",[t._m(17),s("li",[t._v("Clean and build the project.")]),s("li",[t._v("Copy the old version below "),s("em",[t._v("build/archive/"),s("version")],1)]),t._m(18)]),t._m(19),t._m(20),s("p",[t._v("Even though you can push the problem of deployment outside of webpack, there are a couple of webpack specific utilities that come in handy:")]),s("ul",[s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/webpack-deploy",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-deploy"),s("OutboundLink")],1),t._v(" is a collection of deployment utilities and works even outside of webpack.")]),s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/webpack-s3-sync-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-s3-sync-plugin"),s("OutboundLink")],1),t._v(" and "),s("a",{attrs:{href:"https://www.npmjs.com/package/webpack-s3-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-s3-plugin"),s("OutboundLink")],1),t._v(" sync the assets to Amazon.")]),s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/ssh-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("ssh-webpack-plugin"),s("OutboundLink")],1),t._v(" has been designed for deployments over SSH.")]),s("li",[s("a",{attrs:{href:"https://www.npmjs.com/package/now-loader",target:"_blank",rel:"noopener noreferrer"}},[t._v("now-loader"),s("OutboundLink")],1),t._v(" operates on resource level and allows you to deploy specific resources to Now hosting service.")])]),s("p",[t._v("T> To get access to the generated files and their paths, consider using "),s("a",{attrs:{href:"https://www.npmjs.com/package/assets-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("assets-webpack-plugin"),s("OutboundLink")],1),t._v(". The path information allows you to integrate webpack with other environments while deploying.")]),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),s("p",[t._v("Even though webpack isn't a deployment tool, you can find plugins for it.")]),s("p",[t._v("To recap:")]),t._m(27)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"deploying-applications"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploying-applications","aria-hidden":"true"}},[this._v("#")]),this._v(" Deploying Applications")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("A project built with webpack can be deployed to a variety of environments. A public project that doesn't rely on a backend can be pushed to GitHub Pages using the "),e("em",[this._v("gh-pages")]),this._v(" package. Also, there are a variety of webpack plugins that can target other environments, such as S3.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"deploying-with-gh-pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploying-with-gh-pages","aria-hidden":"true"}},[this._v("#")]),this._v(" Deploying with "),e("em",[this._v("gh-pages")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"setting-up-gh-pages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-gh-pages","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Up "),e("em",[this._v("gh-pages")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),e("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" gh-pages --save-dev\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("You are also going to need a script in "),e("em",[this._v("package.json")]),this._v(":")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("package.json")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{attrs:{class:"token property"}},[t._v('"deploy"')]),s("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"gh-pages -d build"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("To make the asset paths work on GitHub Pages, "),e("code",[this._v("output.publicPath")]),this._v(" field has to be adjusted. Otherwise, the asset paths end up pointing at the root, and that doesn't work unless you are hosting behind a domain root (say "),e("code",[this._v("survivejs.com")]),this._v(") directly.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("publicPath")]),this._v(" gives control over the resulting urls you see at "),e("em",[this._v("index.html")]),this._v(" for instance. If you are hosting your assets on a CDN, this would be the place to tweak.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("webpack.config.js")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" productionConfig "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token function"}},[t._v("merge")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n    output"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\nleanpub"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("start"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token keyword"}},[t._v("delete")]),t._v("\n      "),s("span",{attrs:{class:"token comment"}},[t._v("// Needed for code splitting to work in nested paths")]),t._v("\n      publicPath"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"/"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nleanpub"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("end"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),s("span",{attrs:{class:"token keyword"}},[t._v("delete")]),t._v("\nleanpub"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("start"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n      "),s("span",{attrs:{class:"token comment"}},[t._v("// Tweak this to match your GitHub project name")]),t._v("\n      publicPath"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"/webpack-demo/"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nleanpub"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("end"),s("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("insert\n    "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),s("span",{attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("After building ("),s("code",[t._v("npm run build")]),t._v(") and deploying ("),s("code",[t._v("npm run deploy")]),t._v("), you should have your application from the "),s("code",[t._v("build/")]),t._v(" directory hosted on GitHub Pages. You should find it at "),s("code",[t._v("https://<name>.github.io/<project>")]),t._v(" assuming everything went fine.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("T> If you need a more elaborate setup, use the Node API that "),e("em",[this._v("gh-pages")]),this._v(" provides. The default command line tool it gives is enough for essential purposes, though.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("T> GitHub Pages allows you to choose the branch where you deploy. It's possible to use the "),e("code",[this._v("master")]),this._v(" branch even as it's enough for minimal sites that don't need bundling. You can also point below the "),e("em",[this._v("./docs")]),this._v(" directory within your "),e("code",[this._v("master")]),this._v(" branch and maintain your site.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"archiving-old-versions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#archiving-old-versions","aria-hidden":"true"}},[this._v("#")]),this._v(" Archiving Old Versions")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("em",[this._v("gh-pages")]),this._v(" provides an "),e("code",[this._v("add")]),this._v(" option for archival purposes. The idea goes as follows:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("Copy the old version of the site in a temporary directory and remove "),e("em",[this._v("archive")]),this._v(" directory from it. You can name the archival directory as you want.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("Set up a script to call "),e("em",[this._v("gh-pages")]),this._v(" through Node as below and capture possible errors in the callback:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[t._v("ghpages"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("publish")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{attrs:{class:"token function"}},[t._v("join")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v('"build"')]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" add"),s("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"deploying-to-other-environments"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploying-to-other-environments","aria-hidden":"true"}},[this._v("#")]),this._v(" Deploying to Other Environments")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("W> To make sure clients relying on the older bundles still work after deploying a new version, do "),e("strong",[this._v("not")]),this._v(" remove the old files until they are old enough. You can perform a specific check on what to remove when deploying instead of removing every old asset.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"resolving-output-publicpath-dynamically"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resolving-output-publicpath-dynamically","aria-hidden":"true"}},[this._v("#")]),this._v(" Resolving "),e("code",[this._v("output.publicPath")]),this._v(" Dynamically")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("If you don't know "),e("code",[this._v("publicPath")]),this._v(" beforehand, it's possible to resolve it based on the environment by following these steps:")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[t._v("Set "),s("code",[t._v("__webpack_public_path__ = window.myDynamicPublicPath;")]),t._v(" in the application entry point and resolve it as you see fit.")]),s("li",[t._v("Remove "),s("code",[t._v("output.publicPath")]),t._v(" setting from your webpack configuration.")]),s("li",[t._v("If you are using ESLint, set it to ignore the global through "),s("code",[t._v("globals.__webpack_public_path__: true")]),t._v(".")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("When you compile, webpack picks up "),e("code",[this._v("__webpack_public_path__")]),this._v(" and rewrites it so that it points to webpack logic.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"conclusion"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#conclusion","aria-hidden":"true"}},[this._v("#")]),this._v(" Conclusion")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("It's possible to handle the problem of deployment outside of webpack. You can achieve this in an npm script for example.")]),e("li",[this._v("You can configure webpack's "),e("code",[this._v("output.publicPath")]),this._v(" dynamically. This technique is valuable if you don't know it compile-time and want to decide it later. This is possible through the "),e("code",[this._v("__webpack_public_path__")]),this._v(" global.")])])}],!1,null,null,null);n.options.__file="05_deploying.md";e.default=n.exports}}]);