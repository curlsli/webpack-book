(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{210:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),t._m(1),n("p",[t._v("Plugins allow you to intercept webpack's execution through hooks. Webpack itself has been implemented as a collection of plugins. Underneath it relies on "),n("a",{attrs:{href:"https://www.npmjs.com/package/tapable",target:"_blank",rel:"noopener noreferrer"}},[t._v("tapable"),n("OutboundLink")],1),t._v(" plugin interface that allows webpack to apply plugins in different ways.")]),n("p",[t._v("You'll learn to develop a couple of small plugins next. Unlike for loaders, there is no separate environment where you can run plugins, so you have to run them against webpack itself. It's possible to push smaller logic outside of the webpack facing portion, though, as this allows you to unit test it in isolation.")]),t._m(2),t._m(3),n("p",[t._v("Regardless of your approach, you should capture possible options passed by a user at the constructor. It's a good idea to declare a schema to communicate them to the user. "),n("a",{attrs:{href:"https://www.npmjs.com/package/schema-utils",target:"_blank",rel:"noopener noreferrer"}},[t._v("schema-utils"),n("OutboundLink")],1),t._v(" allows validation and works with loaders too.")]),n("p",[t._v("When the plugin is connected to webpack configuration, webpack will run its constructor and call "),n("code",[t._v("apply")]),t._v(" with a compiler object passed to it. The object exposes webpack's plugin API and allows you to use its hooks as listed by "),n("a",{attrs:{href:"https://webpack.js.org/api/plugins/compiler/",target:"_blank",rel:"noopener noreferrer"}},[t._v("the official compiler reference"),n("OutboundLink")],1),t._v(".")]),n("p",[t._v("T> "),n("a",{attrs:{href:"https://www.npmjs.com/package/webpack-defaults",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-defaults"),n("OutboundLink")],1),t._v(" works as a starting point for webpack plugins. It contains the infrastructure used to develop official webpack loaders and plugins.")]),t._m(4),n("p",[t._v("Since plugins have to be run against webpack, you have to set up one to run a demo plugin that will be developed further:")]),t._m(5),t._m(6),t._m(7),n("p",[t._v("To make it convenient to run, set up a build shortcut:")]),t._m(8),t._m(9),t._m(10),n("p",[t._v("T> If you want an interactive development environment, consider setting up "),n("a",{attrs:{href:"https://www.npmjs.com/package/nodemon",target:"_blank",rel:"noopener noreferrer"}},[t._v("nodemon"),n("OutboundLink")],1),t._v(" against the build. Webpack's watcher won't work in this case.")]),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),n("p",[t._v("{pagebreak}")]),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),n("p",[t._v("Adjust the configuration to pass an option:")]),t._m(21),t._m(22),t._m(23),n("p",[t._v("{pagebreak}")]),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),n("p",[t._v("If you go through webpack's "),n("a",{attrs:{href:"https://webpack.js.org/api/plugins/",target:"_blank",rel:"noopener noreferrer"}},[t._v("plugin development documentation"),n("OutboundLink")],1),t._v(", you'll see a compiler provides a large number of hooks. Each hook corresponds to a specific stage. For example, to emit files, you could listen to the "),n("code",[t._v("emit")]),t._v(" event and then write.")]),t._m(29),t._m(30),t._m(31),n("p",[t._v("W> Forgetting the callback and running the plugin makes webpack fail silently!")]),n("p",[t._v("Running the build should show more information than before because a compilation object contains whole dependency graph traversed by webpack. You have access to everything related to it here including entries, chunks, modules, assets, and more.")]),n("p",[t._v("T> Many of the available hooks expose compilation, but sometimes they reveal a more specific structure, and it takes a more particular study to understand those.")]),t._m(32),t._m(33),t._m(34),n("p",[t._v("To write an asset, you have to use "),n("a",{attrs:{href:"https://www.npmjs.com/package/webpack-sources",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack-sources"),n("OutboundLink")],1),t._v(" file abstraction. Install it first:")]),t._m(35),n("p",[t._v("{pagebreak}")]),t._m(36),t._m(37),t._m(38),n("p",[t._v("After building, you should see output:")]),t._m(39),t._m(40),n("p",[t._v("T> Compilation has a set of hooks of its own as covered in "),n("a",{attrs:{href:"https://webpack.js.org/api/plugins/compiler/",target:"_blank",rel:"noopener noreferrer"}},[t._v("the official compilation reference"),n("OutboundLink")],1),t._v(".")]),t._m(41),t._m(42),t._m(43),t._m(44),n("p",[t._v("There is no way pass information messages to webpack yet although there is "),n("a",{attrs:{href:"https://github.com/webpack/webpack/issues/3996",target:"_blank",rel:"noopener noreferrer"}},[t._v("a logging proposal"),n("OutboundLink")],1),t._v(". If you want to use "),n("code",[t._v("console.log")]),t._v(" for this purpose, push it behind a "),n("code",[t._v("verbose")]),t._v(" flag. The problem is that "),n("code",[t._v("console.log")]),t._v(" will print to stdout and it will end up in webpack's "),n("code",[t._v("--json")]),t._v(" output as a result. A flag will allow the user to work around this problem.")]),t._m(45),n("p",[t._v("A plugin can provide hooks of its own. "),n("a",{attrs:{href:"https://www.npmjs.com/package/html-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("html-webpack-plugin"),n("OutboundLink")],1),t._v(" uses plugins to extend itself as discussed in the "),n("em",[t._v("Getting Started")]),t._v(" chapter.")]),t._m(46),n("p",[t._v("In special cases, like "),n("a",{attrs:{href:"https://www.npmjs.com/package/offline-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("offline-plugin"),n("OutboundLink")],1),t._v(", it makes sense to run a child compiler. It gives full control over related entries and output. Arthur Stolyar, the author of the plugin, has explained "),n("a",{attrs:{href:"https://stackoverflow.com/questions/38276028/webpack-child-compiler-change-configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("the idea of child compilers at Stack Overflow"),n("OutboundLink")],1),t._v(".")]),t._m(47),n("p",[t._v("When you begin to design a plugin, spend time studying existing plugins that are close enough. Develop plugins piece-wise so that you validate one piece at a time. Studying webpack source can give more insight given it's a collection of plugins itself.")]),n("p",[t._v("To recap:")]),t._m(48)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"extending-with-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extending-with-plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" Extending with Plugins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Compared to loaders, plugins are a more flexible means to extend webpack. You have access to webpack's "),s("strong",[this._v("compiler")]),this._v(" and "),s("strong",[this._v("compilation")]),this._v(" processes. It's possible to run child compilers, and plugins can work in tandem with loaders as "),s("code",[this._v("MiniCssExtractPlugin")]),this._v(" shows.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"the-basic-flow-of-webpack-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-basic-flow-of-webpack-plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" The Basic Flow of Webpack Plugins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("A webpack plugin is expected to expose an "),s("code",[this._v("apply(compiler)")]),this._v(" method. JavaScript allows multiple ways to do this. You could use a function and then attach methods to its "),s("code",[this._v("prototype")]),this._v(". To follow the newest syntax, you could use a "),s("code",[this._v("class")]),this._v(" to model the same idea.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"setting-up-a-development-environment"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-a-development-environment","aria-hidden":"true"}},[this._v("#")]),this._v(" Setting Up a Development Environment")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("webpack.plugin.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"path"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" DemoPlugin "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"./plugins/demo-plugin.js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  lib"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("join")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"app"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"shake.js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  build"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" path"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("join")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"build"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  entry"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    lib"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lib"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token constant"}},[t._v("PATHS")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"[name].js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("DemoPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("T> If you don't have a "),s("code",[this._v("lib")]),this._v(" entry file set up yet, write one. The contents don't matter as long as it's JavaScript that webpack can parse.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("package.json")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"build:plugin"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"webpack --config webpack.plugin.js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Executing it should result in an "),s("code",[this._v("Error: Cannot find module")]),this._v(" failure as the actual plugin is still missing.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"implementing-a-basic-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#implementing-a-basic-plugin","aria-hidden":"true"}},[this._v("#")]),this._v(" Implementing a Basic Plugin")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The simplest plugin should do two things: capture options and provide "),s("code",[this._v("apply")]),this._v(" method:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("plugins/demo-plugin.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("DemoPlugin")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("apply")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"applying"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you run the plugin ("),s("code",[this._v("npm run build:plugin")]),this._v("), you should see "),s("code",[this._v("applying")]),this._v(" message at the console. Given most plugins accept options, it's a good idea to capture those and pass them to "),s("code",[this._v("apply")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"capturing-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#capturing-options","aria-hidden":"true"}},[this._v("#")]),this._v(" Capturing Options")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Options can be captured through a "),s("code",[this._v("constructor")]),this._v(":")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("plugins/demo-plugin.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("DemoPlugin")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("constructor")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("apply")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"apply"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Running the plugin now would result in "),s("code",[this._v("apply undefined")]),this._v(" kind of message given no options were passed.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("webpack.plugin.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// plugins: [new DemoPlugin()],")]),t._v("\n  plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("DemoPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"demo"')]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Now you should see "),s("code",[this._v("apply { name: 'demo' }")]),this._v(" after running.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"understanding-compiler-and-compilation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#understanding-compiler-and-compilation","aria-hidden":"true"}},[this._v("#")]),this._v(" Understanding Compiler and Compilation")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("apply")]),this._v(" receives webpack's compiler as a parameter. Adjust as below:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("plugins/demo-plugin.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("DemoPlugin")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("constructor")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("apply")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("After running, you should see a lot of data. Especially "),s("code",[this._v("options")]),this._v(" should look familiar as it contains webpack configuration. You can also see familiar names like "),s("code",[this._v("records")]),this._v(".")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Change the implementation to listen and capture "),s("code",[this._v("compilation")]),this._v(":")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("plugins/demo-plugin.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("module"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("DemoPlugin")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("constructor")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("apply")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v("// console.log(compiler);")]),t._v("\n    compiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("plugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"emit"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilation"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("log")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilation"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),n("span",{attrs:{class:"token function"}},[t._v("cb")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("p",[t._v("T> Loaders have dirty access to "),n("code",[t._v("compiler")]),t._v(" and "),n("code",[t._v("compilation")]),t._v(" through underscore ("),n("code",[t._v("this._compiler")]),t._v("/"),n("code",[t._v("this._compilation")]),t._v(").")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"writing-files-through-compilation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#writing-files-through-compilation","aria-hidden":"true"}},[this._v("#")]),this._v(" Writing Files Through Compilation")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("The "),s("code",[this._v("assets")]),this._v(" object of compilation can be used for writing new files. You can also capture already created assets, manipulate them, and write them back.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" webpack-sources --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Adjust the code as follows to write through "),s("code",[this._v("RawSource")]),this._v(":")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("plugins/demo-plugin.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" RawSource "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"webpack-sources"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("DemoPlugin")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("constructor")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" options"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{attrs:{class:"token function"}},[t._v("apply")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("this")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    compiler"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("plugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"emit"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("compilation"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cb"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token comment"}},[t._v("// console.log(compilation);")]),t._v("\n      compilation"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("assets"),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("name"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("RawSource")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"demo"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),n("span",{attrs:{class:"token function"}},[t._v("cb")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("Hash: d698e1dab6472ba42525\nVersion: webpack 3.8.1\nTime: 51ms\n Asset     Size  Chunks             Chunk Names\nlib.js   2.9 kB       0  "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  lib\n  demo  4 bytes          "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ./app/shake.js 107 bytes "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("0"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("built"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If you examine "),s("em",[this._v("build/demo")]),this._v(" file, you'll see it contains the word "),s("em",[this._v("demo")]),this._v(" as per code above.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"managing-warnings-and-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#managing-warnings-and-errors","aria-hidden":"true"}},[this._v("#")]),this._v(" Managing Warnings and Errors")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Plugin execution can be caused to fail by throwing ("),s("code",[this._v('throw new Error("Message")')]),this._v("). If you validate options, you can use this method.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In case you want to give the user a warning or an error message during compilation, you should use "),s("code",[this._v("compilation.warnings")]),this._v(" and "),s("code",[this._v("compilation.errors")]),this._v(". Example:")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("compilation"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("warnings"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"warning"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\ncompilation"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("errors"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("push")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"error"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"plugins-can-have-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins-can-have-plugins","aria-hidden":"true"}},[this._v("#")]),this._v(" Plugins Can Have Plugins")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"plugins-can-run-compilers-of-their-own"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#plugins-can-run-compilers-of-their-own","aria-hidden":"true"}},[this._v("#")]),this._v(" Plugins Can Run Compilers of Their Own")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"conclusion"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#conclusion","aria-hidden":"true"}},[this._v("#")]),this._v(" Conclusion")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[n("strong",[t._v("Plugins")]),t._v(" can intercept webpack's execution and extend it making them more flexible than loaders.")]),n("li",[t._v("Plugins can be combined with loaders. "),n("code",[t._v("MiniCssExtractPlugin")]),t._v(" works this way. The accompanying loader is used to mark assets to extract.")]),n("li",[t._v("Plugins have access to webpack's "),n("strong",[t._v("compiler")]),t._v(" and "),n("strong",[t._v("compilation")]),t._v(" processes. Both provide hooks for different stages of webpack's execution flow and allow you to manipulate it. Webpack itself works this way.")]),n("li",[t._v("Plugins can emit new assets and shape existing assets.")]),n("li",[t._v("Plugins can implement plugin systems of their own. "),n("code",[t._v("HtmlWebpackPlugin")]),t._v(" is an example of such plugin.")]),n("li",[t._v("Plugins can run compilers on their own. The isolation gives more control and allows plugins like "),n("em",[t._v("offline-plugin")]),t._v(" to be written.")])])}],!1,null,null,null);e.options.__file="02_plugins.md";s.default=e.exports}}]);