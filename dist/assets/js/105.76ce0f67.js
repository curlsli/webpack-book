(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{178:function(t,s,n){"use strict";n.r(s);var e=n(0),a=Object(e.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),n("p",[t._v("要记住特定CSS规则必须使用哪些厂商前缀才能支持大量用户，这是一项非常很有挑战性的工作。 "),n("strong",[t._v("Autoprefixing")]),t._v(" 解决了这个问题。你可以使用PostCSS 和 "),n("a",{attrs:{href:"https://www.npmjs.com/package/autoprefixer",target:"_blank",rel:"noopener noreferrer"}},[t._v("autoprefixer"),n("OutboundLink")],1),t._v(" 插件开启这个功能。 "),n("em",[t._v("autoprefixer")]),t._v(" 使用 "),n("a",{attrs:{href:"http://caniuse.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Can I Use"),n("OutboundLink")],1),t._v(" 提供服务，用来识别那个样式应该添加前缀。")]),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),n("p",[t._v("在extractCSS这个接口中添加引入autoprefix功能，代码如下：")]),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),n("p",[t._v("如果你知道都需要兼容哪些浏览器，可以创建一个 "),n("a",{attrs:{href:"https://www.npmjs.com/package/browserslist",target:"_blank",rel:"noopener noreferrer"}},[t._v(".browserslistrc"),n("OutboundLink")],1),t._v(" 文件。包括 "),n("em",[t._v("autoprefixer")]),t._v(" 在内，有很多浏览器都支持。")]),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),n("p",[t._v("你可以用 "),n("a",{attrs:{href:"http://stylelint.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Stylelint"),n("OutboundLink")],1),t._v(" 对css进行语法检测。用法同autoprefix一样，但它需要放在在 "),n("em",[t._v("autoprefixing")]),t._v(" 之后。")]),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),n("p",[t._v("再一次运行 "),n("code",[t._v("npm run build")]),t._v(" 脚本命令，可以看到相关的警告信息。具体使用可参考"),n("a",{attrs:{href:"https://stylelint.io/user-guide/rules/",target:"_blank",rel:"noopener noreferrer"}},[t._v("stylelint官方文档"),n("OutboundLink")],1)]),n("p",[t._v("你还可以通过"),n("code",[t._v("extends")]),t._v("选项引用一个配置依赖，如："),n("em",[n("a",{attrs:{href:"https://github.com/stylelint/stylelint-config-standard",target:"_blank",rel:"noopener noreferrer"}},[t._v("stylelint-config-standard"),n("OutboundLink")],1)]),t._v(" 、"),n("em",[n("a",{attrs:{href:"https://github.com/stylelint/stylelint-config-recommended",target:"_blank",rel:"noopener noreferrer"}},[t._v("stylelint-config-recommended"),n("OutboundLink")],1)])]),t._m(25),t._m(26),n("p",[t._v("内容回顾：")]),t._m(27)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"autoprefixing-styleint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#autoprefixing-styleint","aria-hidden":"true"}},[this._v("#")]),this._v(" Autoprefixing && styleint")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"配置-autoprefixing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-autoprefixing","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 Autoprefixing")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("要在构建的项目中添加 autoprefixing功能，你首先需要在项目引入 "),s("em",[this._v("postcss-loader")]),this._v(" 和 "),s("em",[this._v("autoprefixer")]),this._v(" 依赖：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" postcss-loader autoprefixer --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 "),s("strong",[this._v("webpack.parts.js")]),this._v(" 添加这样一个功能函数可以开启autoprefixing：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("exports"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("autoprefix")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  loader"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"postcss-loader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  options"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"autoprefixer"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("webpack.config.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" productionConfig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("merge")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  parts"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("extractCSS")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token comment"}},[t._v('// use: "css-loader",')]),t._v("\n    use"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('"css-loader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parts"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("autoprefix")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了确认配置起作用，运行 "),s("code",[this._v("npm run build")]),this._v(" 脚本命令后，查看输出样式，你可以看到如下的代码：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("src/main.css")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{attrs:{class:"token selector"}},[t._v("...\n\n.pure-button")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v("-webkit-border-radius")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1em"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v("border-radius")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1em"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v(".browserslistrc")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("> 1% # Browser usage over 1%\nLast 2 versions # Or last two versions\nIE 8 # Or IE 8\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("运行 "),s("code",[this._v("npm run build")]),this._v(" 脚本命令，完成后，检查生成的css代码，你会发现样式中少了webkit前缀的部分：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-css extra-class"},[n("pre",{pre:!0,attrs:{class:"language-css"}},[n("code",[n("span",{attrs:{class:"token selector"}},[t._v("...\n\n.pure-button")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v("border-radius")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1em"),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("autoprefixer")]),this._v(" 可以 "),s("strong",[this._v("移除")]),this._v(" 不必要的规则，也可以更具需要支持的浏览器范围信息来达到兼容性的需求。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"css语法检测"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#css语法检测","aria-hidden":"true"}},[this._v("#")]),this._v(" CSS语法检测")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("引入"),s("code",[this._v("stylelint")]),this._v(" 依赖:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" stylelint --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 "),s("em",[this._v("webapck.parts.js")]),this._v(" 添加如下配置配置代码：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('...\nexports.autoprefix = () => ({\n  loader: "postcss-loader",\n  options: {\n    plugins: () => [\n      require("autoprefixer")(),\n      require("stylelint")()\n    ],\n  },\n});\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("运行 "),s("code",[this._v("npm run build")]),this._v(" 脚本命令，你会发现输出类似下面的错误：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("ERROR in ./src/css/style.css (./node_modules/css-loader!./node_modules/postcss-loader/src??ref--7-2!./src/css/style.css)\n    Module build failed (from ./node_modules/postcss-loader/src/index.js):\n    Error: No configuration provided for E:\\workspace\\me\\webpack4-demo\\src\\css\\style.css\n        at module.exports (E:\\workspace\\me\\webpack4-demo\\node_modules\\stylelint\\lib\\utils\\configurationError.js:8:28)\n        at searchForConfig.then.then.config (E:\\workspace\\me\\webpack4-demo\\node_modules\\stylelint\\lib\\getConfigForFile.js:49:15)\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("错误信息提示，需要一个配置文件，所以 可以创建一个 "),s("code",[this._v(".stylelintrc")]),this._v(" 文件，用来存放css书写规范信息，可以定义如下规则：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('"rules": {\n    "at-rule-no-vendor-prefix": true,\n    "at-rule-whitelist": [\n    "import",\n    "media"\n    ],\n    "color-named": "always-where-possible",\n    "color-no-hex": true,\n    "custom-media-pattern": "^([a-z]+-?)*([a-z]+)$",\n    "custom-property-pattern": "^([a-z]+-?)*([a-z]+)$",\n    "declaration-block-no-duplicate-properties": true,\n    "font-family-name-quotes": "always-where-recommended",\n    "font-weight-notation": "numeric",\n    "function-url-quotes": "always",\n    "function-whitelist": [\n    "color"\n    ]\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Autoprefixing是很方便的一个技术，当写CSS代码的时候，它能减少你的工作量。你可以在 "),s("em",[this._v(".browserslistrc")]),this._v(" 文件中定义你要支持的浏览器范围，autoprefixing工具可以使用这个文件优化输出。")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",[n("li",[t._v("Autoprefixing 这个功能可以通过在 PostCSS 插件中引入 "),n("em",[t._v("autoprefixer")]),t._v(" 来实现。")]),n("li",[t._v("Autoprefixing 根据你定义的支持的浏览器，来自动补全不同供应商支持的样式规则。")]),n("li",[n("em",[t._v(".browserslistrc")]),t._v(" 是一个支持配置 "),n("em",[t._v("autoprefixer")]),t._v(" 的标准文件，但它不仅限于配置 "),n("em",[t._v("autoprefixer")]),t._v(" 。")])])}],!1,null,null,null);a.options.__file="04_autoprefixing.md";s.default=a.exports}}]);