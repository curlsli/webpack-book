(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{180:function(t,s,n){"use strict";n.r(s);var a=n(0),e=Object(a.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[t._m(0),n("p",[t._v("虽然现在已经有了一个还算不错的构建，但是我们知道一个Web项目中不光只有js文件，还有css文件，但打包后却不见他们，它们到哪里去了？根据配置，它已内联到js中。这尽管在开发过程中很方便，但实际效果并不理想，这里涉及到项目的优化，在本书的优化这一部分再做详解。")]),n("p",[t._v("当前的构建不能实现css的缓存。当你运行web向时，可能遇到‘没有样式的内容一闪而过’（Flash of Unstyled Content，简称：FOUC）的情况。FOUC出现的原因是因为浏览器需要一段的时间来加载js，而样式只有在那时才会被应用。通过将CSS分离到单独的样式文件中，可以避免这个问题的出现。")]),n("p",[t._v("webpack4.x 推荐使用"),n("a",{attrs:{href:"https://www.npmjs.com/package/mini-css-extract-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("mini-css-extract-plugin"),n("OutboundLink")],1),t._v(" (MCEP)，而低于webpack4.x的可以使用"),n("a",{attrs:{href:"https://www.npmjs.com/package/extract-text-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("extract-text-webpack-plugin"),n("OutboundLink")],1),t._v("。它附带了一个loader，这个提取程序可以将多个CSS文件合为一个，然后插件获取loader合成的结果并分离出一个单独的文件。")]),t._m(1),n("blockquote",[n("p",[t._v("在生产环境中使用JavaScript内嵌样式可能有潜在的危险，因为它是一个"),n("a",{attrs:{href:"https://searchsecurity.techtarget.com.cn/whatis/11-25088/",target:"_blank",rel:"noopener noreferrer"}},[t._v("攻击向量"),n("OutboundLink")],1),t._v("。"),n("strong",[n("a",{attrs:{href:"https://varvy.com/pagespeed/critical-render-path.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("关键路径渲染"),n("OutboundLink")],1),t._v("（Critical path rendering）")]),t._v(" 包含了这个想法，并将关键的CSS内联到初始的HTML有效负载中，从而提高了站点的感知性能。在有限的上下文中，内联少量CSS是加速初始负载(更少的请求)的可行选择。")])]),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),n("p",[t._v("功能的拼接的配置代码如下：")]),t._m(11),t._m(12),t._m(13),n("blockquote",[n("p",[t._v("如果你正在使用 "),n("em",[t._v("CSS 模块")]),t._v(" ，你可以根据*"),n("a",{attrs:{href:"https://lvzhenbang.github.io/webpack-book/dist/zh/styling/01_loading.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("加载样式"),n("OutboundLink")],1),t._v("* 这章所讲的方法，调整 "),n("code",[t._v("use")]),t._v(" 。你也可以将它们独立出来，单独的维护标准的css和css模块的配置。")])]),t._m(14),t._m(15),n("p",[t._v("现在已经把样式推到一个单独的CSS文件中。这样JavaScript包变得稍微小了一些。你就可以避免FOUC问题，浏览器不需要等待JavaScript加载来获得样式信息。相反，它可以单独处理CSS，避免使用flash情况的出现。")]),t._m(16),t._m(17),n("p",[t._v("参考代码如下：")]),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),n("p",[t._v("尽管官方推荐的是在JavaScript内引入样式，然后再构建它们。但是你也可以通过 "),n("code",[t._v("entry")]),t._v(" 入口引入它们，作为一个"),n("a",{attrs:{href:"https://www.npmjs.com/package/glob",target:"_blank",rel:"noopener noreferrer"}},[t._v("全局"),n("OutboundLink")],1),t._v("的CSS文件，使用方法如下：")]),t._m(23),n("p",[t._v("这样你就不用在你的应用代码中引入样式文件了。这也就意味着你放弃了使用css模块化编程的思想。这样做的后果就是你要注意因为样式文件的顺序而引起的样式问题。")]),n("p",[t._v("这样运行 "),n("code",[t._v("npm run build")]),t._v(" 命令后，你会看到生成目录中有 "),n("em",[t._v("style.css")]),t._v(" 和 "),n("em",[t._v("style.js")]),t._v(" 这样两个文件。后一个文件中包含 "),n("code",[t._v("webpackJsonp([1,3],[function(n,c){}]);")]),t._v(" 这样的内容，它不做任何操作，在 "),n("a",{attrs:{href:"https://github.com/webpack/webpack/issues/1967",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack issue 1967"),n("OutboundLink")],1),t._v(" 有详细讨论。")]),t._m(24),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.npmjs.com/package/css-entry-webpack-plugin",target:"_blank",rel:"noopener noreferrer"}},[t._v("css-entry-webpack-plugin"),n("OutboundLink")],1),t._v(" 插件就是被设计用来实现这种操作的，它也可以实现与 MCEP 插件相同的css分离功能。")])]),t._m(25),t._m(26),n("p",[t._v("内容回顾：")]),t._m(27),n("p",[t._v("在下一章中，将详细介绍如果清除项目中未用到的样式。")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"分割-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分割-css","aria-hidden":"true"}},[this._v("#")]),this._v(" 分割 CSS")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("由于 "),s("code",[this._v("MiniCssExtractPlugin")]),this._v(" 插件的执行伴随着编译，因此使用时要考虑编译的开销，而热模块交换（HMR）不支持，所以不适合开发模式下使用，但如果仅把它用于生产，则不用考虑这个问题。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"配置-minicssextractplugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-minicssextractplugin","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 "),s("code",[this._v("MiniCssExtractPlugin")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("首先需要添加 "),s("code",[this._v("MiniCssExtractPlugin")]),this._v(" 依赖：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" mini-css-extract-plugin --save-dev\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("MiniCssExtractPlugin")]),this._v(" 包含一个loader，"),s("code",[this._v("MiniCssExtractPlugin.loader")]),this._v(" 这个标记可以用来提取静态资源中的css，然后插件在前面的基础上分离css。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 "),s("strong",[this._v("webpack.parts.js")]),this._v(" 中，添加如下的配置：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MiniCssExtractPlugin "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"mini-css-extract-plugin"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nexports"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function-variable function"}},[t._v("extractCSS")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" include"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exclude"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" use "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// Output extracted CSS to a file")]),t._v("\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" plugin "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"[name].css"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    module"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      rules"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          test"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token regex"}},[t._v("/\\.css$/")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          include"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          exclude"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n          use"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            MiniCssExtractPlugin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("concat")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("use"),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    plugins"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("plugin"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("[name]")]),this._v(" 占位符引入入口名称为css模块的名称。占位符和hash用法和意义将在 "),s("em",[s("a",{attrs:{href:""}},[this._v("在文件名中添加hash")]),this._v("https://lvzhenbang.github.io/webpack-book/dist/zh/optimizing/04_adding_hashes_to_filenames.html")]),this._v(" 这章详解。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("如果你想输出文件到指定目录，你可以添加一个路径名来指定路径。如："),s("code",[this._v('filename: "styles/[name].css"')]),this._v(".")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"如何在配置中实现功能的拼接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何在配置中实现功能的拼接","aria-hidden":"true"}},[this._v("#")]),this._v(" 如何在配置中实现功能的拼接")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("webpack.config.js")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" commonConfig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("merge")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{attrs:{class:"token comment"}},[t._v("// parts.loadCSS(),")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("// const productionConfig = merge([]);")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" productionConfig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("merge")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  parts"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("extractCSS")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    use"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"css-loader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" developmentConfig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("merge")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  parts"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("loadCSS")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("使用这种方式，在开发中，你任然可以使用HMR。在生产模式下你也可以实现css的分离。 "),s("code",[this._v("HtmlWebpackPlugin")]),this._v(" 可以成一个 "),s("code",[this._v("index.html")]),this._v(" 文件，并实现分离的css文件的注入。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("运行 "),s("code",[this._v("npm run build")]),this._v(" 脚本命令后，你将看到与下面相似的结果：")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("Hash: 45a5e26cc963eb12db02\nVersion: webpack 4.1.1\nTime: 752ms\nBuilt at: 3/16/2018 4:24:40 PM\n     Asset       Size  Chunks             Chunk Names\n   main.js  700 bytes       0  "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  main\n  main.css   33 bytes       0  "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("  main\nindex.html  220 bytes          "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("emitted"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nEntrypoint main "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" main.js main.css\n   "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ./src/index.js + 1 modules 247 bytes "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("0"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("built"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n       "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" ./src/index.js 99 bytes "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("built"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n       "),n("span",{attrs:{class:"token operator"}},[t._v("|")]),t._v(" ./src/component.js 143 bytes "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("built"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n   "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("1"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" ./src/main.css 41 bytes "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("0"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("built"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("blockquote",[n("p",[t._v("如果你遇到了 "),n("code",[t._v("Module build failed: CssSyntaxError:")]),t._v(" 或 "),n("code",[t._v("Module build failed: Unknown word")]),t._v(" 的错误，首先你要确定你的 "),n("code",[t._v("common")]),t._v(" 配置中是否引入了一个 "),n("code",[t._v("css-loader")]),t._v(" 对css文件进行相应的转换，使它能够被webpack处理，如果是 "),n("code",[t._v("*sass")]),t._v(" 这样的css扩展类型文件，亦需要引入相应的loader对它进行处理。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"用-env-判断是否使用-mecp-插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用-env-判断是否使用-mecp-插件","aria-hidden":"true"}},[this._v("#")]),this._v(" 用 "),s("code",[this._v("env")]),this._v(" 判断是否使用 MECP 插件")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-Javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("webpack"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parts"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js"),n("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  process"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env "),n("span",{attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"production"')]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v("MiniCssExtractPlugin"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"style-loader"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("em",[this._v("webpack.config.js")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('const commonConfig = merge([\n  ...\n  parts.extractCSS({\n    use: "css-loader",\n  }),\n]);\n\nconst productionConfig = merge([\n  // parts.extractCSS({\n  //   use: "css-loader",\n  // }),\n]);\n\nconst developmentConfig = merge([\n  ...\n  // parts.loadCSS(),\n]);\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果 "),s("code",[this._v("env")]),this._v(' 代表的值为 "production" 则使用 MECP 插件所自带的loader，反之测试用 '),s("code",[this._v("style-loader")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"在javascript之外管理css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在javascript之外管理css","aria-hidden":"true"}},[this._v("#")]),this._v(" 在JavaScript之外管理css")])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"language-javascript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" glob "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("require")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"glob"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" commonConfig "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("merge")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    entry"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n      style"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" glob"),n("span",{attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{attrs:{class:"token function"}},[t._v("sync")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token string"}},[t._v('"./src/**/*.css"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("你可以创建一个css文件，然后用 "),s("code",[this._v("@import")]),this._v(" 按照所需的顺序，引入所有的css文件；你也可以创建一个js文件用 "),s("code",[this._v("import")]),this._v(" 按照所需的顺序，引入所有的css文件，来实现相同的效果。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[this._v("#")]),this._v(" 总结")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("当前的设置巧妙地将样式与JavaScript分离。虽然这种技术在CSS中最有价值，但它也可以用于提取HTML模板或你使用的任何其他文件类型。"),s("code",[this._v("MiniCssExtractPlugin")]),this._v(" 的难点在于它的设置，但是它的复杂性被隐藏在抽象之后。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("用 "),s("code",[this._v("MiniCssExtractPlugin")]),this._v(" 插件解决了FOUC问题。分离css到独立的文件中可以实现css的缓存使用，也可以减少以攻击向量。")]),s("li",[this._v("如果你不喜欢在JavaScript引入样式，你可以通过 "),s("code",[this._v("entry")]),this._v(" 来引入项目所需的样式，但要注意引入的顺序。")])])}],!1,null,null,null);e.options.__file="02_separating_css.md";s.default=e.exports}}]);